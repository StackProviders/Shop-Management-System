{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/lib/utils.ts"],"sourcesContent":["import { type ClassValue, clsx } from 'clsx'\nimport { twMerge } from 'tailwind-merge'\n\nexport function cn(...inputs: ClassValue[]) {\n    return twMerge(clsx(inputs))\n}\n\nexport function formatCurrency(amount: number, currency = 'INR'): string {\n    return new Intl.NumberFormat('en-US', {\n        style: 'currency',\n        currency\n    }).format(amount)\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACtC,OAAO,IAAA,oOAAO,EAAC,IAAA,8LAAI,EAAC;AACxB;AAEO,SAAS,eAAe,MAAc,EAAE,WAAW,KAAK;IAC3D,OAAO,IAAI,KAAK,YAAY,CAAC,SAAS;QAClC,OAAO;QACP;IACJ,GAAG,MAAM,CAAC;AACd"}},
    {"offset": {"line": 27, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/lib/db/schema.ts"],"sourcesContent":["import { mapTo, data, rootCollection } from 'firestore-repository/schema'\nimport type { ShopStatus, ShopRole, ShopPermission } from '@/types/shop'\n\nexport type ShopData = Record<string, unknown> & {\n    shopname: string\n    logo_url?: string\n    phone_number?: string\n    email?: string\n    shop_type?: string\n    shop_category?: string\n    shop_address?: string\n    signature?: string\n    status: ShopStatus\n    created_userId: string\n    createdAt: Date\n    updatedAt: Date\n}\n\nexport type ShopMemberData = Record<string, unknown> & {\n    shopId: string\n    userId: string\n    role: ShopRole\n    permissions: ShopPermission[]\n    invitedBy: string\n    joinedAt: Date\n    createdAt: Date\n    updatedAt: Date\n}\n\nexport const shopsCollection = rootCollection({\n    name: 'shops',\n    id: mapTo('id'),\n    // @ts-expect-error - firestore-repository DocumentData constraint issue\n    data: data<ShopData>()\n})\n\nexport const shopMembersCollection = rootCollection({\n    name: 'shop_members',\n    id: mapTo('id'),\n    // @ts-expect-error - firestore-repository DocumentData constraint issue\n    data: data<ShopMemberData>()\n})\n\nexport type UserData = Record<string, unknown> & {\n    email?: string\n    displayName?: string\n    photoURL?: string\n    phone?: string\n    name?: string\n    photo?: string\n    createdAt: Date\n    lastLoginAt?: Date\n}\n\nexport const usersCollection = rootCollection({\n    name: 'users',\n    id: mapTo('id'),\n    // @ts-expect-error - firestore-repository DocumentData constraint issue\n    data: data<UserData>()\n})\n\nexport type UserIdentifierData = Record<string, unknown> & {\n    uid: string\n}\n\nexport const userIdentifiersCollection = rootCollection({\n    name: 'user_identifiers',\n    id: mapTo('id'),\n    // @ts-expect-error - firestore-repository DocumentData constraint issue\n    data: data<UserIdentifierData>()\n})\n\nexport type OTPRequestData = Record<string, unknown> & {\n    otpHash: string\n    expiresAt: Date\n    attempts: number\n    createdAt: Date\n}\n\nexport const otpRequestsCollection = rootCollection({\n    name: 'otp_requests',\n    id: mapTo('id'),\n    // @ts-expect-error - firestore-repository DocumentData constraint issue\n    data: data<OTPRequestData>()\n})\n\nexport type TrustedDeviceData = Record<string, unknown> & {\n    deviceTokenHash: string\n    deviceInfo: string\n    createdAt: Date\n    expiresAt: Date\n    revoked: boolean\n}\n\nexport const trustedDevicesCollection = rootCollection({\n    name: 'trusted_devices',\n    id: mapTo('id'),\n    // @ts-expect-error - firestore-repository DocumentData constraint issue\n    data: data<TrustedDeviceData>()\n})\n\nexport type DeviceData = Record<string, unknown> & {\n    userId: string\n    deviceId: string\n    deviceName?: string\n    trusted: boolean\n    lastUsed: Date\n    expiresAt: Date\n    createdAt: Date\n}\n\nexport const devicesCollection = rootCollection({\n    name: 'devices',\n    id: mapTo('id'),\n    // @ts-expect-error - firestore-repository DocumentData constraint issue\n    data: data<DeviceData>()\n})\n\nexport type OTPData = Record<string, unknown> & {\n    userId: string\n    code: string\n    expiresAt: Date\n    verified: boolean\n    createdAt: Date\n}\n\nexport type PartyType = 'customer' | 'supplier'\nexport type PartyStatus = 'active' | 'inactive'\n\nexport type PartyData = Record<string, unknown> & {\n    shopId: string\n    type: PartyType\n    name: string\n    contactInfo: {\n        phone?: string\n        email?: string\n        address?: string\n    }\n    balance: number\n    status: PartyStatus\n    createdAt: Date\n    updatedAt: Date\n}\n\nexport const partiesCollection = rootCollection({\n    name: 'parties',\n    id: mapTo('id'),\n    // @ts-expect-error - firestore-repository DocumentData constraint issue\n    data: data<PartyData>()\n})\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAAA;;AA6BO,MAAM,kBAAkB,IAAA,uPAAc,EAAC;IAC1C,MAAM;IACN,IAAI,IAAA,8OAAK,EAAC;IACV,wEAAwE;IACxE,MAAM,IAAA,6OAAI;AACd;AAEO,MAAM,wBAAwB,IAAA,uPAAc,EAAC;IAChD,MAAM;IACN,IAAI,IAAA,8OAAK,EAAC;IACV,wEAAwE;IACxE,MAAM,IAAA,6OAAI;AACd;AAaO,MAAM,kBAAkB,IAAA,uPAAc,EAAC;IAC1C,MAAM;IACN,IAAI,IAAA,8OAAK,EAAC;IACV,wEAAwE;IACxE,MAAM,IAAA,6OAAI;AACd;AAMO,MAAM,4BAA4B,IAAA,uPAAc,EAAC;IACpD,MAAM;IACN,IAAI,IAAA,8OAAK,EAAC;IACV,wEAAwE;IACxE,MAAM,IAAA,6OAAI;AACd;AASO,MAAM,wBAAwB,IAAA,uPAAc,EAAC;IAChD,MAAM;IACN,IAAI,IAAA,8OAAK,EAAC;IACV,wEAAwE;IACxE,MAAM,IAAA,6OAAI;AACd;AAUO,MAAM,2BAA2B,IAAA,uPAAc,EAAC;IACnD,MAAM;IACN,IAAI,IAAA,8OAAK,EAAC;IACV,wEAAwE;IACxE,MAAM,IAAA,6OAAI;AACd;AAYO,MAAM,oBAAoB,IAAA,uPAAc,EAAC;IAC5C,MAAM;IACN,IAAI,IAAA,8OAAK,EAAC;IACV,wEAAwE;IACxE,MAAM,IAAA,6OAAI;AACd;AA4BO,MAAM,oBAAoB,IAAA,uPAAc,EAAC;IAC5C,MAAM;IACN,IAAI,IAAA,8OAAK,EAAC;IACV,wEAAwE;IACxE,MAAM,IAAA,6OAAI;AACd"}},
    {"offset": {"line": 99, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/lib/db/queries.ts"],"sourcesContent":["import {\n    condition as $,\n    query,\n    limit,\n    orderBy\n} from 'firestore-repository/query'\nimport {\n    shopsCollection,\n    shopMembersCollection,\n    devicesCollection\n} from './schema'\n\nexport const getUserShopsQuery = (userId: string) =>\n    query(shopMembersCollection, $('userId', '==', userId))\n\nexport const getShopMembersQuery = (shopId: string) =>\n    query(shopMembersCollection, $('shopId', '==', shopId))\n\nexport const getShopMemberQuery = (shopId: string, userId: string) =>\n    query(\n        shopMembersCollection,\n        $('shopId', '==', shopId),\n        $('userId', '==', userId),\n        limit(1)\n    )\n\nexport const getUserActiveShopsQuery = (userId: string) =>\n    query(\n        shopsCollection,\n        $('created_userId', '==', userId),\n        $('status', '==', 'active')\n    )\n\nexport const getShopsByStatusQuery = (status: string) =>\n    query(\n        shopsCollection,\n        $('status', '==', status),\n        orderBy('createdAt', 'desc')\n    )\n\nexport const getUserDevicesQuery = (userId: string) =>\n    query(devicesCollection, $('userId', '==', userId))\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA;AAMA;;;AAMO,MAAM,oBAAoB,CAAC,SAC9B,IAAA,6OAAK,EAAC,mJAAqB,EAAE,IAAA,iPAAC,EAAC,UAAU,MAAM;AAE5C,MAAM,sBAAsB,CAAC,SAChC,IAAA,6OAAK,EAAC,mJAAqB,EAAE,IAAA,iPAAC,EAAC,UAAU,MAAM;AAE5C,MAAM,qBAAqB,CAAC,QAAgB,SAC/C,IAAA,6OAAK,EACD,mJAAqB,EACrB,IAAA,iPAAC,EAAC,UAAU,MAAM,SAClB,IAAA,iPAAC,EAAC,UAAU,MAAM,SAClB,IAAA,6OAAK,EAAC;AAGP,MAAM,0BAA0B,CAAC,SACpC,IAAA,6OAAK,EACD,6IAAe,EACf,IAAA,iPAAC,EAAC,kBAAkB,MAAM,SAC1B,IAAA,iPAAC,EAAC,UAAU,MAAM;AAGnB,MAAM,wBAAwB,CAAC,SAClC,IAAA,6OAAK,EACD,6IAAe,EACf,IAAA,iPAAC,EAAC,UAAU,MAAM,SAClB,IAAA,+OAAO,EAAC,aAAa;AAGtB,MAAM,sBAAsB,CAAC,SAChC,IAAA,6OAAK,EAAC,+IAAiB,EAAE,IAAA,iPAAC,EAAC,UAAU,MAAM"}},
    {"offset": {"line": 127, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/lib/db/repositories.ts"],"sourcesContent":["import {\n    collection,\n    doc,\n    getDoc,\n    getDocs,\n    setDoc,\n    deleteDoc,\n    Query,\n    DocumentData,\n    writeBatch,\n    onSnapshot,\n    Firestore,\n    getFirestore\n} from 'firebase/firestore'\nimport { getApp } from 'firebase/app'\n\nexport class Repository<T extends { id: string }> {\n    constructor(private collectionName: string) {}\n\n    private getDb(): Firestore {\n        return getFirestore(getApp())\n    }\n\n    async get(filter: { id: string }): Promise<T | null> {\n        const db = this.getDb()\n        const docRef = doc(db, this.collectionName, filter.id)\n        const docSnap = await getDoc(docRef)\n        return docSnap.exists()\n            ? ({ id: docSnap.id, ...docSnap.data() } as T)\n            : null\n    }\n\n    async list(q?: Query<DocumentData>): Promise<T[]> {\n        const db = this.getDb()\n        const querySnapshot = await getDocs(\n            q || collection(db, this.collectionName)\n        )\n        return querySnapshot.docs.map(\n            (doc) => ({ id: doc.id, ...doc.data() }) as T\n        )\n    }\n\n    subscribe(\n        callback: (data: T[]) => void,\n        q?: Query<DocumentData>\n    ): () => void {\n        const db = this.getDb()\n        return onSnapshot(\n            q || collection(db, this.collectionName),\n            { includeMetadataChanges: true },\n            (snapshot) => {\n                const data = snapshot.docs.map(\n                    (doc) => ({ id: doc.id, ...doc.data() }) as T\n                )\n                callback(data)\n            }\n        )\n    }\n\n    async set(data: T): Promise<void> {\n        const db = this.getDb()\n        const docRef = doc(db, this.collectionName, data.id)\n        await setDoc(docRef, data, { merge: true })\n    }\n\n    async delete(filter: { id: string }): Promise<void> {\n        const db = this.getDb()\n        const docRef = doc(db, this.collectionName, filter.id)\n        await deleteDoc(docRef)\n    }\n\n    async batchDelete(items: { id: string }[]): Promise<void> {\n        const db = this.getDb()\n        const batch = writeBatch(db)\n        items.forEach((item) => {\n            const docRef = doc(db, this.collectionName, item.id)\n            batch.delete(docRef)\n        })\n        await batch.commit()\n    }\n}\n"],"names":[],"mappings":";;;;AAAA;AAAA;AAcA;AAAA;;;AAEO,MAAM;;IACT,YAAY,AAAQ,cAAsB,CAAE;aAAxB,iBAAA;IAAyB;IAErC,QAAmB;QACvB,OAAO,IAAA,yRAAY,EAAC,IAAA,yOAAM;IAC9B;IAEA,MAAM,IAAI,MAAsB,EAAqB;QACjD,MAAM,KAAK,IAAI,CAAC,KAAK;QACrB,MAAM,SAAS,IAAA,gRAAG,EAAC,IAAI,IAAI,CAAC,cAAc,EAAE,OAAO,EAAE;QACrD,MAAM,UAAU,MAAM,IAAA,mRAAM,EAAC;QAC7B,OAAO,QAAQ,MAAM,KACd;YAAE,IAAI,QAAQ,EAAE;YAAE,GAAG,QAAQ,IAAI,EAAE;QAAC,IACrC;IACV;IAEA,MAAM,KAAK,CAAuB,EAAgB;QAC9C,MAAM,KAAK,IAAI,CAAC,KAAK;QACrB,MAAM,gBAAgB,MAAM,IAAA,oRAAO,EAC/B,KAAK,IAAA,uRAAU,EAAC,IAAI,IAAI,CAAC,cAAc;QAE3C,OAAO,cAAc,IAAI,CAAC,GAAG,CACzB,CAAC,MAAQ,CAAC;gBAAE,IAAI,IAAI,EAAE;gBAAE,GAAG,IAAI,IAAI,EAAE;YAAC,CAAC;IAE/C;IAEA,UACI,QAA6B,EAC7B,CAAuB,EACb;QACV,MAAM,KAAK,IAAI,CAAC,KAAK;QACrB,OAAO,IAAA,uRAAU,EACb,KAAK,IAAA,uRAAU,EAAC,IAAI,IAAI,CAAC,cAAc,GACvC;YAAE,wBAAwB;QAAK,GAC/B,CAAC;YACG,MAAM,OAAO,SAAS,IAAI,CAAC,GAAG,CAC1B,CAAC,MAAQ,CAAC;oBAAE,IAAI,IAAI,EAAE;oBAAE,GAAG,IAAI,IAAI,EAAE;gBAAC,CAAC;YAE3C,SAAS;QACb;IAER;IAEA,MAAM,IAAI,IAAO,EAAiB;QAC9B,MAAM,KAAK,IAAI,CAAC,KAAK;QACrB,MAAM,SAAS,IAAA,gRAAG,EAAC,IAAI,IAAI,CAAC,cAAc,EAAE,KAAK,EAAE;QACnD,MAAM,IAAA,mRAAM,EAAC,QAAQ,MAAM;YAAE,OAAO;QAAK;IAC7C;IAEA,MAAM,OAAO,MAAsB,EAAiB;QAChD,MAAM,KAAK,IAAI,CAAC,KAAK;QACrB,MAAM,SAAS,IAAA,gRAAG,EAAC,IAAI,IAAI,CAAC,cAAc,EAAE,OAAO,EAAE;QACrD,MAAM,IAAA,sRAAS,EAAC;IACpB;IAEA,MAAM,YAAY,KAAuB,EAAiB;QACtD,MAAM,KAAK,IAAI,CAAC,KAAK;QACrB,MAAM,QAAQ,IAAA,uRAAU,EAAC;QACzB,MAAM,OAAO,CAAC,CAAC;YACX,MAAM,SAAS,IAAA,gRAAG,EAAC,IAAI,IAAI,CAAC,cAAc,EAAE,KAAK,EAAE;YACnD,MAAM,MAAM,CAAC;QACjB;QACA,MAAM,MAAM,MAAM;IACtB;AACJ"}},
    {"offset": {"line": 200, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/lib/db/index.ts"],"sourcesContent":["export * from './schema'\nexport * from './queries'\nexport { Repository } from './repositories'\nimport { getFirestore } from 'firebase/firestore'\nimport { getStorage } from 'firebase/storage'\nimport { getApp } from 'firebase/app'\n\nexport const getDatabase = () => getFirestore(getApp())\nexport const getStorageInstance = () => getStorage(getApp())\n\nimport { Repository } from './repositories'\nimport type {\n    UserData,\n    ShopData,\n    ShopMemberData,\n    DeviceData,\n    OTPData\n} from './schema'\n\nexport const usersRepo = new Repository<UserData & { id: string }>('users')\nexport const shopsRepo = new Repository<ShopData & { id: string }>('shops')\nexport const shopMembersRepo = new Repository<ShopMemberData & { id: string }>(\n    'shop_members'\n)\nexport const devicesRepo = new Repository<DeviceData & { id: string }>(\n    'devices'\n)\nexport const otpsRepo = new Repository<OTPData & { id: string }>('otps')\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAAA;;;;;;;AAEO,MAAM,cAAc,IAAM,IAAA,yRAAY,EAAC,IAAA,yOAAM;AAC7C,MAAM,qBAAqB,IAAM,IAAA,ySAAU,EAAC,IAAA,yOAAM;;AAWlD,MAAM,YAAY,IAAI,8IAAU,CAA4B;AAC5D,MAAM,YAAY,IAAI,8IAAU,CAA4B;AAC5D,MAAM,kBAAkB,IAAI,8IAAU,CACzC;AAEG,MAAM,cAAc,IAAI,8IAAU,CACrC;AAEG,MAAM,WAAW,IAAI,8IAAU,CAA2B"}},
    {"offset": {"line": 243, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/lib/store.ts"],"sourcesContent":["import { LazyStore } from '@tauri-apps/plugin-store'\n\n// Global store instances\nexport const authStore = new LazyStore('auth.json')\nexport const shopStore = new LazyStore('shop-settings.json')\nexport const saleStore = new LazyStore('sale-settings.json')\nexport const appStore = new LazyStore('app-settings.json')\n\n// Store keys\nexport const STORE_KEYS = {\n    // Auth keys\n    DEVICE_ID: 'deviceId',\n    DEVICE_TOKEN: 'deviceToken',\n    USER_ID: 'userId',\n    USER_SESSION: 'userSession',\n    LOGOUT_FLAG: 'logoutFlag',\n    LAST_LOGIN_TYPE: 'lastLoginType',\n\n    // Shop keys\n    CURRENT_SHOP_ID: 'currentShopId',\n\n    // Sale keys\n    SALE_COLUMN_VISIBILITY: 'saleColumnVisibility',\n\n    // App settings keys\n    THEME: 'theme',\n    LANGUAGE: 'language',\n    NOTIFICATIONS_ENABLED: 'notificationsEnabled'\n} as const\n\n// Helper functions\nexport const storeHelpers = {\n    async get<T>(store: LazyStore, key: string): Promise<T | null> {\n        return (await store.get<T>(key)) || null\n    },\n\n    async set<T>(store: LazyStore, key: string, value: T): Promise<void> {\n        await store.set(key, value)\n        await store.save()\n    },\n\n    async delete(store: LazyStore, key: string): Promise<void> {\n        await store.delete(key)\n        await store.save()\n    },\n\n    async clear(store: LazyStore): Promise<void> {\n        await store.clear()\n        await store.save()\n    }\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA;;AAGO,MAAM,YAAY,IAAI,qQAAS,CAAC;AAChC,MAAM,YAAY,IAAI,qQAAS,CAAC;AAChC,MAAM,YAAY,IAAI,qQAAS,CAAC;AAChC,MAAM,WAAW,IAAI,qQAAS,CAAC;AAG/B,MAAM,aAAa;IACtB,YAAY;IACZ,WAAW;IACX,cAAc;IACd,SAAS;IACT,cAAc;IACd,aAAa;IACb,iBAAiB;IAEjB,YAAY;IACZ,iBAAiB;IAEjB,YAAY;IACZ,wBAAwB;IAExB,oBAAoB;IACpB,OAAO;IACP,UAAU;IACV,uBAAuB;AAC3B;AAGO,MAAM,eAAe;IACxB,MAAM,KAAO,KAAgB,EAAE,GAAW;QACtC,OAAO,AAAC,MAAM,MAAM,GAAG,CAAI,QAAS;IACxC;IAEA,MAAM,KAAO,KAAgB,EAAE,GAAW,EAAE,KAAQ;QAChD,MAAM,MAAM,GAAG,CAAC,KAAK;QACrB,MAAM,MAAM,IAAI;IACpB;IAEA,MAAM,QAAO,KAAgB,EAAE,GAAW;QACtC,MAAM,MAAM,MAAM,CAAC;QACnB,MAAM,MAAM,IAAI;IACpB;IAEA,MAAM,OAAM,KAAgB;QACxB,MAAM,MAAM,KAAK;QACjB,MAAM,MAAM,IAAI;IACpB;AACJ"}},
    {"offset": {"line": 301, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/lib/tauri.ts"],"sourcesContent":["import { invoke } from '@tauri-apps/api/core'\n\nconst isTauri = typeof window !== 'undefined' && '__TAURI__' in window\n\nexport const sendSMS = async (\n    apiKey: string,\n    phoneNumber: string,\n    message: string\n): Promise<void> => {\n    // Ensure apiKey, phoneNumber, and message are not empty\n    if (!apiKey || !phoneNumber || !message) {\n        throw new Error('All parameters must be non-empty strings')\n    }\n\n    if (!isTauri) {\n        console.log('Mocking SMS send:', { apiKey, phoneNumber, message })\n        return\n    }\n\n    await invoke('send_sms', { apiKey, phoneNumber, message })\n}\n\nexport const sendEmail = async (\n    apiKey: string,\n    toEmail: string,\n    subject: string,\n    html: string\n): Promise<void> => {\n    // Ensure apiKey, toEmail, subject, and html are not empty\n    if (!apiKey || !toEmail || !subject || !html) {\n        throw new Error('All parameters must be non-empty strings')\n    }\n\n    if (!isTauri) {\n        console.log('Mocking Email send:', { apiKey, toEmail, subject, html })\n        return\n    }\n\n    await invoke('send_email', { apiKey, toEmail, subject, html })\n}\n"],"names":[],"mappings":";;;;;;AAAA;;AAEA,MAAM,UAAU,kDAAkB,eAAe,eAAe;AAEzD,MAAM,UAAU,OACnB,QACA,aACA;IAEA,wDAAwD;IACxD,IAAI,CAAC,UAAU,CAAC,eAAe,CAAC,SAAS;QACrC,MAAM,IAAI,MAAM;IACpB;IAEA,wCAAc;QACV,QAAQ,GAAG,CAAC,qBAAqB;YAAE;YAAQ;YAAa;QAAQ;QAChE;IACJ;;;AAGJ;AAEO,MAAM,YAAY,OACrB,QACA,SACA,SACA;IAEA,0DAA0D;IAC1D,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,WAAW,CAAC,MAAM;QAC1C,MAAM,IAAI,MAAM;IACpB;IAEA,wCAAc;QACV,QAAQ,GAAG,CAAC,uBAAuB;YAAE;YAAQ;YAAS;YAAS;QAAK;QACpE;IACJ;;;AAGJ"}},
    {"offset": {"line": 347, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/lib/image-cache.ts"],"sourcesContent":["import { fetch } from '@tauri-apps/plugin-http'\nimport { set, get } from 'tauri-plugin-cache-api'\n\ninterface CachedImage {\n    data: string\n    etag?: string\n    lastModified?: string\n}\n\nconst updateQueue = new Map<string, Promise<void>>()\n\nexport async function fetchAndCacheImage(\n    url: string,\n    noCache = false\n): Promise<string> {\n    const cacheKey = `img:${url}`\n\n    if (!noCache) {\n        const cached = await get<CachedImage>(cacheKey)\n        if (cached?.data) {\n            if (!updateQueue.has(url)) {\n                updateQueue.set(url, checkAndUpdate(url, cached))\n            }\n            return cached.data\n        }\n    }\n\n    const response = await fetch(url)\n    const blob = await response.blob()\n    const base64 = await blobToBase64(blob)\n    const dataUrl = `data:${blob.type};base64,${base64}`\n\n    if (!noCache) {\n        set(\n            cacheKey,\n            {\n                data: dataUrl,\n                etag: response.headers.get('etag') || undefined,\n                lastModified: response.headers.get('last-modified') || undefined\n            },\n            { compress: true }\n        ).catch(() => {})\n    }\n\n    return dataUrl\n}\n\nasync function checkAndUpdate(url: string, cached: CachedImage): Promise<void> {\n    try {\n        const response = await fetch(url, { method: 'HEAD' })\n        const etag = response.headers.get('etag')\n        const lastModified = response.headers.get('last-modified')\n\n        if (\n            (etag && etag !== cached.etag) ||\n            (lastModified && lastModified !== cached.lastModified)\n        ) {\n            const fullResponse = await fetch(url)\n            const blob = await fullResponse.blob()\n            const base64 = await blobToBase64(blob)\n            const dataUrl = `data:${blob.type};base64,${base64}`\n\n            await set(\n                `img:${url}`,\n                {\n                    data: dataUrl,\n                    etag: fullResponse.headers.get('etag') || undefined,\n                    lastModified:\n                        fullResponse.headers.get('last-modified') || undefined\n                },\n                { compress: true }\n            )\n        }\n    } finally {\n        updateQueue.delete(url)\n    }\n}\n\nfunction blobToBase64(blob: Blob): Promise<string> {\n    return new Promise((resolve, reject) => {\n        const reader = new FileReader()\n        reader.onloadend = () => {\n            const base64 = (reader.result as string).split(',')[1]\n            resolve(base64)\n        }\n        reader.onerror = reject\n        reader.readAsDataURL(blob)\n    })\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAQA,MAAM,cAAc,IAAI;AAEjB,eAAe,mBAClB,GAAW,EACX,UAAU,KAAK;IAEf,MAAM,WAAW,CAAC,IAAI,EAAE,KAAK;IAE7B,IAAI,CAAC,SAAS;QACV,MAAM,SAAS,MAAM,IAAA,yPAAG,EAAc;QACtC,IAAI,QAAQ,MAAM;YACd,IAAI,CAAC,YAAY,GAAG,CAAC,MAAM;gBACvB,YAAY,GAAG,CAAC,KAAK,eAAe,KAAK;YAC7C;YACA,OAAO,OAAO,IAAI;QACtB;IACJ;IAEA,MAAM,WAAW,MAAM,IAAA,+PAAK,EAAC;IAC7B,MAAM,OAAO,MAAM,SAAS,IAAI;IAChC,MAAM,SAAS,MAAM,aAAa;IAClC,MAAM,UAAU,CAAC,KAAK,EAAE,KAAK,IAAI,CAAC,QAAQ,EAAE,QAAQ;IAEpD,IAAI,CAAC,SAAS;QACV,IAAA,yPAAG,EACC,UACA;YACI,MAAM;YACN,MAAM,SAAS,OAAO,CAAC,GAAG,CAAC,WAAW;YACtC,cAAc,SAAS,OAAO,CAAC,GAAG,CAAC,oBAAoB;QAC3D,GACA;YAAE,UAAU;QAAK,GACnB,KAAK,CAAC,KAAO;IACnB;IAEA,OAAO;AACX;AAEA,eAAe,eAAe,GAAW,EAAE,MAAmB;IAC1D,IAAI;QACA,MAAM,WAAW,MAAM,IAAA,+PAAK,EAAC,KAAK;YAAE,QAAQ;QAAO;QACnD,MAAM,OAAO,SAAS,OAAO,CAAC,GAAG,CAAC;QAClC,MAAM,eAAe,SAAS,OAAO,CAAC,GAAG,CAAC;QAE1C,IACI,AAAC,QAAQ,SAAS,OAAO,IAAI,IAC5B,gBAAgB,iBAAiB,OAAO,YAAY,EACvD;YACE,MAAM,eAAe,MAAM,IAAA,+PAAK,EAAC;YACjC,MAAM,OAAO,MAAM,aAAa,IAAI;YACpC,MAAM,SAAS,MAAM,aAAa;YAClC,MAAM,UAAU,CAAC,KAAK,EAAE,KAAK,IAAI,CAAC,QAAQ,EAAE,QAAQ;YAEpD,MAAM,IAAA,yPAAG,EACL,CAAC,IAAI,EAAE,KAAK,EACZ;gBACI,MAAM;gBACN,MAAM,aAAa,OAAO,CAAC,GAAG,CAAC,WAAW;gBAC1C,cACI,aAAa,OAAO,CAAC,GAAG,CAAC,oBAAoB;YACrD,GACA;gBAAE,UAAU;YAAK;QAEzB;IACJ,SAAU;QACN,YAAY,MAAM,CAAC;IACvB;AACJ;AAEA,SAAS,aAAa,IAAU;IAC5B,OAAO,IAAI,QAAQ,CAAC,SAAS;QACzB,MAAM,SAAS,IAAI;QACnB,OAAO,SAAS,GAAG;YACf,MAAM,SAAS,AAAC,OAAO,MAAM,CAAY,KAAK,CAAC,IAAI,CAAC,EAAE;YACtD,QAAQ;QACZ;QACA,OAAO,OAAO,GAAG;QACjB,OAAO,aAAa,CAAC;IACzB;AACJ"}},
    {"offset": {"line": 421, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/lib/firebase.ts"],"sourcesContent":["import { initializeApp } from 'firebase/app'\r\n\r\nexport const firebaseConfig = {\r\n    apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY || '',\r\n    authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN || '',\r\n    projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID || '',\r\n    storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET || '',\r\n    messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID || '',\r\n    appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID || ''\r\n}\r\n\r\nif (!firebaseConfig.projectId) {\r\n    throw new Error(\r\n        'Firebase projectId is missing. Please configure .env file with NEXT_PUBLIC_FIREBASE_PROJECT_ID'\r\n    )\r\n}\r\n\r\nexport const app = initializeApp(firebaseConfig)\r\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;;AAEO,MAAM,iBAAiB;IAC1B,QAAQ,6DAA4C;IACpD,YAAY,oEAAgD;IAC5D,WAAW,uDAA+C;IAC1D,eAAe,gEAAmD;IAClE,mBAAmB,sDAAwD;IAC3E,OAAO,mDAA2C;AACtD;AAEA,IAAI,CAAC,eAAe,SAAS,EAAE;IAC3B,MAAM,IAAI,MACN;AAER;AAEO,MAAM,MAAM,IAAA,gPAAa,EAAC"}},
    {"offset": {"line": 446, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/lib/storage.ts"],"sourcesContent":["import {\r\n    getStorage,\r\n    ref,\r\n    deleteObject,\r\n    uploadBytes,\r\n    getDownloadURL\r\n} from 'firebase/storage'\r\nimport { app } from './firebase'\r\n\r\nconst storage = getStorage(app)\r\n\r\n/**\r\n * Deletes a single image from Firebase Storage\r\n */\r\nexport async function deleteImage(url: string): Promise<void> {\r\n    try {\r\n        const imageRef = ref(storage, url)\r\n        await deleteObject(imageRef)\r\n    } catch (error) {\r\n        console.error('Failed to delete image:', error)\r\n        throw error\r\n    }\r\n}\r\n\r\n/**\r\n * Deletes multiple images from Firebase Storage\r\n */\r\nexport async function deleteImages(urls: string[]): Promise<void> {\r\n    await Promise.allSettled(urls.map((url) => deleteImage(url)))\r\n}\r\n\r\n/**\r\n * Deletes unused images by comparing current and initial image lists\r\n */\r\nexport async function deleteUnusedImages(\r\n    currentImages: string[],\r\n    initialImages: string[]\r\n): Promise<void> {\r\n    const unusedImages = currentImages.filter(\r\n        (img) => !initialImages.includes(img)\r\n    )\r\n    if (unusedImages.length > 0) {\r\n        await deleteImages(unusedImages)\r\n    }\r\n}\r\n\r\n/**\r\n * Uploads an image to Firebase Storage\r\n */\r\nexport async function uploadImage(file: File, path: string): Promise<string> {\r\n    const imageRef = ref(storage, path)\r\n    await uploadBytes(imageRef, file)\r\n    return getDownloadURL(imageRef)\r\n}\r\n\r\n/**\r\n * Uploads multiple images to Firebase Storage\r\n */\r\nexport async function uploadImages(\r\n    files: File[],\r\n    basePath: string\r\n): Promise<string[]> {\r\n    const uploadPromises = files.map((file, index) => {\r\n        const path = `${basePath}/${Date.now()}-${index}-${file.name}`\r\n        return uploadImage(file, path)\r\n    })\r\n    return Promise.all(uploadPromises)\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;AAAA;AAOA;;;AAEA,MAAM,UAAU,IAAA,ySAAU,EAAC,6HAAG;AAKvB,eAAe,YAAY,GAAW;IACzC,IAAI;QACA,MAAM,WAAW,IAAA,kSAAG,EAAC,SAAS;QAC9B,MAAM,IAAA,2SAAY,EAAC;IACvB,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,2BAA2B;QACzC,MAAM;IACV;AACJ;AAKO,eAAe,aAAa,IAAc;IAC7C,MAAM,QAAQ,UAAU,CAAC,KAAK,GAAG,CAAC,CAAC,MAAQ,YAAY;AAC3D;AAKO,eAAe,mBAClB,aAAuB,EACvB,aAAuB;IAEvB,MAAM,eAAe,cAAc,MAAM,CACrC,CAAC,MAAQ,CAAC,cAAc,QAAQ,CAAC;IAErC,IAAI,aAAa,MAAM,GAAG,GAAG;QACzB,MAAM,aAAa;IACvB;AACJ;AAKO,eAAe,YAAY,IAAU,EAAE,IAAY;IACtD,MAAM,WAAW,IAAA,kSAAG,EAAC,SAAS;IAC9B,MAAM,IAAA,0SAAW,EAAC,UAAU;IAC5B,OAAO,IAAA,6SAAc,EAAC;AAC1B;AAKO,eAAe,aAClB,KAAa,EACb,QAAgB;IAEhB,MAAM,iBAAiB,MAAM,GAAG,CAAC,CAAC,MAAM;QACpC,MAAM,OAAO,GAAG,SAAS,CAAC,EAAE,KAAK,GAAG,GAAG,CAAC,EAAE,MAAM,CAAC,EAAE,KAAK,IAAI,EAAE;QAC9D,OAAO,YAAY,MAAM;IAC7B;IACA,OAAO,QAAQ,GAAG,CAAC;AACvB"}},
    {"offset": {"line": 498, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/lib/firestore-utils.ts"],"sourcesContent":["import {\r\n    DocumentReference,\r\n    DocumentData,\r\n    UpdateData,\r\n    SetOptions,\r\n    Firestore,\r\n    waitForPendingWrites\r\n} from 'firebase/firestore'\r\n\r\nconst FIRESTORE_TIMEOUT = 1000 // 1 second\r\n\r\nfunction withTimeout<T>(promise: Promise<T>, timeoutMs: number): Promise<T> {\r\n    return Promise.race([\r\n        promise,\r\n        new Promise<T>((resolve) =>\r\n            setTimeout(() => resolve(undefined as T), timeoutMs)\r\n        )\r\n    ])\r\n}\r\n\r\nexport async function setDocWithTimeout(\r\n    reference: DocumentReference<DocumentData>,\r\n    data: DocumentData,\r\n    options?: SetOptions\r\n): Promise<void> {\r\n    const { setDoc } = await import('firebase/firestore')\r\n    const cleanData = Object.fromEntries(\r\n        Object.entries(data).filter(([, v]) => v !== undefined)\r\n    )\r\n    return withTimeout(\r\n        options\r\n            ? setDoc(reference, cleanData, options)\r\n            : setDoc(reference, cleanData),\r\n        FIRESTORE_TIMEOUT\r\n    )\r\n}\r\n\r\nexport async function updateDocWithTimeout(\r\n    reference: DocumentReference<DocumentData>,\r\n    data: UpdateData<DocumentData>\r\n): Promise<void> {\r\n    const { updateDoc } = await import('firebase/firestore')\r\n    const cleanData = Object.fromEntries(\r\n        Object.entries(data).filter(([, v]) => v !== undefined)\r\n    )\r\n    return withTimeout(updateDoc(reference, cleanData), FIRESTORE_TIMEOUT)\r\n}\r\n\r\nexport async function deleteDocWithTimeout(\r\n    reference: DocumentReference<DocumentData>\r\n): Promise<void> {\r\n    const { deleteDoc } = await import('firebase/firestore')\r\n    return withTimeout(deleteDoc(reference), FIRESTORE_TIMEOUT)\r\n}\r\n\r\nexport async function waitForPendingWritesWithTimeout(\r\n    firestore: Firestore,\r\n    timeoutMs: number = FIRESTORE_TIMEOUT\r\n): Promise<void> {\r\n    return withTimeout(waitForPendingWrites(firestore), timeoutMs)\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;;AASA,MAAM,oBAAoB,KAAK,WAAW;;AAE1C,SAAS,YAAe,OAAmB,EAAE,SAAiB;IAC1D,OAAO,QAAQ,IAAI,CAAC;QAChB;QACA,IAAI,QAAW,CAAC,UACZ,WAAW,IAAM,QAAQ,YAAiB;KAEjD;AACL;AAEO,eAAe,kBAClB,SAA0C,EAC1C,IAAkB,EAClB,OAAoB;IAEpB,MAAM,EAAE,MAAM,EAAE,GAAG;IACnB,MAAM,YAAY,OAAO,WAAW,CAChC,OAAO,OAAO,CAAC,MAAM,MAAM,CAAC,CAAC,GAAG,EAAE,GAAK,MAAM;IAEjD,OAAO,YACH,UACM,OAAO,WAAW,WAAW,WAC7B,OAAO,WAAW,YACxB;AAER;AAEO,eAAe,qBAClB,SAA0C,EAC1C,IAA8B;IAE9B,MAAM,EAAE,SAAS,EAAE,GAAG;IACtB,MAAM,YAAY,OAAO,WAAW,CAChC,OAAO,OAAO,CAAC,MAAM,MAAM,CAAC,CAAC,GAAG,EAAE,GAAK,MAAM;IAEjD,OAAO,YAAY,UAAU,WAAW,YAAY;AACxD;AAEO,eAAe,qBAClB,SAA0C;IAE1C,MAAM,EAAE,SAAS,EAAE,GAAG;IACtB,OAAO,YAAY,UAAU,YAAY;AAC7C;AAEO,eAAe,gCAClB,SAAoB,EACpB,YAAoB,iBAAiB;IAErC,OAAO,YAAY,IAAA,iSAAoB,EAAC,YAAY;AACxD"}},
    {"offset": {"line": 540, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/lib/data-table.ts"],"sourcesContent":["import type { Column } from '@tanstack/react-table'\nimport { dataTableConfig } from '@/config/data-table'\nimport type {\n    ExtendedColumnFilter,\n    FilterOperator,\n    FilterVariant\n} from '@/types/data-table'\n\nexport function getCommonPinningStyles<TData>({\n    column,\n    withBorder = false\n}: {\n    column: Column<TData>\n    withBorder?: boolean\n}): React.CSSProperties {\n    const isPinned = column.getIsPinned()\n    const isLastLeftPinnedColumn =\n        isPinned === 'left' && column.getIsLastColumn('left')\n    const isFirstRightPinnedColumn =\n        isPinned === 'right' && column.getIsFirstColumn('right')\n\n    return {\n        boxShadow: withBorder\n            ? isLastLeftPinnedColumn\n                ? '-4px 0 4px -4px var(--border) inset'\n                : isFirstRightPinnedColumn\n                  ? '4px 0 4px -4px var(--border) inset'\n                  : undefined\n            : undefined,\n        left: isPinned === 'left' ? `${column.getStart('left')}px` : undefined,\n        right:\n            isPinned === 'right' ? `${column.getAfter('right')}px` : undefined,\n        opacity: isPinned ? 0.97 : 1,\n        position: isPinned ? 'sticky' : 'relative',\n        background: isPinned ? 'var(--background)' : 'var(--background)',\n        width: column.getSize(),\n        zIndex: isPinned ? 1 : undefined\n    }\n}\n\nexport function getFilterOperators(filterVariant: FilterVariant) {\n    const operatorMap: Record<\n        FilterVariant,\n        { label: string; value: FilterOperator }[]\n    > = {\n        text: dataTableConfig.textOperators,\n        number: dataTableConfig.numericOperators,\n        range: dataTableConfig.numericOperators,\n        date: dataTableConfig.dateOperators,\n        dateRange: dataTableConfig.dateOperators,\n        boolean: dataTableConfig.booleanOperators,\n        select: dataTableConfig.selectOperators,\n        multiSelect: dataTableConfig.multiSelectOperators\n    }\n\n    return operatorMap[filterVariant] ?? dataTableConfig.textOperators\n}\n\nexport function getDefaultFilterOperator(filterVariant: FilterVariant) {\n    const operators = getFilterOperators(filterVariant)\n\n    return operators[0]?.value ?? (filterVariant === 'text' ? 'iLike' : 'eq')\n}\n\nexport function getValidFilters<TData>(\n    filters: ExtendedColumnFilter<TData>[]\n): ExtendedColumnFilter<TData>[] {\n    return filters.filter(\n        (filter) =>\n            filter.operator === 'isEmpty' ||\n            filter.operator === 'isNotEmpty' ||\n            (Array.isArray(filter.value)\n                ? filter.value.length > 0\n                : filter.value !== '' &&\n                  filter.value !== null &&\n                  filter.value !== undefined)\n    )\n}\n"],"names":[],"mappings":";;;;;;;;;;AACA;;AAOO,SAAS,uBAA8B,EAC1C,MAAM,EACN,aAAa,KAAK,EAIrB;IACG,MAAM,WAAW,OAAO,WAAW;IACnC,MAAM,yBACF,aAAa,UAAU,OAAO,eAAe,CAAC;IAClD,MAAM,2BACF,aAAa,WAAW,OAAO,gBAAgB,CAAC;IAEpD,OAAO;QACH,WAAW,aACL,yBACI,wCACA,2BACE,uCACA,YACN;QACN,MAAM,aAAa,SAAS,GAAG,OAAO,QAAQ,CAAC,QAAQ,EAAE,CAAC,GAAG;QAC7D,OACI,aAAa,UAAU,GAAG,OAAO,QAAQ,CAAC,SAAS,EAAE,CAAC,GAAG;QAC7D,SAAS,WAAW,OAAO;QAC3B,UAAU,WAAW,WAAW;QAChC,YAAY,WAAW,sBAAsB;QAC7C,OAAO,OAAO,OAAO;QACrB,QAAQ,WAAW,IAAI;IAC3B;AACJ;AAEO,SAAS,mBAAmB,aAA4B;IAC3D,MAAM,cAGF;QACA,MAAM,iJAAe,CAAC,aAAa;QACnC,QAAQ,iJAAe,CAAC,gBAAgB;QACxC,OAAO,iJAAe,CAAC,gBAAgB;QACvC,MAAM,iJAAe,CAAC,aAAa;QACnC,WAAW,iJAAe,CAAC,aAAa;QACxC,SAAS,iJAAe,CAAC,gBAAgB;QACzC,QAAQ,iJAAe,CAAC,eAAe;QACvC,aAAa,iJAAe,CAAC,oBAAoB;IACrD;IAEA,OAAO,WAAW,CAAC,cAAc,IAAI,iJAAe,CAAC,aAAa;AACtE;AAEO,SAAS,yBAAyB,aAA4B;IACjE,MAAM,YAAY,mBAAmB;IAErC,OAAO,SAAS,CAAC,EAAE,EAAE,SAAS,CAAC,kBAAkB,SAAS,UAAU,IAAI;AAC5E;AAEO,SAAS,gBACZ,OAAsC;IAEtC,OAAO,QAAQ,MAAM,CACjB,CAAC,SACG,OAAO,QAAQ,KAAK,aACpB,OAAO,QAAQ,KAAK,gBACpB,CAAC,MAAM,OAAO,CAAC,OAAO,KAAK,IACrB,OAAO,KAAK,CAAC,MAAM,GAAG,IACtB,OAAO,KAAK,KAAK,MACjB,OAAO,KAAK,KAAK,QACjB,OAAO,KAAK,KAAK,SAAS;AAE5C"}},
    {"offset": {"line": 591, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/lib/validations/shop.ts"],"sourcesContent":["import * as z from 'zod'\nimport { ShopStatus, ShopRole } from '@/types/shop'\n\nexport const shopSchema = z.object({\n    shopname: z\n        .string()\n        .min(1, 'Shop name is required')\n        .min(3, 'Shop name must be at least 3 characters')\n        .max(100, 'Shop name must be at most 100 characters')\n        .trim(),\n    logo_url: z.string().url('Invalid URL').optional().or(z.literal('')),\n    phone_number: z.string().optional(),\n    email: z.string().email('Invalid email').optional().or(z.literal('')),\n    shop_type: z.string().optional(),\n    shop_category: z.string().optional(),\n    shop_address: z.string().optional(),\n    signature: z.string().optional(),\n    status: z.nativeEnum(ShopStatus)\n})\n\nexport const shopMemberSchema = z.object({\n    role: z.nativeEnum(ShopRole),\n    permissions: z.array(\n        z.object({\n            resource: z.string(),\n            actions: z.array(z.enum(['read', 'write', 'delete']))\n        })\n    )\n})\n\nexport type ShopFormData = z.infer<typeof shopSchema>\nexport type ShopMemberFormData = z.infer<typeof shopMemberSchema>\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAEO,MAAM,aAAa,0MAAQ,CAAC;IAC/B,UAAU,0MACC,GACN,GAAG,CAAC,GAAG,yBACP,GAAG,CAAC,GAAG,2CACP,GAAG,CAAC,KAAK,4CACT,IAAI;IACT,UAAU,0MAAQ,GAAG,GAAG,CAAC,eAAe,QAAQ,GAAG,EAAE,CAAC,2MAAS,CAAC;IAChE,cAAc,0MAAQ,GAAG,QAAQ;IACjC,OAAO,0MAAQ,GAAG,KAAK,CAAC,iBAAiB,QAAQ,GAAG,EAAE,CAAC,2MAAS,CAAC;IACjE,WAAW,0MAAQ,GAAG,QAAQ;IAC9B,eAAe,0MAAQ,GAAG,QAAQ;IAClC,cAAc,0MAAQ,GAAG,QAAQ;IACjC,WAAW,0MAAQ,GAAG,QAAQ;IAC9B,QAAQ,8MAAY,CAAC,kIAAU;AACnC;AAEO,MAAM,mBAAmB,0MAAQ,CAAC;IACrC,MAAM,8MAAY,CAAC,gIAAQ;IAC3B,aAAa,yMAAO,CAChB,0MAAQ,CAAC;QACL,UAAU,0MAAQ;QAClB,SAAS,yMAAO,CAAC,wMAAM,CAAC;YAAC;YAAQ;YAAS;SAAS;IACvD;AAER"}},
    {"offset": {"line": 627, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/lib/validations/index.ts"],"sourcesContent":["export * from './shop'\n"],"names":[],"mappings":";AAAA"}},
    {"offset": {"line": 634, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/lib/desktop/app-menu.ts"],"sourcesContent":["import { Menu, MenuItem, Submenu } from '@tauri-apps/api/menu'\nimport { exit } from '@tauri-apps/plugin-process'\n\nexport async function setupAppMenu() {\n    const fileSubmenu = await Submenu.new({\n        text: 'File',\n        items: [\n            await MenuItem.new({\n                id: 'new-shop',\n                text: 'New Shop',\n                accelerator: 'CmdOrCtrl+N',\n                action: () => console.log('New Shop')\n            }),\n            await MenuItem.new({\n                id: 'settings',\n                text: 'Settings',\n                accelerator: 'CmdOrCtrl+,',\n                action: () => console.log('Settings')\n            }),\n            await MenuItem.new({\n                id: 'separator-1',\n                text: '---'\n            }),\n            await MenuItem.new({\n                id: 'quit',\n                text: 'Quit',\n                accelerator: 'CmdOrCtrl+Q',\n                action: () => exit()\n            })\n        ]\n    })\n\n    const editSubmenu = await Submenu.new({\n        text: 'Edit',\n        items: [\n            await MenuItem.new({\n                id: 'undo',\n                text: 'Undo',\n                accelerator: 'CmdOrCtrl+Z',\n                action: () => console.log('Undo')\n            }),\n            await MenuItem.new({\n                id: 'redo',\n                text: 'Redo',\n                accelerator: 'CmdOrCtrl+Shift+Z',\n                action: () => console.log('Redo')\n            })\n        ]\n    })\n\n    const helpSubmenu = await Submenu.new({\n        text: 'Help',\n        items: [\n            await MenuItem.new({\n                id: 'about',\n                text: 'About',\n                action: () => console.log('About')\n            }),\n            await MenuItem.new({\n                id: 'documentation',\n                text: 'Documentation',\n                action: () => console.log('Documentation')\n            })\n        ]\n    })\n\n    const menu = await Menu.new({\n        items: [fileSubmenu, editSubmenu, helpSubmenu]\n    })\n\n    await menu.setAsAppMenu()\n}\n"],"names":[],"mappings":";;;;AAAA;AAAA;AAAA;AAAA;AACA;;;AAEO,eAAe;IAClB,MAAM,cAAc,MAAM,uOAAO,CAAC,GAAG,CAAC;QAClC,MAAM;QACN,OAAO;YACH,MAAM,yOAAQ,CAAC,GAAG,CAAC;gBACf,IAAI;gBACJ,MAAM;gBACN,aAAa;gBACb,QAAQ,IAAM,QAAQ,GAAG,CAAC;YAC9B;YACA,MAAM,yOAAQ,CAAC,GAAG,CAAC;gBACf,IAAI;gBACJ,MAAM;gBACN,aAAa;gBACb,QAAQ,IAAM,QAAQ,GAAG,CAAC;YAC9B;YACA,MAAM,yOAAQ,CAAC,GAAG,CAAC;gBACf,IAAI;gBACJ,MAAM;YACV;YACA,MAAM,yOAAQ,CAAC,GAAG,CAAC;gBACf,IAAI;gBACJ,MAAM;gBACN,aAAa;gBACb,QAAQ,IAAM,IAAA,oQAAI;YACtB;SACH;IACL;IAEA,MAAM,cAAc,MAAM,uOAAO,CAAC,GAAG,CAAC;QAClC,MAAM;QACN,OAAO;YACH,MAAM,yOAAQ,CAAC,GAAG,CAAC;gBACf,IAAI;gBACJ,MAAM;gBACN,aAAa;gBACb,QAAQ,IAAM,QAAQ,GAAG,CAAC;YAC9B;YACA,MAAM,yOAAQ,CAAC,GAAG,CAAC;gBACf,IAAI;gBACJ,MAAM;gBACN,aAAa;gBACb,QAAQ,IAAM,QAAQ,GAAG,CAAC;YAC9B;SACH;IACL;IAEA,MAAM,cAAc,MAAM,uOAAO,CAAC,GAAG,CAAC;QAClC,MAAM;QACN,OAAO;YACH,MAAM,yOAAQ,CAAC,GAAG,CAAC;gBACf,IAAI;gBACJ,MAAM;gBACN,QAAQ,IAAM,QAAQ,GAAG,CAAC;YAC9B;YACA,MAAM,yOAAQ,CAAC,GAAG,CAAC;gBACf,IAAI;gBACJ,MAAM;gBACN,QAAQ,IAAM,QAAQ,GAAG,CAAC;YAC9B;SACH;IACL;IAEA,MAAM,OAAO,MAAM,iOAAI,CAAC,GAAG,CAAC;QACxB,OAAO;YAAC;YAAa;YAAa;SAAY;IAClD;IAEA,MAAM,KAAK,YAAY;AAC3B"}},
    {"offset": {"line": 718, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/lib/desktop/system-tray.ts"],"sourcesContent":["import { TrayIcon } from '@tauri-apps/api/tray'\nimport { Menu, MenuItem } from '@tauri-apps/api/menu'\nimport { defaultWindowIcon } from '@tauri-apps/api/app'\nimport { getCurrentWindow } from '@tauri-apps/api/window'\nimport { exit } from '@tauri-apps/plugin-process'\n\nconst TRAY_ID = 'shop-management-tray'\nlet trayInstance: TrayIcon | null = null\n\nexport async function setupSystemTray() {\n    // Remove all existing tray icons\n    try {\n        const existingTray = await TrayIcon.getById(TRAY_ID)\n        if (existingTray) {\n            await existingTray.close()\n        }\n    } catch {\n        // Tray doesn't exist, continue\n    }\n\n    if (trayInstance) {\n        try {\n            await trayInstance.close()\n        } catch {\n            // Already closed\n        }\n        trayInstance = null\n    }\n\n    const window = getCurrentWindow()\n    const icon = await defaultWindowIcon()\n\n    if (!icon) {\n        console.warn('No default icon available for system tray')\n        return\n    }\n\n    const trayMenu = await Menu.new({\n        items: [\n            await MenuItem.new({\n                id: 'show',\n                text: 'Show Window',\n                action: async () => {\n                    await window.show()\n                    await window.unminimize()\n                    await window.setFocus()\n                }\n            }),\n            await MenuItem.new({\n                id: 'hide',\n                text: 'Hide Window',\n                action: () => window.hide()\n            }),\n            await MenuItem.new({\n                id: 'separator-1',\n                text: '---------------------',\n                enabled: false\n            }),\n            await MenuItem.new({\n                id: 'quit',\n                text: 'Quit',\n                action: () => exit()\n            })\n        ]\n    })\n\n    trayInstance = await TrayIcon.new({\n        id: TRAY_ID,\n        icon,\n        menu: trayMenu,\n        tooltip: 'Shop Management System',\n        menuOnLeftClick: false,\n        action: async (event) => {\n            if (event.type === 'Click' && event.button === 'Left') {\n                const isVisible = await window.isVisible()\n                if (isVisible) {\n                    await window.hide()\n                } else {\n                    await window.show()\n                    await window.unminimize()\n                    await window.setFocus()\n                }\n            }\n        }\n    })\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;;;;;;AAEA,MAAM,UAAU;AAChB,IAAI,eAAgC;AAE7B,eAAe;IAClB,iCAAiC;IACjC,IAAI;QACA,MAAM,eAAe,MAAM,6NAAQ,CAAC,OAAO,CAAC;QAC5C,IAAI,cAAc;YACd,MAAM,aAAa,KAAK;QAC5B;IACJ,EAAE,OAAM;IACJ,+BAA+B;IACnC;IAEA,IAAI,cAAc;QACd,IAAI;YACA,MAAM,aAAa,KAAK;QAC5B,EAAE,OAAM;QACJ,iBAAiB;QACrB;QACA,eAAe;IACnB;IAEA,MAAM,SAAS,IAAA,uPAAgB;IAC/B,MAAM,OAAO,MAAM,IAAA,qOAAiB;IAEpC,IAAI,CAAC,MAAM;QACP,QAAQ,IAAI,CAAC;QACb;IACJ;IAEA,MAAM,WAAW,MAAM,iOAAI,CAAC,GAAG,CAAC;QAC5B,OAAO;YACH,MAAM,yOAAQ,CAAC,GAAG,CAAC;gBACf,IAAI;gBACJ,MAAM;gBACN,QAAQ;oBACJ,MAAM,OAAO,IAAI;oBACjB,MAAM,OAAO,UAAU;oBACvB,MAAM,OAAO,QAAQ;gBACzB;YACJ;YACA,MAAM,yOAAQ,CAAC,GAAG,CAAC;gBACf,IAAI;gBACJ,MAAM;gBACN,QAAQ,IAAM,OAAO,IAAI;YAC7B;YACA,MAAM,yOAAQ,CAAC,GAAG,CAAC;gBACf,IAAI;gBACJ,MAAM;gBACN,SAAS;YACb;YACA,MAAM,yOAAQ,CAAC,GAAG,CAAC;gBACf,IAAI;gBACJ,MAAM;gBACN,QAAQ,IAAM,IAAA,oQAAI;YACtB;SACH;IACL;IAEA,eAAe,MAAM,6NAAQ,CAAC,GAAG,CAAC;QAC9B,IAAI;QACJ;QACA,MAAM;QACN,SAAS;QACT,iBAAiB;QACjB,QAAQ,OAAO;YACX,IAAI,MAAM,IAAI,KAAK,WAAW,MAAM,MAAM,KAAK,QAAQ;gBACnD,MAAM,YAAY,MAAM,OAAO,SAAS;gBACxC,IAAI,WAAW;oBACX,MAAM,OAAO,IAAI;gBACrB,OAAO;oBACH,MAAM,OAAO,IAAI;oBACjB,MAAM,OAAO,UAAU;oBACvB,MAAM,OAAO,QAAQ;gBACzB;YACJ;QACJ;IACJ;AACJ"}},
    {"offset": {"line": 812, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/lib/desktop/window-behavior.ts"],"sourcesContent":["import { getCurrentWindow } from '@tauri-apps/api/window'\r\nimport {\r\n    restoreStateCurrent,\r\n    saveWindowState,\r\n    StateFlags\r\n} from '@tauri-apps/plugin-window-state'\r\n\r\nconst isProduction = process.env.NODE_ENV === 'production'\r\n\r\nexport async function setupWindowBehavior() {\r\n    const window = getCurrentWindow()\r\n\r\n    // Restore window state (production only)\r\n    if (isProduction) {\r\n        await restoreStateCurrent(StateFlags.ALL)\r\n    }\r\n\r\n    // Prevent window close, hide instead\r\n    await window.onCloseRequested(async (event) => {\r\n        event.preventDefault()\r\n\r\n        // Save window state (production only)\r\n        if (isProduction) {\r\n            await saveWindowState(StateFlags.ALL)\r\n        }\r\n\r\n        await window.hide()\r\n    })\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAMA,MAAM,eAAe,oDAAyB;AAEvC,eAAe;IAClB,MAAM,SAAS,IAAA,uPAAgB;IAE/B,yCAAyC;IACzC;;IAIA,qCAAqC;IACrC,MAAM,OAAO,gBAAgB,CAAC,OAAO;QACjC,MAAM,cAAc;QAEpB,sCAAsC;QACtC;;QAIA,MAAM,OAAO,IAAI;IACrB;AACJ"}},
    {"offset": {"line": 839, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/lib/desktop/index.ts"],"sourcesContent":["import { setupAppMenu } from './app-menu'\nimport { setupSystemTray } from './system-tray'\nimport { setupWindowBehavior } from './window-behavior'\n\nexport async function initializeDesktop() {\n    try {\n        await setupWindowBehavior()\n        // await setupAppMenu()\n        await setupSystemTray()\n        console.log('Desktop features initialized')\n    } catch (error) {\n        console.error('Failed to initialize desktop features:', error)\n    }\n}\n\nexport { setupAppMenu, setupSystemTray, setupWindowBehavior }\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEO,eAAe;IAClB,IAAI;QACA,MAAM,IAAA,kKAAmB;QACzB,uBAAuB;QACvB,MAAM,IAAA,0JAAe;QACrB,QAAQ,GAAG,CAAC;IAChB,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,0CAA0C;IAC5D;AACJ"}},
    {"offset": {"line": 864, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/lib/updater.ts"],"sourcesContent":["import { check } from '@tauri-apps/plugin-updater'\nimport { ask, message } from '@tauri-apps/plugin-dialog'\nimport { relaunch, exit } from '@tauri-apps/plugin-process'\n\nexport async function checkForAppUpdates(onUserClick: false) {\n    const update = await check()\n    if (!update?.available) {\n        console.log('No update available')\n    } else if (update?.available) {\n        console.log('Update available!', update.version, update.body)\n        const yes = await ask(\n            `Update to ${update.version} is available!\\n\\nRelease notes: ${update.body}`,\n            {\n                title: 'Update Available',\n                kind: 'info',\n                okLabel: 'Update',\n                cancelLabel: 'Cancel'\n            }\n        )\n        if (yes) {\n            await update.downloadAndInstall()\n            await relaunch()\n        } else {\n            await exit(0)\n        }\n    } else if (onUserClick) {\n        await message('You are on the latest version. Stay awesome!', {\n            title: 'No Update Available',\n            kind: 'info',\n            okLabel: 'OK'\n        })\n    }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEO,eAAe,mBAAmB,WAAkB;IACvD,MAAM,SAAS,MAAM,IAAA,qQAAK;IAC1B,IAAI,CAAC,QAAQ,WAAW;QACpB,QAAQ,GAAG,CAAC;IAChB,OAAO,IAAI,QAAQ,WAAW;QAC1B,QAAQ,GAAG,CAAC,qBAAqB,OAAO,OAAO,EAAE,OAAO,IAAI;QAC5D,MAAM,MAAM,MAAM,IAAA,iQAAG,EACjB,CAAC,UAAU,EAAE,OAAO,OAAO,CAAC,iCAAiC,EAAE,OAAO,IAAI,EAAE,EAC5E;YACI,OAAO;YACP,MAAM;YACN,SAAS;YACT,aAAa;QACjB;QAEJ,IAAI,KAAK;YACL,MAAM,OAAO,kBAAkB;YAC/B,MAAM,IAAA,wQAAQ;QAClB,OAAO;YACH,MAAM,IAAA,oQAAI,EAAC;QACf;IACJ,OAAO,IAAI,aAAa;QACpB,MAAM,IAAA,qQAAO,EAAC,gDAAgD;YAC1D,OAAO;YACP,MAAM;YACN,SAAS;QACb;IACJ;AACJ"}},
    {"offset": {"line": 904, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/lib/config.ts"],"sourcesContent":["import packageJson from '../../package.json';\r\n\r\nexport const APP_VERSION = packageJson.version;"],"names":[],"mappings":";;;;AAAA;;AAEO,MAAM,cAAc,0FAAW,CAAC,OAAO"}},
    {"offset": {"line": 915, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/types/shop.ts"],"sourcesContent":["export enum ShopRole {\n    OWNER = 'owner',\n    ADMIN = 'admin',\n    MANAGER = 'manager',\n    STAFF = 'staff',\n    VIEWER = 'viewer'\n}\n\nexport enum ShopStatus {\n    ACTIVE = 'active',\n    INACTIVE = 'inactive',\n    SUSPENDED = 'suspended'\n}\n\nexport interface ShopPermission {\n    resource: string\n    actions: ('read' | 'write' | 'delete')[]\n}\n\nexport interface Shop {\n    id: string\n    shopname: string\n    logo_url?: string\n    phone_number?: string\n    email?: string\n    shop_type?: string\n    shop_category?: string\n    shop_address?: string\n    signature?: string\n    status: ShopStatus\n    created_userId: string\n    createdAt: Date\n    updatedAt: Date\n}\n\nexport interface ShopMember {\n    id: string\n    shopId: string\n    userId: string\n    role: ShopRole\n    permissions: ShopPermission[]\n    invitedBy: string\n    joinedAt: Date\n    createdAt: Date\n    updatedAt: Date\n}\n\nexport interface ShopMemberWithUser extends ShopMember {\n    email?: string\n    displayName?: string\n    photoURL?: string\n}\n\nexport interface UserShopAccess {\n    shopId: string\n    shopName: string\n    role: ShopRole\n    permissions: ShopPermission[]\n    isOwner: boolean\n    logoUrl?: string\n    shopCategory?: string\n    shopAddress?: string\n}\n"],"names":[],"mappings":";;;;;;AAAO,IAAA,AAAK,kCAAA;;;;;;WAAA;;AAQL,IAAA,AAAK,oCAAA;;;;WAAA"}},
    {"offset": {"line": 939, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/stores/auth-store.ts"],"sourcesContent":["import { create } from 'zustand'\nimport { User } from '@/features/auth/types'\n\ntype LoginType = 'email' | 'phone'\n\ninterface AuthStore {\n    user: User | null\n    isAuthenticated: boolean\n    loading: boolean\n    error: string | null\n    lastLoginType: LoginType\n    setUser: (user: User | null) => void\n    setLoading: (loading: boolean) => void\n    setError: (error: string | null) => void\n    setLastLoginType: (type: LoginType) => void\n    reset: () => void\n}\n\nexport const useAuthStore = create<AuthStore>((set) => ({\n    user: null,\n    isAuthenticated: false,\n    loading: true,\n    error: null,\n    lastLoginType: 'phone',\n    setUser: (user) => set({ user, isAuthenticated: !!user, error: null }),\n    setLoading: (loading) => set({ loading }),\n    setError: (error) => set({ error }),\n    setLastLoginType: (type) => set({ lastLoginType: type }),\n    reset: () =>\n        set({ user: null, isAuthenticated: false, loading: false, error: null })\n}))\n"],"names":[],"mappings":";;;;AAAA;;AAkBO,MAAM,eAAe,IAAA,8PAAM,EAAY,CAAC,MAAQ,CAAC;QACpD,MAAM;QACN,iBAAiB;QACjB,SAAS;QACT,OAAO;QACP,eAAe;QACf,SAAS,CAAC,OAAS,IAAI;gBAAE;gBAAM,iBAAiB,CAAC,CAAC;gBAAM,OAAO;YAAK;QACpE,YAAY,CAAC,UAAY,IAAI;gBAAE;YAAQ;QACvC,UAAU,CAAC,QAAU,IAAI;gBAAE;YAAM;QACjC,kBAAkB,CAAC,OAAS,IAAI;gBAAE,eAAe;YAAK;QACtD,OAAO,IACH,IAAI;gBAAE,MAAM;gBAAM,iBAAiB;gBAAO,SAAS;gBAAO,OAAO;YAAK;IAC9E,CAAC"}},
    {"offset": {"line": 979, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/assets/logo/dark-logo.svg.mjs%20%28structured%20image%20object%20with%20data%20url%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 839, height: 1411, blurWidth: 0, blurHeight: 0};\n"],"names":[],"mappings":";;;;AAAA;;uCACe;IAAE,KAAA,0JAAG;IAAE,OAAO;IAAK,QAAQ;IAAM,WAAW;IAAG,YAAY;AAAC"}},
    {"offset": {"line": 999, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/assets/logo/light-logo.svg.mjs%20%28structured%20image%20object%20with%20data%20url%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 839, height: 1411, blurWidth: 0, blurHeight: 0};\n"],"names":[],"mappings":";;;;AAAA;;uCACe;IAAE,KAAA,2JAAG;IAAE,OAAO;IAAK,QAAQ;IAAM,WAAW;IAAG,YAAY;AAAC"}},
    {"offset": {"line": 1016, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/hooks/use-mobile.ts"],"sourcesContent":["import * as React from 'react'\r\n\r\nconst MOBILE_BREAKPOINT = 768\r\n\r\nexport function useIsMobile() {\r\n    const [isMobile, setIsMobile] = React.useState<boolean | undefined>(\r\n        undefined\r\n    )\r\n\r\n    React.useEffect(() => {\r\n        const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\r\n        const onChange = () => {\r\n            setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\r\n        }\r\n        mql.addEventListener('change', onChange)\r\n        setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\r\n        return () => mql.removeEventListener('change', onChange)\r\n    }, [])\r\n\r\n    return !!isMobile\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,oBAAoB;AAEnB,SAAS;IACZ,MAAM,CAAC,UAAU,YAAY,GAAG,gUAAc,CAC1C;IAGJ,iUAAe,CAAC;QACZ,MAAM,MAAM,OAAO,UAAU,CAAC,CAAC,YAAY,EAAE,oBAAoB,EAAE,GAAG,CAAC;QACvE,MAAM,WAAW;YACb,YAAY,OAAO,UAAU,GAAG;QACpC;QACA,IAAI,gBAAgB,CAAC,UAAU;QAC/B,YAAY,OAAO,UAAU,GAAG;QAChC,OAAO,IAAM,IAAI,mBAAmB,CAAC,UAAU;IACnD,GAAG,EAAE;IAEL,OAAO,CAAC,CAAC;AACb"}},
    {"offset": {"line": 1040, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/hooks/use-safe-area-insets.ts"],"sourcesContent":["import { useEffect, useState } from 'react'\nimport { getInsets } from 'tauri-plugin-safe-area-insets'\nimport { getPlatform } from '@/utils/platform-detection'\n\ninterface SafeAreaInsets {\n    top: number\n    right: number\n    bottom: number\n    left: number\n}\n\nexport function useSafeAreaInsets() {\n    const { isMobile } = getPlatform()\n    const [insets, setInsets] = useState<SafeAreaInsets>({\n        top: 0,\n        right: 0,\n        bottom: 0,\n        left: 0\n    })\n\n    useEffect(() => {\n        if (!isMobile) return\n\n        const fetchInsets = async () => {\n            try {\n                const result = await getInsets()\n                console.log({ result })\n\n                setInsets({\n                    top: result.top,\n                    right: result.right,\n                    bottom: result.bottom,\n                    left: result.left\n                })\n\n                // Set CSS variables\n                document.documentElement.style.setProperty(\n                    '--sat',\n                    `${result.top}px`\n                )\n                document.documentElement.style.setProperty(\n                    '--sar',\n                    `${result.right}px`\n                )\n                document.documentElement.style.setProperty(\n                    '--sab',\n                    `${result.bottom}px`\n                )\n                document.documentElement.style.setProperty(\n                    '--sal',\n                    `${result.left}px`\n                )\n            } catch (error) {\n                console.error('Failed to get safe area insets:', error)\n            }\n        }\n\n        fetchInsets()\n        window.addEventListener('resize', fetchInsets)\n\n        return () => window.removeEventListener('resize', fetchInsets)\n    }, [isMobile])\n\n    return { insets, isMobile }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AASO,SAAS;IACZ,MAAM,EAAE,QAAQ,EAAE,GAAG,IAAA,oJAAW;IAChC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,gUAAQ,EAAiB;QACjD,KAAK;QACL,OAAO;QACP,QAAQ;QACR,MAAM;IACV;IAEA,IAAA,iUAAS,EAAC;QACN,IAAI,CAAC,UAAU;QAEf,MAAM,cAAc;YAChB,IAAI;gBACA,MAAM,SAAS,MAAM,IAAA,mRAAS;gBAC9B,QAAQ,GAAG,CAAC;oBAAE;gBAAO;gBAErB,UAAU;oBACN,KAAK,OAAO,GAAG;oBACf,OAAO,OAAO,KAAK;oBACnB,QAAQ,OAAO,MAAM;oBACrB,MAAM,OAAO,IAAI;gBACrB;gBAEA,oBAAoB;gBACpB,SAAS,eAAe,CAAC,KAAK,CAAC,WAAW,CACtC,SACA,GAAG,OAAO,GAAG,CAAC,EAAE,CAAC;gBAErB,SAAS,eAAe,CAAC,KAAK,CAAC,WAAW,CACtC,SACA,GAAG,OAAO,KAAK,CAAC,EAAE,CAAC;gBAEvB,SAAS,eAAe,CAAC,KAAK,CAAC,WAAW,CACtC,SACA,GAAG,OAAO,MAAM,CAAC,EAAE,CAAC;gBAExB,SAAS,eAAe,CAAC,KAAK,CAAC,WAAW,CACtC,SACA,GAAG,OAAO,IAAI,CAAC,EAAE,CAAC;YAE1B,EAAE,OAAO,OAAO;gBACZ,QAAQ,KAAK,CAAC,mCAAmC;YACrD;QACJ;QAEA;QACA,OAAO,gBAAgB,CAAC,UAAU;QAElC,OAAO,IAAM,OAAO,mBAAmB,CAAC,UAAU;IACtD,GAAG;QAAC;KAAS;IAEb,OAAO;QAAE;QAAQ;IAAS;AAC9B"}},
    {"offset": {"line": 1096, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/config/data-table.ts"],"sourcesContent":["export type DataTableConfig = typeof dataTableConfig\n\nexport const dataTableConfig = {\n    textOperators: [\n        { label: 'Contains', value: 'iLike' as const },\n        { label: 'Does not contain', value: 'notILike' as const },\n        { label: 'Is', value: 'eq' as const },\n        { label: 'Is not', value: 'ne' as const },\n        { label: 'Is empty', value: 'isEmpty' as const },\n        { label: 'Is not empty', value: 'isNotEmpty' as const }\n    ],\n    numericOperators: [\n        { label: 'Is', value: 'eq' as const },\n        { label: 'Is not', value: 'ne' as const },\n        { label: 'Is less than', value: 'lt' as const },\n        { label: 'Is less than or equal to', value: 'lte' as const },\n        { label: 'Is greater than', value: 'gt' as const },\n        { label: 'Is greater than or equal to', value: 'gte' as const },\n        { label: 'Is between', value: 'isBetween' as const },\n        { label: 'Is empty', value: 'isEmpty' as const },\n        { label: 'Is not empty', value: 'isNotEmpty' as const }\n    ],\n    dateOperators: [\n        { label: 'Is', value: 'eq' as const },\n        { label: 'Is not', value: 'ne' as const },\n        { label: 'Is before', value: 'lt' as const },\n        { label: 'Is after', value: 'gt' as const },\n        { label: 'Is on or before', value: 'lte' as const },\n        { label: 'Is on or after', value: 'gte' as const },\n        { label: 'Is between', value: 'isBetween' as const },\n        { label: 'Is relative to today', value: 'isRelativeToToday' as const },\n        { label: 'Is empty', value: 'isEmpty' as const },\n        { label: 'Is not empty', value: 'isNotEmpty' as const }\n    ],\n    selectOperators: [\n        { label: 'Is', value: 'eq' as const },\n        { label: 'Is not', value: 'ne' as const },\n        { label: 'Is empty', value: 'isEmpty' as const },\n        { label: 'Is not empty', value: 'isNotEmpty' as const }\n    ],\n    multiSelectOperators: [\n        { label: 'Has any of', value: 'inArray' as const },\n        { label: 'Has none of', value: 'notInArray' as const },\n        { label: 'Is empty', value: 'isEmpty' as const },\n        { label: 'Is not empty', value: 'isNotEmpty' as const }\n    ],\n    booleanOperators: [\n        { label: 'Is', value: 'eq' as const },\n        { label: 'Is not', value: 'ne' as const }\n    ],\n    sortOrders: [\n        { label: 'Asc', value: 'asc' as const },\n        { label: 'Desc', value: 'desc' as const }\n    ],\n    filterVariants: [\n        'text',\n        'number',\n        'range',\n        'date',\n        'dateRange',\n        'boolean',\n        'select',\n        'multiSelect'\n    ] as const,\n    operators: [\n        'iLike',\n        'notILike',\n        'eq',\n        'ne',\n        'inArray',\n        'notInArray',\n        'isEmpty',\n        'isNotEmpty',\n        'lt',\n        'lte',\n        'gt',\n        'gte',\n        'isBetween',\n        'isRelativeToToday'\n    ] as const,\n    joinOperators: ['and', 'or'] as const\n}\n"],"names":[],"mappings":";;;;AAEO,MAAM,kBAAkB;IAC3B,eAAe;QACX;YAAE,OAAO;YAAY,OAAO;QAAiB;QAC7C;YAAE,OAAO;YAAoB,OAAO;QAAoB;QACxD;YAAE,OAAO;YAAM,OAAO;QAAc;QACpC;YAAE,OAAO;YAAU,OAAO;QAAc;QACxC;YAAE,OAAO;YAAY,OAAO;QAAmB;QAC/C;YAAE,OAAO;YAAgB,OAAO;QAAsB;KACzD;IACD,kBAAkB;QACd;YAAE,OAAO;YAAM,OAAO;QAAc;QACpC;YAAE,OAAO;YAAU,OAAO;QAAc;QACxC;YAAE,OAAO;YAAgB,OAAO;QAAc;QAC9C;YAAE,OAAO;YAA4B,OAAO;QAAe;QAC3D;YAAE,OAAO;YAAmB,OAAO;QAAc;QACjD;YAAE,OAAO;YAA+B,OAAO;QAAe;QAC9D;YAAE,OAAO;YAAc,OAAO;QAAqB;QACnD;YAAE,OAAO;YAAY,OAAO;QAAmB;QAC/C;YAAE,OAAO;YAAgB,OAAO;QAAsB;KACzD;IACD,eAAe;QACX;YAAE,OAAO;YAAM,OAAO;QAAc;QACpC;YAAE,OAAO;YAAU,OAAO;QAAc;QACxC;YAAE,OAAO;YAAa,OAAO;QAAc;QAC3C;YAAE,OAAO;YAAY,OAAO;QAAc;QAC1C;YAAE,OAAO;YAAmB,OAAO;QAAe;QAClD;YAAE,OAAO;YAAkB,OAAO;QAAe;QACjD;YAAE,OAAO;YAAc,OAAO;QAAqB;QACnD;YAAE,OAAO;YAAwB,OAAO;QAA6B;QACrE;YAAE,OAAO;YAAY,OAAO;QAAmB;QAC/C;YAAE,OAAO;YAAgB,OAAO;QAAsB;KACzD;IACD,iBAAiB;QACb;YAAE,OAAO;YAAM,OAAO;QAAc;QACpC;YAAE,OAAO;YAAU,OAAO;QAAc;QACxC;YAAE,OAAO;YAAY,OAAO;QAAmB;QAC/C;YAAE,OAAO;YAAgB,OAAO;QAAsB;KACzD;IACD,sBAAsB;QAClB;YAAE,OAAO;YAAc,OAAO;QAAmB;QACjD;YAAE,OAAO;YAAe,OAAO;QAAsB;QACrD;YAAE,OAAO;YAAY,OAAO;QAAmB;QAC/C;YAAE,OAAO;YAAgB,OAAO;QAAsB;KACzD;IACD,kBAAkB;QACd;YAAE,OAAO;YAAM,OAAO;QAAc;QACpC;YAAE,OAAO;YAAU,OAAO;QAAc;KAC3C;IACD,YAAY;QACR;YAAE,OAAO;YAAO,OAAO;QAAe;QACtC;YAAE,OAAO;YAAQ,OAAO;QAAgB;KAC3C;IACD,gBAAgB;QACZ;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACH;IACD,WAAW;QACP;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;QACA;KACH;IACD,eAAe;QAAC;QAAO;KAAK;AAChC"}},
    {"offset": {"line": 1298, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/config/units.ts"],"sourcesContent":["export const UNITS = [\n    { id: 'none', fullName: 'None', shortName: '' },\n    { id: 'bags', fullName: 'BAGS', shortName: 'Bag' },\n    { id: 'bottles', fullName: 'BOTTLES', shortName: 'Btl' },\n    { id: 'box', fullName: 'BOX', shortName: 'Box' },\n    { id: 'bundles', fullName: 'BUNDLES', shortName: 'Bdl' },\n    { id: 'cans', fullName: 'CANS', shortName: 'Can' },\n    { id: 'cartons', fullName: 'CARTONS', shortName: 'Ctn' },\n    { id: 'dozens', fullName: 'DOZENS', shortName: 'Dzn' },\n    { id: 'grammes', fullName: 'GRAMMES', shortName: 'Gm' },\n    { id: 'kilograms', fullName: 'KILOGRAMS', shortName: 'Kg' },\n    { id: 'litre', fullName: 'LITRE', shortName: 'Ltr' },\n    { id: 'meters', fullName: 'METERS', shortName: 'Mtr' },\n    { id: 'mililitre', fullName: 'MILILITRE', shortName: 'Ml' },\n    { id: 'numbers', fullName: 'NUMBERS', shortName: 'Nos' },\n    { id: 'packs', fullName: 'PACKS', shortName: 'Pac' },\n    { id: 'pairs', fullName: 'PAIRS', shortName: 'Prs' },\n    { id: 'pieces', fullName: 'PIECES', shortName: 'Pcs' },\n    { id: 'quintal', fullName: 'QUINTAL', shortName: 'Qtl' },\n    { id: 'rolls', fullName: 'ROLLS', shortName: 'Rol' },\n    { id: 'square-feet', fullName: 'SQUARE FEET', shortName: 'Sqf' },\n    { id: 'square-meters', fullName: 'SQUARE METERS', shortName: 'Sqm' },\n    { id: 'tablets', fullName: 'TABLETS', shortName: 'Tbs' }\n] as const\n\nexport type UnitId = (typeof UNITS)[number]['id']\n"],"names":[],"mappings":";;;;AAAO,MAAM,QAAQ;IACjB;QAAE,IAAI;QAAQ,UAAU;QAAQ,WAAW;IAAG;IAC9C;QAAE,IAAI;QAAQ,UAAU;QAAQ,WAAW;IAAM;IACjD;QAAE,IAAI;QAAW,UAAU;QAAW,WAAW;IAAM;IACvD;QAAE,IAAI;QAAO,UAAU;QAAO,WAAW;IAAM;IAC/C;QAAE,IAAI;QAAW,UAAU;QAAW,WAAW;IAAM;IACvD;QAAE,IAAI;QAAQ,UAAU;QAAQ,WAAW;IAAM;IACjD;QAAE,IAAI;QAAW,UAAU;QAAW,WAAW;IAAM;IACvD;QAAE,IAAI;QAAU,UAAU;QAAU,WAAW;IAAM;IACrD;QAAE,IAAI;QAAW,UAAU;QAAW,WAAW;IAAK;IACtD;QAAE,IAAI;QAAa,UAAU;QAAa,WAAW;IAAK;IAC1D;QAAE,IAAI;QAAS,UAAU;QAAS,WAAW;IAAM;IACnD;QAAE,IAAI;QAAU,UAAU;QAAU,WAAW;IAAM;IACrD;QAAE,IAAI;QAAa,UAAU;QAAa,WAAW;IAAK;IAC1D;QAAE,IAAI;QAAW,UAAU;QAAW,WAAW;IAAM;IACvD;QAAE,IAAI;QAAS,UAAU;QAAS,WAAW;IAAM;IACnD;QAAE,IAAI;QAAS,UAAU;QAAS,WAAW;IAAM;IACnD;QAAE,IAAI;QAAU,UAAU;QAAU,WAAW;IAAM;IACrD;QAAE,IAAI;QAAW,UAAU;QAAW,WAAW;IAAM;IACvD;QAAE,IAAI;QAAS,UAAU;QAAS,WAAW;IAAM;IACnD;QAAE,IAAI;QAAe,UAAU;QAAe,WAAW;IAAM;IAC/D;QAAE,IAAI;QAAiB,UAAU;QAAiB,WAAW;IAAM;IACnE;QAAE,IAAI;QAAW,UAAU;QAAW,WAAW;IAAM;CAC1D"}},
    {"offset": {"line": 1418, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/config/sidebar-config.tsx"],"sourcesContent":["import {\n    IconBellRinging,\n    IconBuildingStore,\n    IconChartBar,\n    IconChartLine,\n    IconCoin,\n    IconCreditCard,\n    IconFileInvoice,\n    IconHome,\n    IconKey,\n    IconPackage,\n    IconPlus,\n    IconReceipt,\n    IconReportMoney,\n    IconRotateClockwise2,\n    IconSettings,\n    IconShoppingBag,\n    IconShoppingCart,\n    IconTrendingDown,\n    IconTrendingUp,\n    IconUser,\n    IconUsers,\n    IconWallet,\n    IconWebhook\n} from '@tabler/icons-react'\nimport {\n    ArrowDownToLine,\n    ArrowUpFromLine,\n    BadgeDollarSign,\n    FileText,\n    Smartphone,\n    TrendingUp,\n    Undo2\n} from 'lucide-react'\nimport type { SidebarItem } from '@/components/sidebar/types'\nimport { getSecurityCount } from '@/components/sidebar/badge-helpers'\n\nexport const sidebarItems: SidebarItem[] = [\n    {\n        id: 'home',\n        label: 'Home',\n        icon: IconHome,\n        route: '/'\n    },\n    {\n        id: 'parties',\n        label: 'Parties',\n        icon: IconUsers,\n        route: '/parties',\n        action: {\n            icon: IconPlus,\n            onClick: () => console.log('Add party'),\n            label: 'Add Party'\n        }\n    },\n    {\n        id: 'items',\n        label: 'Items',\n        icon: IconPackage,\n        route: '/items',\n        action: {\n            icon: IconPlus,\n            onClick: () => console.log('Add item'),\n            label: 'Add Item'\n        }\n    },\n    {\n        id: 'sales',\n        label: 'Sales',\n        icon: IconTrendingUp,\n        subItems: [\n            {\n                id: 'sales-list',\n                label: 'All Sales',\n                icon: IconFileInvoice,\n                route: '/sales'\n            },\n            {\n                id: 'add-sale',\n                label: 'New Sale',\n                icon: IconPlus,\n                route: '/sales/create'\n            },\n            {\n                id: 'sale-return',\n                label: 'Sale Returns',\n                icon: Undo2,\n                route: '/sales/return'\n            }\n        ]\n    },\n    {\n        id: 'purchases',\n        label: 'Purchases',\n        icon: IconShoppingCart,\n        subItems: [\n            {\n                id: 'purchase-list',\n                label: 'All Purchases',\n                icon: IconReceipt,\n                route: '/purchase'\n            },\n            {\n                id: 'add-purchase',\n                label: 'New Purchase',\n                icon: IconPlus,\n                route: '/purchase/add'\n            },\n            {\n                id: 'purchase-return',\n                label: 'Purchase Returns',\n                icon: IconRotateClockwise2,\n                route: '/purchase/return'\n            }\n        ]\n    },\n    {\n        id: 'payments',\n        label: 'Payments',\n        icon: IconWallet,\n        subItems: [\n            {\n                id: 'payment-in',\n                label: 'Payment In',\n                icon: ArrowDownToLine,\n                route: '/payment/in'\n            },\n            {\n                id: 'payment-out',\n                label: 'Payment Out',\n                icon: ArrowUpFromLine,\n                route: '/payment/out'\n            }\n        ]\n    },\n    {\n        id: 'expenses',\n        label: 'Expenses',\n        icon: IconTrendingDown,\n        route: '/expenses',\n        action: {\n            icon: IconPlus,\n            onClick: () => console.log('Add expense'),\n            label: 'Add Expense'\n        }\n    },\n    {\n        id: 'mobile-banking',\n        label: 'Mobile Banking',\n        icon: Smartphone,\n        subItems: [\n            {\n                id: 'bkash',\n                label: 'bKash',\n                icon: IconCoin,\n                route: '/mobile-banking/bkash'\n            },\n            {\n                id: 'nagad',\n                label: 'Nagad',\n                icon: IconCoin,\n                route: '/mobile-banking/nagad'\n            },\n            {\n                id: 'rocket',\n                label: 'Rocket',\n                icon: IconCoin,\n                route: '/mobile-banking/rocket'\n            }\n        ]\n    },\n    {\n        id: 'reports',\n        label: 'Reports',\n        icon: IconChartBar,\n        badge: getSecurityCount,\n        subItems: [\n            {\n                id: 'sales-report',\n                label: 'Sales Report',\n                icon: TrendingUp,\n                route: '/reports/sales'\n            },\n            {\n                id: 'purchase-report',\n                label: 'Purchase Report',\n                icon: IconShoppingBag,\n                route: '/reports/purchase'\n            },\n            {\n                id: 'profit-loss',\n                label: 'Profit & Loss',\n                icon: IconReportMoney,\n                route: '/reports/profit-loss'\n            },\n            {\n                id: 'inventory-report',\n                label: 'Inventory Report',\n                icon: FileText,\n                route: '/reports/inventory'\n            },\n            {\n                id: 'party-statement',\n                label: 'Party Statement',\n                icon: BadgeDollarSign,\n                route: '/reports/party-statement'\n            },\n            {\n                id: 'cash-flow',\n                label: 'Cash Flow',\n                icon: IconChartLine,\n                route: '/reports/cash-flow'\n            }\n        ]\n    },\n    {\n        id: 'settings',\n        label: 'Settings',\n        icon: IconSettings,\n        subItems: [\n            {\n                id: 'shop-settings',\n                label: 'Shop Settings',\n                icon: IconBuildingStore,\n                route: '/settings/shop'\n            },\n            {\n                id: 'profile',\n                label: 'Profile',\n                icon: IconUser,\n                route: '/settings/profile'\n            },\n            {\n                id: 'billing',\n                label: 'Billing',\n                icon: IconCreditCard,\n                route: '/settings/billing'\n            },\n            {\n                id: 'notifications',\n                label: 'Notifications',\n                icon: IconBellRinging,\n                route: '/settings/notifications'\n            },\n            {\n                id: 'webhooks',\n                label: 'Webhooks',\n                icon: IconWebhook,\n                route: '/settings/webhooks'\n            },\n            {\n                id: 'api-keys',\n                label: 'API Keys',\n                icon: IconKey,\n                route: '/settings/api-keys'\n            }\n        ]\n    }\n]\n"],"names":[],"mappings":";;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAyBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAUA;;;;AAEO,MAAM,eAA8B;IACvC;QACI,IAAI;QACJ,OAAO;QACP,MAAM,gUAAQ;QACd,OAAO;IACX;IACA;QACI,IAAI;QACJ,OAAO;QACP,MAAM,mUAAS;QACf,OAAO;QACP,QAAQ;YACJ,MAAM,gUAAQ;YACd,SAAS,IAAM,QAAQ,GAAG,CAAC;YAC3B,OAAO;QACX;IACJ;IACA;QACI,IAAI;QACJ,OAAO;QACP,MAAM,yUAAW;QACjB,OAAO;QACP,QAAQ;YACJ,MAAM,gUAAQ;YACd,SAAS,IAAM,QAAQ,GAAG,CAAC;YAC3B,OAAO;QACX;IACJ;IACA;QACI,IAAI;QACJ,OAAO;QACP,MAAM,kVAAc;QACpB,UAAU;YACN;gBACI,IAAI;gBACJ,OAAO;gBACP,MAAM,qVAAe;gBACrB,OAAO;YACX;YACA;gBACI,IAAI;gBACJ,OAAO;gBACP,MAAM,gUAAQ;gBACd,OAAO;YACX;YACA;gBACI,IAAI;gBACJ,OAAO;gBACP,MAAM,qSAAK;gBACX,OAAO;YACX;SACH;IACL;IACA;QACI,IAAI;QACJ,OAAO;QACP,MAAM,wVAAgB;QACtB,UAAU;YACN;gBACI,IAAI;gBACJ,OAAO;gBACP,MAAM,yUAAW;gBACjB,OAAO;YACX;YACA;gBACI,IAAI;gBACJ,OAAO;gBACP,MAAM,gUAAQ;gBACd,OAAO;YACX;YACA;gBACI,IAAI;gBACJ,OAAO;gBACP,MAAM,oWAAoB;gBAC1B,OAAO;YACX;SACH;IACL;IACA;QACI,IAAI;QACJ,OAAO;QACP,MAAM,sUAAU;QAChB,UAAU;YACN;gBACI,IAAI;gBACJ,OAAO;gBACP,MAAM,2UAAe;gBACrB,OAAO;YACX;YACA;gBACI,IAAI;gBACJ,OAAO;gBACP,MAAM,2UAAe;gBACrB,OAAO;YACX;SACH;IACL;IACA;QACI,IAAI;QACJ,OAAO;QACP,MAAM,wVAAgB;QACtB,OAAO;QACP,QAAQ;YACJ,MAAM,gUAAQ;YACd,SAAS,IAAM,QAAQ,GAAG,CAAC;YAC3B,OAAO;QACX;IACJ;IACA;QACI,IAAI;QACJ,OAAO;QACP,MAAM,gTAAU;QAChB,UAAU;YACN;gBACI,IAAI;gBACJ,OAAO;gBACP,MAAM,gUAAQ;gBACd,OAAO;YACX;YACA;gBACI,IAAI;gBACJ,OAAO;gBACP,MAAM,gUAAQ;gBACd,OAAO;YACX;YACA;gBACI,IAAI;gBACJ,OAAO;gBACP,MAAM,gUAAQ;gBACd,OAAO;YACX;SACH;IACL;IACA;QACI,IAAI;QACJ,OAAO;QACP,MAAM,4UAAY;QAClB,OAAO,oKAAgB;QACvB,UAAU;YACN;gBACI,IAAI;gBACJ,OAAO;gBACP,MAAM,oTAAU;gBAChB,OAAO;YACX;YACA;gBACI,IAAI;gBACJ,OAAO;gBACP,MAAM,qVAAe;gBACrB,OAAO;YACX;YACA;gBACI,IAAI;gBACJ,OAAO;gBACP,MAAM,qVAAe;gBACrB,OAAO;YACX;YACA;gBACI,IAAI;gBACJ,OAAO;gBACP,MAAM,8SAAQ;gBACd,OAAO;YACX;YACA;gBACI,IAAI;gBACJ,OAAO;gBACP,MAAM,uUAAe;gBACrB,OAAO;YACX;YACA;gBACI,IAAI;gBACJ,OAAO;gBACP,MAAM,+UAAa;gBACnB,OAAO;YACX;SACH;IACL;IACA;QACI,IAAI;QACJ,OAAO;QACP,MAAM,4UAAY;QAClB,UAAU;YACN;gBACI,IAAI;gBACJ,OAAO;gBACP,MAAM,2VAAiB;gBACvB,OAAO;YACX;YACA;gBACI,IAAI;gBACJ,OAAO;gBACP,MAAM,gUAAQ;gBACd,OAAO;YACX;YACA;gBACI,IAAI;gBACJ,OAAO;gBACP,MAAM,kVAAc;gBACpB,OAAO;YACX;YACA;gBACI,IAAI;gBACJ,OAAO;gBACP,MAAM,qVAAe;gBACrB,OAAO;YACX;YACA;gBACI,IAAI;gBACJ,OAAO;gBACP,MAAM,yUAAW;gBACjB,OAAO;YACX;YACA;gBACI,IAAI;gBACJ,OAAO;gBACP,MAAM,6TAAO;gBACb,OAAO;YACX;SACH;IACL;CACH"}},
    {"offset": {"line": 1682, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/config/quick-actions.ts"],"sourcesContent":["import {\n    FileText,\n    ArrowDownLeft,\n    RotateCcw,\n    ClipboardList,\n    FileCheck,\n    FilePlus,\n    Truck,\n    ShoppingCart,\n    ArrowUpRight,\n    Package,\n    Receipt,\n    ArrowLeftRight,\n    ShoppingBag\n} from 'lucide-react'\nimport type { LucideIcon } from 'lucide-react'\n\nexport interface QuickActionItem {\n    icon: LucideIcon\n    label: string\n    href: string\n}\n\nexport interface QuickActionGroup {\n    title: string\n    items: QuickActionItem[]\n}\n\nexport const QUICK_ACTIONS: QuickActionGroup[] = [\n    {\n        title: 'Sale Transactions',\n        items: [\n            { icon: FileText, label: 'Sale Invoice', href: '/sale-invoice' },\n            { icon: ArrowDownLeft, label: 'Payment-In', href: '/payment-in' },\n            { icon: RotateCcw, label: 'Credit Note', href: '/credit-note' },\n            { icon: ClipboardList, label: 'Sale Order', href: '/sale-order' },\n            { icon: FileCheck, label: 'Estimate', href: '/estimate' },\n            {\n                icon: FilePlus,\n                label: 'Proforma Invoice',\n                href: '/proforma-invoice'\n            },\n            {\n                icon: Truck,\n                label: 'Delivery Challan',\n                href: '/delivery-challan'\n            }\n        ]\n    },\n    {\n        title: 'Purchase Transactions',\n        items: [\n            { icon: ShoppingCart, label: 'Purchase', href: '/purchase' },\n            { icon: ArrowUpRight, label: 'Payment-Out', href: '/payment-out' },\n            { icon: RotateCcw, label: 'Debit Note', href: '/debit-note' },\n            {\n                icon: Package,\n                label: 'Purchase Order',\n                href: '/purchase-order'\n            }\n        ]\n    },\n    {\n        title: 'Other Transactions',\n        items: [\n            { icon: Receipt, label: 'Expenses', href: '/expenses' },\n            {\n                icon: ArrowLeftRight,\n                label: 'Party Transfer',\n                href: '/party-transfer'\n            }\n        ]\n    }\n]\n\nexport const DEFAULT_BOTTOM_ACTIONS: QuickActionItem[] = [\n    { icon: ShoppingCart, label: 'Purchase', href: '/purchase' },\n    { icon: ShoppingBag, label: 'Sale', href: '/sale-invoice' }\n]\n"],"names":[],"mappings":";;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AA4BO,MAAM,gBAAoC;IAC7C;QACI,OAAO;QACP,OAAO;YACH;gBAAE,MAAM,8SAAQ;gBAAE,OAAO;gBAAgB,MAAM;YAAgB;YAC/D;gBAAE,MAAM,iUAAa;gBAAE,OAAO;gBAAc,MAAM;YAAc;YAChE;gBAAE,MAAM,iTAAS;gBAAE,OAAO;gBAAe,MAAM;YAAe;YAC9D;gBAAE,MAAM,6TAAa;gBAAE,OAAO;gBAAc,MAAM;YAAc;YAChE;gBAAE,MAAM,iTAAS;gBAAE,OAAO;gBAAY,MAAM;YAAY;YACxD;gBACI,MAAM,8SAAQ;gBACd,OAAO;gBACP,MAAM;YACV;YACA;gBACI,MAAM,iSAAK;gBACX,OAAO;gBACP,MAAM;YACV;SACH;IACL;IACA;QACI,OAAO;QACP,OAAO;YACH;gBAAE,MAAM,0TAAY;gBAAE,OAAO;gBAAY,MAAM;YAAY;YAC3D;gBAAE,MAAM,8TAAY;gBAAE,OAAO;gBAAe,MAAM;YAAe;YACjE;gBAAE,MAAM,iTAAS;gBAAE,OAAO;gBAAc,MAAM;YAAc;YAC5D;gBACI,MAAM,uSAAO;gBACb,OAAO;gBACP,MAAM;YACV;SACH;IACL;IACA;QACI,OAAO;QACP,OAAO;YACH;gBAAE,MAAM,uSAAO;gBAAE,OAAO;gBAAY,MAAM;YAAY;YACtD;gBACI,MAAM,oUAAc;gBACpB,OAAO;gBACP,MAAM;YACV;SACH;IACL;CACH;AAEM,MAAM,yBAA4C;IACrD;QAAE,MAAM,0TAAY;QAAE,OAAO;QAAY,MAAM;IAAY;IAC3D;QAAE,MAAM,uTAAW;QAAE,OAAO;QAAQ,MAAM;IAAgB;CAC7D"}},
    {"offset": {"line": 1802, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/legacy-app/pages/auth.tsx"],"sourcesContent":["import { LoginForm, ProfileForm, useAuth } from '@/features/auth/components'\r\nimport { Button } from '@/components/ui/button'\r\nimport { useRouter } from 'next/navigation'\r\n\r\nexport function AuthPage() {\r\n    const router = useRouter()\r\n\r\n    const handleAuthSuccess = () => {\r\n        router.push('/shops')\r\n    }\r\n\r\n    return (\r\n        <div className=\"h-full flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8\">\r\n            <div className=\"w-full max-w-md\">\r\n                <LoginForm onSuccess={handleAuthSuccess} />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport function ProfilePage() {\r\n    const { logout } = useAuth()\r\n\r\n    const handleLogout = async () => {\r\n        await logout()\r\n        window.location.href = '/'\r\n    }\r\n\r\n    return (\r\n        <div className=\"h-full bg-gray-50 py-12 px-4 sm:px-6 lg:px-8 overflow-auto\">\r\n            <div className=\"max-w-2xl mx-auto\">\r\n                <div className=\"flex justify-between items-center mb-6\">\r\n                    <h1 className=\"text-3xl font-bold\">Profile Settings</h1>\r\n                    <Button variant=\"outline\" onClick={handleLogout}>\r\n                        Logout\r\n                    </Button>\r\n                </div>\r\n                <ProfileForm />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default AuthPage\r\n"],"names":[],"mappings":";;;;;;;;;AAAA;AAAA;AAAA;AAAA;AACA;AACA;;;;;;;;;AAEO,SAAS;IACZ,MAAM,SAAS,IAAA,8PAAS;IAExB,MAAM,oBAAoB;QACtB,OAAO,IAAI,CAAC;IAChB;IAEA,qBACI,6VAAC;QAAI,WAAU;kBACX,cAAA,6VAAC;YAAI,WAAU;sBACX,cAAA,6VAAC,oKAAS;gBAAC,WAAW;;;;;;;;;;;;;;;;AAItC;AAEO,SAAS;IACZ,MAAM,EAAE,MAAM,EAAE,GAAG,IAAA,qKAAO;IAE1B,MAAM,eAAe;QACjB,MAAM;QACN,OAAO,QAAQ,CAAC,IAAI,GAAG;IAC3B;IAEA,qBACI,6VAAC;QAAI,WAAU;kBACX,cAAA,6VAAC;YAAI,WAAU;;8BACX,6VAAC;oBAAI,WAAU;;sCACX,6VAAC;4BAAG,WAAU;sCAAqB;;;;;;sCACnC,6VAAC,4IAAM;4BAAC,SAAQ;4BAAU,SAAS;sCAAc;;;;;;;;;;;;8BAIrD,6VAAC,wKAAW;;;;;;;;;;;;;;;;AAI5B;uCAEe"}},
    {"offset": {"line": 1912, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/utils/platform-detection.ts"],"sourcesContent":["import { platform as tauriPlatform } from '@tauri-apps/plugin-os'\r\n\r\n/**\r\n * Platform detection utilities using Tauri OS plugin for accurate platform detection\r\n */\r\n\r\nexport type Platform =\r\n    | 'android'\r\n    | 'ios'\r\n    | 'windows'\r\n    | 'macos'\r\n    | 'linux'\r\n    | 'mobile-web'\r\n\r\nexport interface PlatformInfo {\r\n    platform: Platform\r\n    isMobile: boolean\r\n    isDesktop: boolean\r\n    isAndroid: boolean\r\n    isIOS: boolean\r\n    isTauri: boolean\r\n    userAgent: string\r\n}\r\n\r\n/**\r\n * Detect the current platform using Tauri OS plugin when available, fallback to user agent\r\n */\r\nexport function getPlatform(): PlatformInfo {\r\n    if (typeof window === 'undefined') {\r\n        return {\r\n            platform: 'mobile-web',\r\n            isMobile: false,\r\n            isDesktop: false,\r\n            isAndroid: false,\r\n            isIOS: false,\r\n            isTauri: false,\r\n            userAgent: 'server'\r\n        }\r\n    }\r\n\r\n    const isTauri = '__TAURI__' in window\r\n    let platform: Platform\r\n    let isAndroid = false\r\n    let isIOS = false\r\n\r\n    // Only call tauriPlatform if we are in a Tauri environment or if the plugin handles non-Tauri gracefully.\r\n    // Assuming the plugin might throw or fail if window is missing (which we checked) or if not in Tauri.\r\n    // But the error was specifically \"window is not defined\" inside the plugin call likely.\r\n\r\n    let currentPlatform: string | null = null;\r\n    try {\r\n        if (isTauri) {\r\n            currentPlatform = tauriPlatform()\r\n        }\r\n    } catch (e) {\r\n        console.warn('Failed to detect Tauri platform:', e)\r\n    }\r\n\r\n    switch (currentPlatform) {\r\n        case 'android':\r\n            platform = 'android'\r\n            isAndroid = true\r\n            break\r\n        case 'ios':\r\n            platform = 'ios'\r\n            isIOS = true\r\n            break\r\n        case 'windows':\r\n            platform = 'windows'\r\n            break\r\n        case 'macos':\r\n            platform = 'macos'\r\n            break\r\n        case 'linux':\r\n            platform = 'linux'\r\n            break\r\n        default:\r\n            platform = 'mobile-web'\r\n    }\r\n\r\n    const isMobile = isAndroid || isIOS || platform === 'mobile-web'\r\n\r\n    return {\r\n        platform,\r\n        isMobile,\r\n        isDesktop: !isMobile && isTauri,\r\n        isAndroid,\r\n        isIOS,\r\n        isTauri,\r\n        userAgent: navigator.userAgent\r\n    }\r\n}\r\n\r\n/**\r\n * Get the appropriate platform string for the updater API\r\n * Always returns mobile platform strings since we only use mobile updater\r\n */\r\nexport function getUpdaterPlatformString(): string {\r\n    const platformInfo = getPlatform()\r\n\r\n    if (platformInfo.isAndroid) {\r\n        return 'android-aarch64'\r\n    } else if (platformInfo.isIOS) {\r\n        return 'darwin-aarch64' // iOS uses darwin-aarch64 in the API\r\n    } else {\r\n        // Default to android for mobile web and desktop\r\n        return 'android-aarch64'\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;;;AAAA;;AA2BO,SAAS;IACZ,wCAAmC;QAC/B,OAAO;YACH,UAAU;YACV,UAAU;YACV,WAAW;YACX,WAAW;YACX,OAAO;YACP,SAAS;YACT,WAAW;QACf;IACJ;;;IAEA,MAAM;IACN,IAAI;IACJ,IAAI;IACJ,IAAI;IAEJ,0GAA0G;IAC1G,sGAAsG;IACtG,wFAAwF;IAExF,IAAI;IA+BJ,MAAM;AAWV;AAMO,SAAS;IACZ,MAAM,eAAe;IAErB,IAAI,aAAa,SAAS,EAAE;QACxB,OAAO;IACX,OAAO,IAAI,aAAa,KAAK,EAAE;QAC3B,OAAO,iBAAiB,qCAAqC;;IACjE,OAAO;QACH,gDAAgD;QAChD,OAAO;IACX;AACJ"}},
    {"offset": {"line": 1960, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/services/mobile-updater.ts"],"sourcesContent":["import { APP_VERSION } from '@/lib/config'\nimport { platform } from '@tauri-apps/plugin-os'\nimport { fetch as httpFetch } from '@tauri-apps/plugin-http'\nimport { download } from '@tauri-apps/plugin-upload'\nimport { exists, remove } from '@tauri-apps/plugin-fs'\nimport { downloadDir } from '@tauri-apps/api/path'\nimport { join } from '@tauri-apps/api/path'\nimport { openPath, openUrl } from '@tauri-apps/plugin-opener'\n\nexport interface MobileUpdateInfo {\n    version: string\n    notes: string\n    pub_date: string\n    platforms: {\n        [platform: string]: {\n            signature: string\n            url: string\n        }\n    }\n}\n\nexport interface MobileUpdaterState {\n    status:\n        | 'idle'\n        | 'checking'\n        | 'available'\n        | 'downloading'\n        | 'downloaded'\n        | 'installing'\n        | 'error'\n        | 'up-to-date'\n    update?: MobileUpdateInfo\n    error?: string\n    progress?: number\n    downloadUrl?: string\n    downloadedVersion?: string\n    downloadedFilePath?: string\n}\n\ntype UpdateListener = (state: MobileUpdaterState) => void\n\n// Helper function to compare semantic versions\nfunction compareVersions(version1: string, version2: string): number {\n    const v1parts = version1.split('.').map(Number)\n    const v2parts = version2.split('.').map(Number)\n\n    for (let i = 0; i < Math.max(v1parts.length, v2parts.length); i++) {\n        const v1part = v1parts[i] || 0\n        const v2part = v2parts[i] || 0\n\n        if (v1part > v2part) return 1\n        if (v1part < v2part) return -1\n    }\n\n    return 0\n}\n\n// Detect current platform using Tauri OS plugin when available\nasync function getCurrentPlatform(): Promise<string> {\n    try {\n        // Check if running in Tauri environment\n        if (typeof window !== 'undefined' && '__TAURI__' in window) {\n            try {\n                const currentPlatform = platform()\n\n                switch (currentPlatform) {\n                    case 'android':\n                        return 'android-aarch64'\n                    case 'ios':\n                        return 'darwin-aarch64'\n                    case 'windows':\n                    case 'macos':\n                    case 'linux':\n                        // For desktop platforms, default to android-aarch64 for mobile updater\n                        return 'android-aarch64'\n                    default:\n                        return 'android-aarch64'\n                }\n            } catch (error) {\n                console.warn(\n                    'Failed to get platform from Tauri OS plugin, falling back to user agent:',\n                    error\n                )\n            }\n        }\n\n        // Fallback to user agent detection\n        const userAgent = navigator.userAgent.toLowerCase()\n\n        if (/android/.test(userAgent)) {\n            return 'android-aarch64'\n        } else if (/iphone|ipad|ipod/.test(userAgent)) {\n            return 'darwin-aarch64' // iOS uses darwin-aarch64\n        }\n\n        // Default to android for mobile web and desktop\n        return 'android-aarch64'\n    } catch (error) {\n        console.error('Error detecting platform:', error)\n        return 'android-aarch64' // Safe fallback\n    }\n}\n\nexport class MobileUpdaterService {\n    private static instance: MobileUpdaterService\n    private isInitialized = false\n    private checkInterval: number | null = null\n    private listeners: UpdateListener[] = []\n    private isEnabled = false\n    private currentState: MobileUpdaterState = { status: 'idle' }\n    private readonly UPDATE_ENDPOINT =\n        'https://updater-worker.stackproviders.workers.dev/latest?ttl=300'\n\n    private constructor() {}\n\n    public static getInstance(): MobileUpdaterService {\n        if (!MobileUpdaterService.instance) {\n            MobileUpdaterService.instance = new MobileUpdaterService()\n        }\n        return MobileUpdaterService.instance\n    }\n\n    public setEnabled(enabled: boolean): void {\n        this.isEnabled = enabled\n        if (enabled && !this.isInitialized) {\n            this.initialize()\n        } else if (!enabled) {\n            this.stopPeriodicChecks()\n        }\n    }\n\n    public subscribe(listener: UpdateListener): () => void {\n        this.listeners.push(listener)\n        // Immediately call listener with current state\n        listener(this.currentState)\n        return () => {\n            this.listeners = this.listeners.filter((l) => l !== listener)\n        }\n    }\n\n    private notifyListeners(): void {\n        this.listeners.forEach((listener) => listener(this.currentState))\n    }\n\n    private updateState(newState: Partial<MobileUpdaterState>): void {\n        this.currentState = { ...this.currentState, ...newState }\n        this.notifyListeners()\n    }\n\n    public async initialize(): Promise<void> {\n        if (this.isInitialized || !this.isEnabled) {\n            return\n        }\n\n        try {\n            await this.checkForUpdates()\n            this.startPeriodicChecks()\n            this.isInitialized = true\n            console.log('Mobile auto-updater initialized')\n        } catch (error) {\n            console.error('Failed to initialize mobile auto-updater:', error)\n            this.updateState({\n                status: 'error',\n                error:\n                    error instanceof Error\n                        ? error.message\n                        : 'Failed to initialize updater'\n            })\n        }\n    }\n\n    public async checkForUpdates(): Promise<MobileUpdateInfo | null> {\n        if (!this.isEnabled) return null\n\n        try {\n            this.updateState({ status: 'checking', error: undefined })\n\n            const response = await httpFetch(this.UPDATE_ENDPOINT, {\n                method: 'GET',\n                headers: {\n                    Accept: 'application/json',\n                    'Cache-Control': 'no-cache'\n                }\n            })\n\n            if (!response.ok) {\n                throw new Error(\n                    `HTTP ${response.status}: ${response.statusText}`\n                )\n            }\n\n            const updateInfo: MobileUpdateInfo = await response.json()\n\n            // Compare versions to determine if update is actually newer\n            const versionComparison = compareVersions(\n                updateInfo.version,\n                APP_VERSION\n            )\n\n            if (versionComparison > 0) {\n                console.log(\n                    `Mobile update available: v${updateInfo.version} (current: v${APP_VERSION})`\n                )\n\n                const currentPlatform = await getCurrentPlatform()\n                const platformInfo = updateInfo.platforms[currentPlatform]\n\n                if (!platformInfo) {\n                    throw new Error(\n                        `No update available for platform: ${currentPlatform}`\n                    )\n                }\n\n                // Check if this version is already downloaded\n                const downloadedVersion = this.getDownloadedVersion()\n                const isAlreadyDownloaded =\n                    downloadedVersion === updateInfo.version\n\n                // Check if file exists on disk\n                let downloadedFilePath: string | undefined\n                if (isAlreadyDownloaded) {\n                    try {\n                        const downloadDirectory = await downloadDir()\n                        const fileName = `Shop-Management-System-${updateInfo.version}.apk`\n                        const filePath = await join(downloadDirectory, fileName)\n                        const fileExists = await exists(filePath)\n\n                        if (fileExists) {\n                            downloadedFilePath = filePath\n                        } else {\n                            // File doesn't exist, clear the version tracking\n                            this.clearDownloadedVersion()\n                        }\n                    } catch (error) {\n                        console.warn('Error checking file existence:', error)\n                        this.clearDownloadedVersion()\n                    }\n                }\n\n                this.updateState({\n                    status:\n                        isAlreadyDownloaded && downloadedFilePath\n                            ? 'downloaded'\n                            : 'available',\n                    update: updateInfo,\n                    downloadUrl: platformInfo.url,\n                    downloadedVersion:\n                        isAlreadyDownloaded && downloadedFilePath\n                            ? updateInfo.version\n                            : undefined,\n                    downloadedFilePath: downloadedFilePath,\n                    error: undefined\n                })\n\n                return updateInfo\n            } else {\n                console.log(\n                    `Mobile app is up to date. Current version (v${APP_VERSION}) is same or newer than available version (v${updateInfo.version})`\n                )\n\n                this.updateState({\n                    status: 'up-to-date',\n                    update: updateInfo,\n                    error: undefined\n                })\n\n                return null\n            }\n        } catch (error) {\n            console.log(\n                'Update check failed (offline or network issue):',\n                error\n            )\n\n            // Don't show errors for offline mode - just silently fail\n            // This allows the app to work offline without showing update errors\n            this.updateState({\n                status: 'idle',\n                error: undefined\n            })\n\n            return null\n        }\n    }\n\n    public async downloadUpdate(): Promise<void> {\n        if (\n            this.currentState.status !== 'available' ||\n            !this.currentState.downloadUrl\n        ) {\n            throw new Error('No update available to download')\n        }\n\n        let cumulativeBytes = 0\n        let totalBytes = 0\n\n        try {\n            this.updateState({\n                status: 'downloading',\n                error: undefined,\n                progress: 0\n            })\n\n            const downloadDirectory = await downloadDir()\n            const fileName = `Shop-Management-System-${this.currentState.update?.version || 'latest'}.apk`\n            const filePath = await join(downloadDirectory, fileName)\n\n            const fileExists = await exists(filePath)\n            if (fileExists) {\n                const downloadedVersion =\n                    this.currentState.update?.version || 'unknown'\n                this.setDownloadedVersion(downloadedVersion)\n                this.updateState({\n                    status: 'downloaded',\n                    progress: 100,\n                    downloadedVersion,\n                    downloadedFilePath: filePath\n                })\n                return\n            }\n\n            await download(\n                this.currentState.downloadUrl,\n                filePath,\n                (progressInfo) => {\n                    const chunkSize =\n                        typeof progressInfo.progress === 'number'\n                            ? progressInfo.progress\n                            : 0\n                    const total =\n                        typeof progressInfo.total === 'number'\n                            ? progressInfo.total\n                            : 0\n\n                    if (total > 0) {\n                        totalBytes = total\n                        cumulativeBytes += chunkSize\n\n                        const progressPercent = Math.min(\n                            99,\n                            Math.round((cumulativeBytes / totalBytes) * 100)\n                        )\n                        this.updateState({ progress: progressPercent })\n                    }\n                },\n                new Map([\n                    ['Accept', 'application/octet-stream'],\n                    ['User-Agent', 'Shop-Management-System-Updater']\n                ])\n            )\n\n            const downloadedVersion =\n                this.currentState.update?.version || 'unknown'\n            this.setDownloadedVersion(downloadedVersion)\n\n            this.updateState({\n                status: 'downloaded',\n                progress: 100,\n                downloadedVersion,\n                downloadedFilePath: filePath\n            })\n        } catch (error) {\n            console.error('Download error:', error)\n\n            let errorMessage = 'Failed to download update'\n            if (error instanceof Error) {\n                if (\n                    error.message.includes('network') ||\n                    error.message.includes('fetch')\n                ) {\n                    errorMessage =\n                        'Network error. Please check your internet connection and try again.'\n                } else if (error.message.includes('HTTP')) {\n                    errorMessage = `Download failed: ${error.message}`\n                } else {\n                    errorMessage = error.message\n                }\n            }\n\n            this.updateState({\n                status: 'error',\n                error: errorMessage\n            })\n\n            throw error\n        }\n    }\n\n    public async installUpdate(): Promise<void> {\n        try {\n            this.updateState({ status: 'installing', error: undefined })\n\n            const currentPlatform = await getCurrentPlatform()\n            // const downloadedFilePath = this.currentState.downloadedFilePath\n\n            if (currentPlatform === 'android-aarch64') {\n                // Prefer installing from the already-downloaded APK using Opener's openPath\n                const localPath = this.currentState.downloadedFilePath\n                console.log('localPath', localPath)\n                if (localPath) {\n                    try {\n                        const fileExists = await exists(localPath)\n                        if (!fileExists)\n                            throw new Error('Downloaded file not found')\n                        await openPath(localPath)\n                        this.showInstallNotification()\n                        setTimeout(() => {\n                            this.clearDownloadedState()\n                        }, 2000)\n                        return\n                    } catch (autoInstallError) {\n                        console.warn(\n                            'Local install failed, falling back to URL:',\n                            autoInstallError\n                        )\n                    }\n                }\n\n                // Fallback: open the HTTPS download URL so the system package installer handles it.\n                if (this.currentState.downloadUrl) {\n                    try {\n                        await openUrl(this.currentState.downloadUrl)\n                        this.showInstallNotification()\n                        setTimeout(() => {\n                            this.clearDownloadedState()\n                        }, 2000)\n                    } catch (autoInstallError) {\n                        console.error('Installation failed:', autoInstallError)\n                        window.open(this.currentState.downloadUrl, '_blank')\n                        this.updateState({\n                            status: 'downloaded',\n                            error: undefined\n                        })\n                    }\n                }\n            } else if (currentPlatform === 'darwin-aarch64') {\n                // For iOS, redirect to App Store or show instructions\n                if (this.currentState.downloadUrl) {\n                    window.open(this.currentState.downloadUrl, '_blank')\n                }\n                this.updateState({\n                    status: 'downloaded',\n                    error: undefined\n                })\n                alert(\n                    'Please update through the App Store to get the latest version.'\n                )\n            } else {\n                // For other platforms, open the download URL\n                if (this.currentState.downloadUrl) {\n                    window.open(this.currentState.downloadUrl, '_blank')\n                }\n                this.updateState({\n                    status: 'downloaded',\n                    error: undefined\n                })\n                alert(\n                    'Please install the downloaded file to update the application.'\n                )\n            }\n        } catch (error) {\n            console.error('Install error:', error)\n            this.updateState({\n                status: 'error',\n                error: 'Failed to install update'\n            })\n            throw error\n        }\n    }\n\n    private startPeriodicChecks(): void {\n        const CHECK_INTERVAL = 24 * 60 * 60 * 1000 // 24 hours\n\n        this.checkInterval = window.setInterval(() => {\n            this.checkForUpdates()\n        }, CHECK_INTERVAL)\n    }\n\n    public stopPeriodicChecks(): void {\n        if (this.checkInterval) {\n            clearInterval(this.checkInterval)\n            this.checkInterval = null\n        }\n    }\n\n    public getCurrentState(): MobileUpdaterState {\n        return this.currentState\n    }\n\n    public clearDownloadedState(): void {\n        // Clear the downloaded blob and reset to available state\n        ;(this as unknown as { downloadedBlob?: Blob }).downloadedBlob =\n            undefined\n        this.clearDownloadedVersion()\n        this.updateState({\n            status: 'available',\n            progress: undefined,\n            downloadedVersion: undefined,\n            downloadedFilePath: undefined\n        })\n    }\n\n    public async cleanupDownloadedFiles(): Promise<void> {\n        try {\n            const downloadedVersion = this.getDownloadedVersion()\n            if (downloadedVersion) {\n                const downloadDirectory = await downloadDir()\n                const fileName = `Shop-Management-System-${downloadedVersion}.apk`\n                const filePath = await join(downloadDirectory, fileName)\n\n                const fileExists = await exists(filePath)\n                if (fileExists) {\n                    await remove(filePath)\n                    console.log(`Cleaned up downloaded file: ${filePath}`)\n                }\n            }\n        } catch (error) {\n            console.warn('Error cleaning up downloaded files:', error)\n        }\n    }\n\n    private getDownloadedVersion(): string | null {\n        return localStorage.getItem('downloadedAppVersion')\n    }\n\n    private setDownloadedVersion(version: string): void {\n        localStorage.setItem('downloadedAppVersion', version)\n    }\n\n    private clearDownloadedVersion(): void {\n        localStorage.removeItem('downloadedAppVersion')\n    }\n\n    private showInstallNotification(): void {\n        if ('Notification' in window && Notification.permission === 'granted') {\n            new Notification('App Update', {\n                body: `Installation started for v${this.currentState.update?.version || 'latest'}. The APK file will open automatically.`,\n                icon: '/favicon.ico'\n            })\n        }\n    }\n\n    public checkIfAppWasUpdated(): boolean {\n        // Check if the app version has changed since last check\n        const lastKnownVersion = localStorage.getItem('lastKnownAppVersion')\n        const currentVersion = APP_VERSION\n\n        if (lastKnownVersion && lastKnownVersion !== currentVersion) {\n            // App was updated\n            localStorage.setItem('lastKnownAppVersion', currentVersion)\n            return true\n        } else if (!lastKnownVersion) {\n            // First time running, store current version\n            localStorage.setItem('lastKnownAppVersion', currentVersion)\n        }\n\n        return false\n    }\n\n    public showUpdateSuccessMessage(): void {\n        const wasUpdated = this.checkIfAppWasUpdated()\n        if (wasUpdated) {\n            const successMessage = `\n Update Successful!\n\n Your app has been updated successfully.\n All your data and settings have been preserved.\n You're now running the latest version.\n\nThank you for keeping your app up to date!\n      `\n            alert(successMessage)\n        }\n    }\n\n    public destroy(): void {\n        this.stopPeriodicChecks()\n        this.isInitialized = false\n        this.listeners = []\n        this.currentState = { status: 'idle' }\n    }\n}\n\nexport const mobileUpdater = MobileUpdaterService.getInstance()\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2408, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/app/providers.tsx"],"sourcesContent":["'use client'\r\n\r\nimport { ReactNode, useEffect, useMemo } from 'react'\r\nimport AppErrorPage from '@/features/errors/app-error'\r\nimport { ErrorBoundary } from 'react-error-boundary'\r\nimport { TooltipProvider } from '@/components/ui/tooltip'\r\nimport { ThemeProvider } from '@/components/providers/theme-provider'\r\nimport { Toaster } from '@/components/ui/sonner'\r\nimport { ShopProvider } from '@/features/shop'\r\nimport { AuthProvider } from '@/features/auth/components'\r\nimport {\r\n    SuspenseWithPerf,\r\n    StorageProvider,\r\n    useFirebaseApp,\r\n    FirebaseAppProvider,\r\n    FirestoreProvider,\r\n    useInitFirestore\r\n} from 'reactfire'\r\nimport { Spinner } from '@/components/ui/spinner'\r\nimport { getStorage } from 'firebase/storage'\r\nimport { firebaseConfig } from '@/lib/firebase'\r\nimport { initializeDesktop } from '@/lib/desktop'\r\nimport { getPlatform } from '@/utils/platform-detection'\r\nimport { checkForAppUpdates } from '@/lib/updater'\r\nimport { MobileUpdaterProvider } from '@/components/providers/mobile-updater-provider'\r\nimport { SafeAreaProvider } from '@/components/providers/safe-area-provider'\r\nimport {\r\n    getFirestore,\r\n    initializeFirestore,\r\n    persistentLocalCache,\r\n    persistentMultipleTabManager\r\n} from 'firebase/firestore'\r\nimport { NuqsAdapter } from 'nuqs/adapters/next/app'\r\n\r\nfunction AppWithStorage({ children }: { children: ReactNode }) {\r\n    const app = useFirebaseApp()\r\n    return <StorageProvider sdk={getStorage(app)}>{children}</StorageProvider>\r\n}\r\n\r\nfunction FirestoreWrapper({ children }: { children: ReactNode }) {\r\n    const { data: firestoreInstance } = useInitFirestore(\r\n        async (firebaseApp) => {\r\n            try {\r\n                return initializeFirestore(firebaseApp, {\r\n                    localCache: persistentLocalCache({\r\n                        tabManager: persistentMultipleTabManager()\r\n                    })\r\n                })\r\n            } catch {\r\n                return getFirestore(firebaseApp)\r\n            }\r\n        }\r\n    )\r\n\r\n    return (\r\n        <FirestoreProvider sdk={firestoreInstance}>\r\n            {children}\r\n        </FirestoreProvider>\r\n    )\r\n}\r\n\r\nfunction PlatformInit({ children }: { children: ReactNode }) {\r\n    const { isDesktop, isMobile } = useMemo(() => getPlatform(), [])\r\n\r\n    useEffect(() => {\r\n        if (isDesktop) {\r\n            checkForAppUpdates(false)\r\n        }\r\n    }, [isDesktop])\r\n\r\n    // Initialize desktop features once\r\n    useEffect(() => {\r\n        if (typeof window !== 'undefined' && '__TAURI__' in window) {\r\n            initializeDesktop()\r\n        }\r\n    }, [])\r\n\r\n    return (\r\n        <SafeAreaProvider>\r\n            {isMobile ? (\r\n                <MobileUpdaterProvider>{children}</MobileUpdaterProvider>\r\n            ) : (\r\n                children\r\n            )}\r\n        </SafeAreaProvider>\r\n    )\r\n}\r\n\r\nexport default function Providers({ children }: { children: ReactNode }) {\r\n    return (\r\n        <FirebaseAppProvider firebaseConfig={firebaseConfig} suspense={true}>\r\n            <NuqsAdapter>\r\n                <ErrorBoundary FallbackComponent={AppErrorPage}>\r\n                    <TooltipProvider>\r\n                        <ThemeProvider defaultTheme=\"system\">\r\n                            <SuspenseWithPerf\r\n                                fallback={\r\n                                    <Spinner\r\n                                        fullScreen={true}\r\n                                        className=\"size-7\"\r\n                                    />\r\n                                }\r\n                                traceId=\"app-init\"\r\n                            >\r\n                                <FirestoreWrapper>\r\n                                    <PlatformInit>\r\n                                        <SuspenseWithPerf\r\n                                            fallback={\r\n                                                <Spinner\r\n                                                    fullScreen={true}\r\n                                                    className=\"size-7\"\r\n                                                />\r\n                                            }\r\n                                            traceId=\"auth-init\"\r\n                                        >\r\n                                            <AuthProvider>\r\n                                                <SuspenseWithPerf\r\n                                                    fallback={\r\n                                                        <Spinner\r\n                                                            fullScreen={true}\r\n                                                            className=\"size-7\"\r\n                                                        />\r\n                                                    }\r\n                                                    traceId=\"shop-init\"\r\n                                                >\r\n                                                    <ShopProvider>\r\n                                                        <AppWithStorage>\r\n                                                            {children}\r\n                                                            <Toaster richColors />\r\n                                                        </AppWithStorage>\r\n                                                    </ShopProvider>\r\n                                                </SuspenseWithPerf>\r\n                                            </AuthProvider>\r\n                                        </SuspenseWithPerf>\r\n                                    </PlatformInit>\r\n                                </FirestoreWrapper>\r\n                            </SuspenseWithPerf>\r\n                        </ThemeProvider>\r\n                    </TooltipProvider>\r\n                </ErrorBoundary>\r\n            </NuqsAdapter>\r\n        </FirebaseAppProvider>\r\n    )\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AAQA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAMA;;;;;;;AAhCA;;;;;;;;;;;;;;;;;;;;;AAkCA,SAAS,eAAe,EAAE,QAAQ,EAA2B;IACzD,MAAM,MAAM,IAAA,iQAAc;IAC1B,qBAAO,6VAAC,kQAAe;QAAC,KAAK,IAAA,ySAAU,EAAC;kBAAO;;;;;;AACnD;AAEA,SAAS,iBAAiB,EAAE,QAAQ,EAA2B;IAC3D,MAAM,EAAE,MAAM,iBAAiB,EAAE,GAAG,IAAA,mQAAgB,EAChD,OAAO;QACH,IAAI;YACA,OAAO,IAAA,gSAAmB,EAAC,aAAa;gBACpC,YAAY,IAAA,iSAAoB,EAAC;oBAC7B,YAAY,IAAA,ySAA4B;gBAC5C;YACJ;QACJ,EAAE,OAAM;YACJ,OAAO,IAAA,yRAAY,EAAC;QACxB;IACJ;IAGJ,qBACI,6VAAC,oQAAiB;QAAC,KAAK;kBACnB;;;;;;AAGb;AAEA,SAAS,aAAa,EAAE,QAAQ,EAA2B;IACvD,MAAM,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,IAAA,+TAAO,EAAC,IAAM,IAAA,oJAAW,KAAI,EAAE;IAE/D,IAAA,iUAAS,EAAC;QACN,IAAI,WAAW;YACX,IAAA,2IAAkB,EAAC;QACvB;IACJ,GAAG;QAAC;KAAU;IAEd,mCAAmC;IACnC,IAAA,iUAAS,EAAC;QACN,IAAI,kDAAkB,eAAe,eAAe;;IAGxD,GAAG,EAAE;IAEL,qBACI,6VAAC,+KAAgB;kBACZ,yBACG,6VAAC,yLAAqB;sBAAE;;;;;mBAExB;;;;;;AAIhB;AAEe,SAAS,UAAU,EAAE,QAAQ,EAA2B;IACnE,qBACI,6VAAC,sQAAmB;QAAC,gBAAgB,wIAAc;QAAE,UAAU;kBAC3D,cAAA,6VAAC,kRAAW;sBACR,cAAA,6VAAC,6SAAa;gBAAC,mBAAmB,qJAAY;0BAC1C,cAAA,6VAAC,sJAAe;8BACZ,cAAA,6VAAC,qKAAa;wBAAC,cAAa;kCACxB,cAAA,6VAAC,mQAAgB;4BACb,wBACI,6VAAC,8IAAO;gCACJ,YAAY;gCACZ,WAAU;;;;;;4BAGlB,SAAQ;sCAER,cAAA,6VAAC;0CACG,cAAA,6VAAC;8CACG,cAAA,6VAAC,mQAAgB;wCACb,wBACI,6VAAC,8IAAO;4CACJ,YAAY;4CACZ,WAAU;;;;;;wCAGlB,SAAQ;kDAER,cAAA,6VAAC,0KAAY;sDACT,cAAA,6VAAC,mQAAgB;gDACb,wBACI,6VAAC,8IAAO;oDACJ,YAAY;oDACZ,WAAU;;;;;;gDAGlB,SAAQ;0DAER,cAAA,6VAAC,0KAAY;8DACT,cAAA,6VAAC;;4DACI;0EACD,6VAAC,6IAAO;gEAAC,UAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAe/E"}}]
}