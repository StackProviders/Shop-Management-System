{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/errors/error-base.tsx"],"sourcesContent":["import { cn } from '@/lib/utils'\nimport { ReactNode } from 'react'\nimport { Card } from '@/components/ui/card'\n\nexport function ErrorView({\n    children,\n    className,\n    variant = 'destructive'\n}: {\n    children: ReactNode\n    className?: string\n    variant?: 'destructive' | 'warning' | 'info'\n}) {\n    const bgColor = {\n        destructive: 'bg-destructive/5',\n        warning: 'bg-warning/5',\n        info: 'bg-muted/50'\n    }[variant]\n\n    return (\n        <main\n            className={cn(\n                'h-full flex items-center justify-center p-4',\n                bgColor,\n                className\n            )}\n        >\n            <Card className=\"max-w-md w-full p-8 text-center space-y-6\">\n                {children}\n            </Card>\n        </main>\n    )\n}\n\nexport function ErrorIcon({\n    children,\n    className\n}: {\n    children: ReactNode\n    className?: string\n}) {\n    return (\n        <div className={cn('flex justify-center', className)}>{children}</div>\n    )\n}\n\nexport function ErrorCode({\n    children,\n    className\n}: {\n    children: ReactNode\n    className?: string\n}) {\n    return (\n        <p\n            className={cn(\n                'text-sm font-medium text-muted-foreground',\n                className\n            )}\n        >\n            {children}\n        </p>\n    )\n}\n\nexport function ErrorHeader({\n    children,\n    className\n}: {\n    children: ReactNode\n    className?: string\n}) {\n    return (\n        <h1\n            className={cn(\n                'text-2xl font-bold tracking-tight text-foreground',\n                className\n            )}\n        >\n            {children}\n        </h1>\n    )\n}\n\nexport function ErrorDescription({\n    children,\n    className\n}: {\n    children: ReactNode\n    className?: string\n}) {\n    return (\n        <p className={cn('text-sm text-muted-foreground', className)}>\n            {children}\n        </p>\n    )\n}\n\nexport function ErrorActions({\n    children,\n    className\n}: {\n    children: ReactNode\n    className?: string\n}) {\n    return (\n        <div\n            className={cn(\n                'flex flex-col sm:flex-row items-center justify-center gap-3',\n                className\n            )}\n        >\n            {children}\n        </div>\n    )\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;AAAA;AAEA;;;;AAEO,SAAS,UAAU,EACtB,QAAQ,EACR,SAAS,EACT,UAAU,aAAa,EAK1B;IACG,MAAM,UAAU;QACZ,aAAa;QACb,SAAS;QACT,MAAM;IACV,CAAC,CAAC,QAAQ;IAEV,qBACI,4SAAC;QACG,WAAW,IAAA,4HAAE,EACT,+CACA,SACA;kBAGJ,cAAA,4SAAC,2IAAI;YAAC,WAAU;sBACX;;;;;;;;;;;AAIjB;KA5BgB;AA8BT,SAAS,UAAU,EACtB,QAAQ,EACR,SAAS,EAIZ;IACG,qBACI,4SAAC;QAAI,WAAW,IAAA,4HAAE,EAAC,uBAAuB;kBAAa;;;;;;AAE/D;MAVgB;AAYT,SAAS,UAAU,EACtB,QAAQ,EACR,SAAS,EAIZ;IACG,qBACI,4SAAC;QACG,WAAW,IAAA,4HAAE,EACT,6CACA;kBAGH;;;;;;AAGb;MAjBgB;AAmBT,SAAS,YAAY,EACxB,QAAQ,EACR,SAAS,EAIZ;IACG,qBACI,4SAAC;QACG,WAAW,IAAA,4HAAE,EACT,qDACA;kBAGH;;;;;;AAGb;MAjBgB;AAmBT,SAAS,iBAAiB,EAC7B,QAAQ,EACR,SAAS,EAIZ;IACG,qBACI,4SAAC;QAAE,WAAW,IAAA,4HAAE,EAAC,iCAAiC;kBAC7C;;;;;;AAGb;MAZgB;AAcT,SAAS,aAAa,EACzB,QAAQ,EACR,SAAS,EAIZ;IACG,qBACI,4SAAC;QACG,WAAW,IAAA,4HAAE,EACT,+DACA;kBAGH;;;;;;AAGb;MAjBgB"}},
    {"offset": {"line": 116, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/errors/app-error.tsx"],"sourcesContent":["import { relaunch } from '@tauri-apps/plugin-process'\nimport { Button } from '@/components/ui/button'\nimport {\n    ErrorView,\n    ErrorHeader,\n    ErrorDescription,\n    ErrorActions\n} from '@/features/errors/error-base'\n\nexport default function AppErrorPage() {\n    return (\n        <ErrorView>\n            <ErrorHeader>We&apos;re fixing it</ErrorHeader>\n            <ErrorDescription>\n                The app encountered an error and needs to be restarted.\n                <br />\n                We know about it and we&apos;re working to fix it.\n            </ErrorDescription>\n            <ErrorActions>\n                <Button size=\"lg\" onClick={relaunch}>\n                    Relaunch app\n                </Button>\n            </ErrorActions>\n        </ErrorView>\n    )\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;;;;AAOe,SAAS;IACpB,qBACI,4SAAC,2JAAS;;0BACN,4SAAC,6JAAW;0BAAC;;;;;;0BACb,4SAAC,kKAAgB;;oBAAC;kCAEd,4SAAC;;;;;oBAAK;;;;;;;0BAGV,4SAAC,8JAAY;0BACT,cAAA,4SAAC,+IAAM;oBAAC,MAAK;oBAAK,SAAS,2QAAQ;8BAAE;;;;;;;;;;;;;;;;;AAMrD;KAhBwB"}},
    {"offset": {"line": 185, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/shop/services/shop.service.ts"],"sourcesContent":["import { shopsRepo, shopMembersRepo, usersRepo } from '@/lib/db'\nimport type { ShopData, ShopMemberData } from '@/lib/db'\nimport {\n    Shop,\n    ShopMember,\n    ShopMemberWithUser,\n    ShopRole,\n    ShopPermission,\n    UserShopAccess,\n    ShopStatus\n} from '@/types/shop'\n\nexport const createShop = async (\n    userId: string,\n    shopData: Omit<\n        Shop,\n        'id' | 'created_userId' | 'createdAt' | 'updatedAt' | 'status'\n    >\n): Promise<Shop> => {\n    const now = new Date()\n    const shopId = crypto.randomUUID()\n\n    const newShop: ShopData & { id: string } = {\n        id: shopId,\n        ...shopData,\n        created_userId: userId,\n        status: ShopStatus.ACTIVE,\n        createdAt: now,\n        updatedAt: now\n    }\n\n    await shopsRepo.set(newShop)\n\n    const ownerMember: ShopMemberData & { id: string } = {\n        id: crypto.randomUUID(),\n        shopId,\n        userId,\n        role: ShopRole.OWNER,\n        permissions: [],\n        invitedBy: userId,\n        joinedAt: now,\n        createdAt: now,\n        updatedAt: now\n    }\n\n    await shopMembersRepo.set(ownerMember)\n\n    return newShop\n}\n\nexport const getShop = async (shopId: string): Promise<Shop | null> => {\n    return await shopsRepo.get({ id: shopId })\n}\n\nexport const getUserShops = async (\n    userId: string\n): Promise<UserShopAccess[]> => {\n    const members = await shopMembersRepo.list()\n    const userMembers = members.filter((m) => m.userId === userId)\n    const userShops: UserShopAccess[] = []\n\n    for (const member of userMembers) {\n        const shop = await shopsRepo.get({ id: member.shopId })\n        if (shop) {\n            userShops.push({\n                shopId: shop.id,\n                shopName: shop.shopname,\n                role: member.role,\n                permissions: member.permissions,\n                isOwner: shop.created_userId === userId,\n                logoUrl: shop.logo_url,\n                shopCategory: shop.shop_category,\n                shopAddress: shop.shop_address\n            })\n        }\n    }\n\n    return userShops\n}\n\nexport const addMemberToShop = async (\n    shopId: string,\n    userId: string,\n    memberData: Omit<\n        ShopMember,\n        'id' | 'shopId' | 'userId' | 'joinedAt' | 'createdAt' | 'updatedAt'\n    >\n): Promise<void> => {\n    const shop = await shopsRepo.get({ id: shopId })\n    if (!shop) throw new Error('Shop not found')\n\n    const now = new Date()\n    await shopMembersRepo.set({\n        id: crypto.randomUUID(),\n        shopId,\n        userId,\n        ...memberData,\n        joinedAt: now,\n        createdAt: now,\n        updatedAt: now\n    })\n}\n\nexport const updateMemberRole = async (\n    shopId: string,\n    userId: string,\n    newRole: ShopRole,\n    newPermissions: ShopPermission[]\n): Promise<void> => {\n    const members = await shopMembersRepo.list()\n    const member = members.find(\n        (m) => m.shopId === shopId && m.userId === userId\n    )\n    if (!member) throw new Error('Member not found')\n\n    await shopMembersRepo.set({\n        ...member,\n        role: newRole,\n        permissions: newPermissions,\n        updatedAt: new Date()\n    })\n}\n\nexport const removeMemberFromShop = async (\n    shopId: string,\n    userId: string\n): Promise<void> => {\n    const members = await shopMembersRepo.list()\n    const member = members.find(\n        (m) => m.shopId === shopId && m.userId === userId\n    )\n    if (!member) throw new Error('Member not found')\n\n    await shopMembersRepo.delete({ id: member.id })\n}\n\nexport const updateShop = async (\n    shopId: string,\n    updates: Partial<Shop>\n): Promise<void> => {\n    const shop = await shopsRepo.get({ id: shopId })\n    if (!shop) throw new Error('Shop not found')\n\n    await shopsRepo.set({\n        ...shop,\n        ...updates,\n        updatedAt: new Date()\n    })\n}\n\nexport const deleteShop = async (shopId: string): Promise<void> => {\n    await shopsRepo.delete({ id: shopId })\n\n    const members = await shopMembersRepo.list()\n    const shopMembers = members.filter((m) => m.shopId === shopId)\n    if (shopMembers.length > 0) {\n        await shopMembersRepo.batchDelete(shopMembers)\n    }\n}\n\nexport const getShopMembers = async (shopId: string): Promise<ShopMember[]> => {\n    const members = await shopMembersRepo.list()\n    return members.filter((m) => m.shopId === shopId)\n}\n\nexport const getShopMembersWithUserData = async (\n    shopId: string\n): Promise<ShopMemberWithUser[]> => {\n    const members = await getShopMembers(shopId)\n    const membersWithUser: ShopMemberWithUser[] = []\n\n    for (const member of members) {\n        const user = await usersRepo.get({ id: member.userId })\n        membersWithUser.push({\n            ...member,\n            email: user?.email,\n            displayName: user?.displayName,\n            photoURL: user?.photoURL\n        })\n    }\n\n    return membersWithUser\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 348, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/shop/services/index.ts"],"sourcesContent":["export * from './shop.service'\n"],"names":[],"mappings":";AAAA"}},
    {"offset": {"line": 358, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/shop/api/shop.api.ts"],"sourcesContent":["import {\n    createShop as createShopService,\n    getShop as getShopService,\n    getUserShops as getUserShopsService,\n    updateShop as updateShopService,\n    deleteShop as deleteShopService,\n    getShopMembers as getShopMembersService,\n    getShopMembersWithUserData as getShopMembersWithUserDataService,\n    addMemberToShop as addMemberService,\n    updateMemberRole as updateMemberRoleService,\n    removeMemberFromShop as removeMemberService\n} from '../services'\nimport type {\n    Shop,\n    ShopMember,\n    ShopMemberWithUser,\n    UserShopAccess,\n    ShopRole,\n    ShopPermission\n} from '../types'\n\nexport const shopApi = {\n    createShop: async (\n        userId: string,\n        shopData: Omit<\n            Shop,\n            'id' | 'created_userId' | 'createdAt' | 'updatedAt' | 'status'\n        >\n    ): Promise<Shop> => {\n        return createShopService(userId, shopData)\n    },\n\n    getShop: async (shopId: string): Promise<Shop | null> => {\n        return getShopService(shopId)\n    },\n\n    getUserShops: async (userId: string): Promise<UserShopAccess[]> => {\n        return getUserShopsService(userId)\n    },\n\n    updateShop: async (\n        shopId: string,\n        updates: Partial<Shop>\n    ): Promise<void> => {\n        return updateShopService(shopId, updates)\n    },\n\n    deleteShop: async (shopId: string): Promise<void> => {\n        return deleteShopService(shopId)\n    },\n\n    getShopMembers: async (shopId: string): Promise<ShopMember[]> => {\n        return getShopMembersService(shopId)\n    },\n\n    getShopMembersWithUserData: async (\n        shopId: string\n    ): Promise<ShopMemberWithUser[]> => {\n        return getShopMembersWithUserDataService(shopId)\n    },\n\n    addMember: async (\n        shopId: string,\n        userId: string,\n        memberData: Omit<\n            ShopMember,\n            'id' | 'shopId' | 'userId' | 'joinedAt' | 'createdAt' | 'updatedAt'\n        >\n    ): Promise<void> => {\n        return addMemberService(shopId, userId, memberData)\n    },\n\n    updateMemberRole: async (\n        shopId: string,\n        userId: string,\n        newRole: ShopRole,\n        newPermissions: ShopPermission[]\n    ): Promise<void> => {\n        return updateMemberRoleService(shopId, userId, newRole, newPermissions)\n    },\n\n    removeMember: async (shopId: string, userId: string): Promise<void> => {\n        return removeMemberService(shopId, userId)\n    }\n}\n"],"names":[],"mappings":";;;;AAAA;AAAA;;AAqBO,MAAM,UAAU;IACnB,YAAY,OACR,QACA;QAKA,OAAO,IAAA,uKAAiB,EAAC,QAAQ;IACrC;IAEA,SAAS,OAAO;QACZ,OAAO,IAAA,oKAAc,EAAC;IAC1B;IAEA,cAAc,OAAO;QACjB,OAAO,IAAA,yKAAmB,EAAC;IAC/B;IAEA,YAAY,OACR,QACA;QAEA,OAAO,IAAA,uKAAiB,EAAC,QAAQ;IACrC;IAEA,YAAY,OAAO;QACf,OAAO,IAAA,uKAAiB,EAAC;IAC7B;IAEA,gBAAgB,OAAO;QACnB,OAAO,IAAA,2KAAqB,EAAC;IACjC;IAEA,4BAA4B,OACxB;QAEA,OAAO,IAAA,uLAAiC,EAAC;IAC7C;IAEA,WAAW,OACP,QACA,QACA;QAKA,OAAO,IAAA,4KAAgB,EAAC,QAAQ,QAAQ;IAC5C;IAEA,kBAAkB,OACd,QACA,QACA,SACA;QAEA,OAAO,IAAA,6KAAuB,EAAC,QAAQ,QAAQ,SAAS;IAC5D;IAEA,cAAc,OAAO,QAAgB;QACjC,OAAO,IAAA,iLAAmB,EAAC,QAAQ;IACvC;AACJ"}},
    {"offset": {"line": 404, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/shop/api/index.ts"],"sourcesContent":["export * from './shop.api'\n"],"names":[],"mappings":";AAAA"}},
    {"offset": {"line": 414, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/shop/hooks/use-shop-actions.ts"],"sourcesContent":["import { useState, useCallback } from 'react'\nimport { toast } from 'sonner'\nimport { shopApi } from '../api'\nimport type { Shop, ShopRole, ShopPermission, ShopMember } from '../types'\n\nexport function useShopActions() {\n    const [loading, setLoading] = useState(false)\n\n    const createShop = useCallback(\n        async (\n            userId: string,\n            shopData: Omit<\n                Shop,\n                'id' | 'created_userId' | 'createdAt' | 'updatedAt' | 'status'\n            >\n        ): Promise<Shop> => {\n            setLoading(true)\n            try {\n                const shop = await shopApi.createShop(userId, shopData)\n                toast.success('Shop created successfully')\n                return shop\n            } catch (error) {\n                toast.error(\n                    error instanceof Error\n                        ? error.message\n                        : 'Failed to create shop'\n                )\n                throw error\n            } finally {\n                setLoading(false)\n            }\n        },\n        []\n    )\n\n    const updateShop = useCallback(\n        async (shopId: string, updates: Partial<Shop>): Promise<void> => {\n            setLoading(true)\n            try {\n                await shopApi.updateShop(shopId, updates)\n                toast.success('Shop updated successfully')\n            } catch (error) {\n                toast.error(\n                    error instanceof Error\n                        ? error.message\n                        : 'Failed to update shop'\n                )\n                throw error\n            } finally {\n                setLoading(false)\n            }\n        },\n        []\n    )\n\n    const deleteShop = useCallback(async (shopId: string): Promise<void> => {\n        setLoading(true)\n        try {\n            await shopApi.deleteShop(shopId)\n            toast.success('Shop deleted successfully')\n        } catch (error) {\n            toast.error(\n                error instanceof Error ? error.message : 'Failed to delete shop'\n            )\n            throw error\n        } finally {\n            setLoading(false)\n        }\n    }, [])\n\n    const addMember = useCallback(\n        async (\n            shopId: string,\n            userId: string,\n            memberData: Omit<\n                ShopMember,\n                | 'id'\n                | 'shopId'\n                | 'userId'\n                | 'joinedAt'\n                | 'createdAt'\n                | 'updatedAt'\n            >\n        ): Promise<void> => {\n            setLoading(true)\n            try {\n                await shopApi.addMember(shopId, userId, memberData)\n                toast.success('Member added successfully')\n            } catch (error) {\n                toast.error(\n                    error instanceof Error\n                        ? error.message\n                        : 'Failed to add member'\n                )\n                throw error\n            } finally {\n                setLoading(false)\n            }\n        },\n        []\n    )\n\n    const updateMemberRole = useCallback(\n        async (\n            shopId: string,\n            userId: string,\n            newRole: ShopRole,\n            newPermissions: ShopPermission[]\n        ): Promise<void> => {\n            setLoading(true)\n            try {\n                await shopApi.updateMemberRole(\n                    shopId,\n                    userId,\n                    newRole,\n                    newPermissions\n                )\n                toast.success('Member role updated successfully')\n            } catch (error) {\n                toast.error(\n                    error instanceof Error\n                        ? error.message\n                        : 'Failed to update member role'\n                )\n                throw error\n            } finally {\n                setLoading(false)\n            }\n        },\n        []\n    )\n\n    const removeMember = useCallback(\n        async (shopId: string, userId: string): Promise<void> => {\n            setLoading(true)\n            try {\n                await shopApi.removeMember(shopId, userId)\n                toast.success('Member removed successfully')\n            } catch (error) {\n                toast.error(\n                    error instanceof Error\n                        ? error.message\n                        : 'Failed to remove member'\n                )\n                throw error\n            } finally {\n                setLoading(false)\n            }\n        },\n        []\n    )\n\n    return {\n        createShop,\n        updateShop,\n        deleteShop,\n        addMember,\n        updateMemberRole,\n        removeMember,\n        loading\n    }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AAAA;;;;;AAGO,SAAS;;IACZ,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,wRAAQ,EAAC;IAEvC,MAAM,aAAa,IAAA,2RAAW;kDAC1B,OACI,QACA;YAKA,WAAW;YACX,IAAI;gBACA,MAAM,OAAO,MAAM,2JAAO,CAAC,UAAU,CAAC,QAAQ;gBAC9C,oRAAK,CAAC,OAAO,CAAC;gBACd,OAAO;YACX,EAAE,OAAO,OAAO;gBACZ,oRAAK,CAAC,KAAK,CACP,iBAAiB,QACX,MAAM,OAAO,GACb;gBAEV,MAAM;YACV,SAAU;gBACN,WAAW;YACf;QACJ;iDACA,EAAE;IAGN,MAAM,aAAa,IAAA,2RAAW;kDAC1B,OAAO,QAAgB;YACnB,WAAW;YACX,IAAI;gBACA,MAAM,2JAAO,CAAC,UAAU,CAAC,QAAQ;gBACjC,oRAAK,CAAC,OAAO,CAAC;YAClB,EAAE,OAAO,OAAO;gBACZ,oRAAK,CAAC,KAAK,CACP,iBAAiB,QACX,MAAM,OAAO,GACb;gBAEV,MAAM;YACV,SAAU;gBACN,WAAW;YACf;QACJ;iDACA,EAAE;IAGN,MAAM,aAAa,IAAA,2RAAW;kDAAC,OAAO;YAClC,WAAW;YACX,IAAI;gBACA,MAAM,2JAAO,CAAC,UAAU,CAAC;gBACzB,oRAAK,CAAC,OAAO,CAAC;YAClB,EAAE,OAAO,OAAO;gBACZ,oRAAK,CAAC,KAAK,CACP,iBAAiB,QAAQ,MAAM,OAAO,GAAG;gBAE7C,MAAM;YACV,SAAU;gBACN,WAAW;YACf;QACJ;iDAAG,EAAE;IAEL,MAAM,YAAY,IAAA,2RAAW;iDACzB,OACI,QACA,QACA;YAUA,WAAW;YACX,IAAI;gBACA,MAAM,2JAAO,CAAC,SAAS,CAAC,QAAQ,QAAQ;gBACxC,oRAAK,CAAC,OAAO,CAAC;YAClB,EAAE,OAAO,OAAO;gBACZ,oRAAK,CAAC,KAAK,CACP,iBAAiB,QACX,MAAM,OAAO,GACb;gBAEV,MAAM;YACV,SAAU;gBACN,WAAW;YACf;QACJ;gDACA,EAAE;IAGN,MAAM,mBAAmB,IAAA,2RAAW;wDAChC,OACI,QACA,QACA,SACA;YAEA,WAAW;YACX,IAAI;gBACA,MAAM,2JAAO,CAAC,gBAAgB,CAC1B,QACA,QACA,SACA;gBAEJ,oRAAK,CAAC,OAAO,CAAC;YAClB,EAAE,OAAO,OAAO;gBACZ,oRAAK,CAAC,KAAK,CACP,iBAAiB,QACX,MAAM,OAAO,GACb;gBAEV,MAAM;YACV,SAAU;gBACN,WAAW;YACf;QACJ;uDACA,EAAE;IAGN,MAAM,eAAe,IAAA,2RAAW;oDAC5B,OAAO,QAAgB;YACnB,WAAW;YACX,IAAI;gBACA,MAAM,2JAAO,CAAC,YAAY,CAAC,QAAQ;gBACnC,oRAAK,CAAC,OAAO,CAAC;YAClB,EAAE,OAAO,OAAO;gBACZ,oRAAK,CAAC,KAAK,CACP,iBAAiB,QACX,MAAM,OAAO,GACb;gBAEV,MAAM;YACV,SAAU;gBACN,WAAW;YACf;QACJ;mDACA,EAAE;IAGN,OAAO;QACH;QACA;QACA;QACA;QACA;QACA;QACA;IACJ;AACJ;GA5JgB"}},
    {"offset": {"line": 532, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/shop/hooks/use-user-shops.ts"],"sourcesContent":["import { useEffect, useState } from 'react'\nimport { shopMembersRepo, shopsRepo } from '@/lib/db'\nimport type { UserShopAccess } from '../types'\n\nexport function useUserShops(userId: string | undefined) {\n    const [userShops, setUserShops] = useState<UserShopAccess[]>([])\n    const [loading, setLoading] = useState(true)\n    const [error, setError] = useState<string | null>(null)\n\n    useEffect(() => {\n        if (!userId) {\n            setUserShops([])\n            setLoading(false)\n            return\n        }\n\n        const unsubscribe = shopMembersRepo.subscribe(async (members) => {\n            try {\n                const userMembers = members.filter((m) => m.userId === userId)\n                const shops: UserShopAccess[] = []\n\n                for (const member of userMembers) {\n                    const shop = await shopsRepo.get({ id: member.shopId })\n                    if (shop) {\n                        shops.push({\n                            shopId: shop.id,\n                            shopName: shop.shopname,\n                            role: member.role,\n                            permissions: member.permissions,\n                            isOwner: shop.created_userId === userId,\n                            logoUrl: shop.logo_url,\n                            shopCategory: shop.shop_category,\n                            shopAddress: shop.shop_address\n                        })\n                    }\n                }\n\n                setUserShops(shops)\n                setError(null)\n            } catch (err) {\n                setError(err instanceof Error ? err.message : 'Unknown error')\n            } finally {\n                setLoading(false)\n            }\n        })\n\n        return () => unsubscribe()\n    }, [userId])\n\n    return {\n        userShops,\n        loading,\n        error,\n        refreshShops: () => {}\n    }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;;AAGO,SAAS,aAAa,MAA0B;;IACnD,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,wRAAQ,EAAmB,EAAE;IAC/D,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,wRAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,wRAAQ,EAAgB;IAElD,IAAA,yRAAS;kCAAC;YACN,IAAI,CAAC,QAAQ;gBACT,aAAa,EAAE;gBACf,WAAW;gBACX;YACJ;YAEA,MAAM,cAAc,+JAAe,CAAC,SAAS;sDAAC,OAAO;oBACjD,IAAI;wBACA,MAAM,cAAc,QAAQ,MAAM;8EAAC,CAAC,IAAM,EAAE,MAAM,KAAK;;wBACvD,MAAM,QAA0B,EAAE;wBAElC,KAAK,MAAM,UAAU,YAAa;4BAC9B,MAAM,OAAO,MAAM,yJAAS,CAAC,GAAG,CAAC;gCAAE,IAAI,OAAO,MAAM;4BAAC;4BACrD,IAAI,MAAM;gCACN,MAAM,IAAI,CAAC;oCACP,QAAQ,KAAK,EAAE;oCACf,UAAU,KAAK,QAAQ;oCACvB,MAAM,OAAO,IAAI;oCACjB,aAAa,OAAO,WAAW;oCAC/B,SAAS,KAAK,cAAc,KAAK;oCACjC,SAAS,KAAK,QAAQ;oCACtB,cAAc,KAAK,aAAa;oCAChC,aAAa,KAAK,YAAY;gCAClC;4BACJ;wBACJ;wBAEA,aAAa;wBACb,SAAS;oBACb,EAAE,OAAO,KAAK;wBACV,SAAS,eAAe,QAAQ,IAAI,OAAO,GAAG;oBAClD,SAAU;wBACN,WAAW;oBACf;gBACJ;;YAEA;0CAAO,IAAM;;QACjB;iCAAG;QAAC;KAAO;IAEX,OAAO;QACH;QACA;QACA;QACA,cAAc,KAAO;IACzB;AACJ;GAnDgB"}},
    {"offset": {"line": 608, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/shop/hooks/use-current-shop.ts"],"sourcesContent":["import { useState, useEffect, useCallback } from 'react'\nimport { shopStore, STORE_KEYS, storeHelpers } from '@/lib/store'\nimport type { UserShopAccess } from '../types'\n\nconst SHOP_ACCESS_HISTORY_KEY = 'shop_access_history'\n\nexport function useCurrentShop(userShops: UserShopAccess[]) {\n    const [currentShop, setCurrentShopState] = useState<UserShopAccess | null>(\n        null\n    )\n\n    useEffect(() => {\n        if (!currentShop && userShops.length > 0) {\n            storeHelpers\n                .get<string>(shopStore, STORE_KEYS.CURRENT_SHOP_ID)\n                .then((savedShopId) => {\n                    const shop = savedShopId\n                        ? userShops.find((s) => s.shopId === savedShopId)\n                        : userShops[0]\n                    if (shop) setCurrentShopState(shop)\n                })\n        }\n    }, [userShops, currentShop])\n\n    useEffect(() => {\n        if (currentShop && userShops.length > 0) {\n            const updatedShop = userShops.find(\n                (s) => s.shopId === currentShop.shopId\n            )\n            if (\n                updatedShop &&\n                JSON.stringify(updatedShop) !== JSON.stringify(currentShop)\n            ) {\n                setCurrentShopState(updatedShop)\n            }\n        }\n    }, [userShops, currentShop])\n\n    useEffect(() => {\n        if (currentShop) {\n            storeHelpers.set(\n                shopStore,\n                STORE_KEYS.CURRENT_SHOP_ID,\n                currentShop.shopId\n            )\n            updateShopAccessHistory(currentShop.shopId)\n        }\n    }, [currentShop])\n\n    const setCurrentShop = useCallback((shop: UserShopAccess | null) => {\n        setCurrentShopState(shop)\n    }, [])\n\n    return {\n        currentShop,\n        setCurrentShop\n    }\n}\n\nfunction updateShopAccessHistory(shopId: string) {\n    storeHelpers\n        .get<Record<string, number>>(shopStore, SHOP_ACCESS_HISTORY_KEY)\n        .then((history) => {\n            const updated = { ...history, [shopId]: Date.now() }\n            storeHelpers.set(shopStore, SHOP_ACCESS_HISTORY_KEY, updated)\n        })\n}\n\nexport async function getShopAccessHistory(): Promise<Record<string, number>> {\n    return (\n        (await storeHelpers.get<Record<string, number>>(\n            shopStore,\n            SHOP_ACCESS_HISTORY_KEY\n        )) || {}\n    )\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;;AAGA,MAAM,0BAA0B;AAEzB,SAAS,eAAe,SAA2B;;IACtD,MAAM,CAAC,aAAa,oBAAoB,GAAG,IAAA,wRAAQ,EAC/C;IAGJ,IAAA,yRAAS;oCAAC;YACN,IAAI,CAAC,eAAe,UAAU,MAAM,GAAG,GAAG;gBACtC,sIAAY,CACP,GAAG,CAAS,mIAAS,EAAE,oIAAU,CAAC,eAAe,EACjD,IAAI;gDAAC,CAAC;wBACH,MAAM,OAAO,cACP,UAAU,IAAI;wDAAC,CAAC,IAAM,EAAE,MAAM,KAAK;yDACnC,SAAS,CAAC,EAAE;wBAClB,IAAI,MAAM,oBAAoB;oBAClC;;YACR;QACJ;mCAAG;QAAC;QAAW;KAAY;IAE3B,IAAA,yRAAS;oCAAC;YACN,IAAI,eAAe,UAAU,MAAM,GAAG,GAAG;gBACrC,MAAM,cAAc,UAAU,IAAI;4DAC9B,CAAC,IAAM,EAAE,MAAM,KAAK,YAAY,MAAM;;gBAE1C,IACI,eACA,KAAK,SAAS,CAAC,iBAAiB,KAAK,SAAS,CAAC,cACjD;oBACE,oBAAoB;gBACxB;YACJ;QACJ;mCAAG;QAAC;QAAW;KAAY;IAE3B,IAAA,yRAAS;oCAAC;YACN,IAAI,aAAa;gBACb,sIAAY,CAAC,GAAG,CACZ,mIAAS,EACT,oIAAU,CAAC,eAAe,EAC1B,YAAY,MAAM;gBAEtB,wBAAwB,YAAY,MAAM;YAC9C;QACJ;mCAAG;QAAC;KAAY;IAEhB,MAAM,iBAAiB,IAAA,2RAAW;sDAAC,CAAC;YAChC,oBAAoB;QACxB;qDAAG,EAAE;IAEL,OAAO;QACH;QACA;IACJ;AACJ;GAnDgB;AAqDhB,SAAS,wBAAwB,MAAc;IAC3C,sIAAY,CACP,GAAG,CAAyB,mIAAS,EAAE,yBACvC,IAAI,CAAC,CAAC;QACH,MAAM,UAAU;YAAE,GAAG,OAAO;YAAE,CAAC,OAAO,EAAE,KAAK,GAAG;QAAG;QACnD,sIAAY,CAAC,GAAG,CAAC,mIAAS,EAAE,yBAAyB;IACzD;AACR;AAEO,eAAe;IAClB,OACI,AAAC,MAAM,sIAAY,CAAC,GAAG,CACnB,mIAAS,EACT,4BACE,CAAC;AAEf"}},
    {"offset": {"line": 695, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/shop/hooks/use-shop-members.ts"],"sourcesContent":["import { useEffect, useState } from 'react'\nimport { shopMembersRepo, usersRepo } from '@/lib/db'\nimport type { ShopMemberWithUser } from '../types'\n\nexport function useShopMembers(shopId: string | undefined) {\n    const [members, setMembers] = useState<ShopMemberWithUser[]>([])\n    const [loading, setLoading] = useState(true)\n    const [error, setError] = useState<string | null>(null)\n\n    useEffect(() => {\n        if (!shopId) {\n            setMembers([])\n            setLoading(false)\n            return\n        }\n\n        const unsubscribe = shopMembersRepo.subscribe(async (allMembers) => {\n            try {\n                const shopMembers = allMembers.filter(\n                    (m) => m.shopId === shopId\n                )\n                const membersWithUser: ShopMemberWithUser[] = []\n\n                for (const member of shopMembers) {\n                    const user = await usersRepo.get({ id: member.userId })\n                    membersWithUser.push({\n                        ...member,\n                        email: user?.email,\n                        displayName: user?.displayName,\n                        photoURL: user?.photoURL\n                    })\n                }\n\n                setMembers(membersWithUser)\n                setError(null)\n            } catch (err) {\n                setError(err instanceof Error ? err.message : 'Unknown error')\n            } finally {\n                setLoading(false)\n            }\n        })\n\n        return () => unsubscribe()\n    }, [shopId])\n\n    return {\n        members,\n        loading,\n        error,\n        refreshMembers: () => {}\n    }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;;AAGO,SAAS,eAAe,MAA0B;;IACrD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,wRAAQ,EAAuB,EAAE;IAC/D,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,wRAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,wRAAQ,EAAgB;IAElD,IAAA,yRAAS;oCAAC;YACN,IAAI,CAAC,QAAQ;gBACT,WAAW,EAAE;gBACb,WAAW;gBACX;YACJ;YAEA,MAAM,cAAc,+JAAe,CAAC,SAAS;wDAAC,OAAO;oBACjD,IAAI;wBACA,MAAM,cAAc,WAAW,MAAM;gFACjC,CAAC,IAAM,EAAE,MAAM,KAAK;;wBAExB,MAAM,kBAAwC,EAAE;wBAEhD,KAAK,MAAM,UAAU,YAAa;4BAC9B,MAAM,OAAO,MAAM,yJAAS,CAAC,GAAG,CAAC;gCAAE,IAAI,OAAO,MAAM;4BAAC;4BACrD,gBAAgB,IAAI,CAAC;gCACjB,GAAG,MAAM;gCACT,OAAO,MAAM;gCACb,aAAa,MAAM;gCACnB,UAAU,MAAM;4BACpB;wBACJ;wBAEA,WAAW;wBACX,SAAS;oBACb,EAAE,OAAO,KAAK;wBACV,SAAS,eAAe,QAAQ,IAAI,OAAO,GAAG;oBAClD,SAAU;wBACN,WAAW;oBACf;gBACJ;;YAEA;4CAAO,IAAM;;QACjB;mCAAG;QAAC;KAAO;IAEX,OAAO;QACH;QACA;QACA;QACA,gBAAgB,KAAO;IAC3B;AACJ;GA/CgB"}},
    {"offset": {"line": 765, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/shop/hooks/use-shop-context.ts"],"sourcesContent":["import { createContext, useContext } from 'react'\nimport type { UserShopAccess, Shop } from '../types'\n\nexport interface ShopContextType {\n    userShops: UserShopAccess[]\n    currentShop: UserShopAccess | null\n    setCurrentShop: (shop: UserShopAccess | null) => void\n    loading: boolean\n    error: string | null\n    refreshShops: () => Promise<void>\n    createShop: (\n        shopData: Omit<\n            Shop,\n            'id' | 'created_userId' | 'createdAt' | 'updatedAt' | 'status'\n        >\n    ) => Promise<void>\n}\n\nexport const ShopContext = createContext<ShopContextType | null>(null)\n\nexport function useShopContext() {\n    const context = useContext(ShopContext)\n    if (!context) {\n        throw new Error('useShopContext must be used within a ShopProvider')\n    }\n    return context\n}\n"],"names":[],"mappings":";;;;;;AAAA;;;AAkBO,MAAM,4BAAc,IAAA,6RAAa,EAAyB;AAE1D,SAAS;;IACZ,MAAM,UAAU,IAAA,0RAAU,EAAC;IAC3B,IAAI,CAAC,SAAS;QACV,MAAM,IAAI,MAAM;IACpB;IACA,OAAO;AACX;GANgB"}},
    {"offset": {"line": 791, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/shop/hooks/index.ts"],"sourcesContent":["export * from './use-shop-actions'\nexport * from './use-user-shops'\nexport * from './use-current-shop'\nexport * from './use-shop-members'\nexport * from './use-shop-context'\n"],"names":[],"mappings":";AAAA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 809, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/shop/types/index.ts"],"sourcesContent":["export enum ShopRole {\n    OWNER = 'owner',\n    ADMIN = 'admin',\n    MANAGER = 'manager',\n    STAFF = 'staff',\n    VIEWER = 'viewer'\n}\n\nexport enum ShopStatus {\n    ACTIVE = 'active',\n    INACTIVE = 'inactive',\n    SUSPENDED = 'suspended'\n}\n\nexport interface ShopPermission {\n    resource: string\n    actions: ('read' | 'write' | 'delete')[]\n}\n\nexport interface Shop {\n    id: string\n    shopname: string\n    logo_url?: string\n    phone_number?: string\n    email?: string\n    shop_type?: string\n    shop_category?: string\n    shop_address?: string\n    signature?: string\n    status: ShopStatus\n    created_userId: string\n    createdAt: Date\n    updatedAt: Date\n}\n\nexport interface ShopMember {\n    id: string\n    shopId: string\n    userId: string\n    role: ShopRole\n    permissions: ShopPermission[]\n    invitedBy: string\n    joinedAt: Date\n    createdAt: Date\n    updatedAt: Date\n}\n\nexport interface ShopMemberWithUser extends ShopMember {\n    email?: string\n    displayName?: string\n    photoURL?: string\n}\n\nexport interface UserShopAccess {\n    shopId: string\n    shopName: string\n    role: ShopRole\n    permissions: ShopPermission[]\n    isOwner: boolean\n    logoUrl?: string\n    shopCategory?: string\n    shopAddress?: string\n    lastAccessedAt?: number\n}\n\nexport interface CreateShopData {\n    shopname: string\n    logo_url?: string\n    phone_number?: string\n    email?: string\n    shop_type?: string\n    shop_category?: string\n    shop_address?: string\n    signature?: string\n}\n"],"names":[],"mappings":";;;;;;AAAO,IAAA,AAAK,kCAAA;;;;;;WAAA;;AAQL,IAAA,AAAK,oCAAA;;;;WAAA"}},
    {"offset": {"line": 836, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/auth/services/utils.ts"],"sourcesContent":["export const generateOTP = (): string => {\n    return Math.floor(100000 + Math.random() * 900000).toString()\n}\n\nexport const hashString = async (str: string): Promise<string> => {\n    const encoder = new TextEncoder()\n    const data = encoder.encode(str)\n    const hashBuffer = await crypto.subtle.digest('SHA-256', data)\n    const hashArray = Array.from(new Uint8Array(hashBuffer))\n    return hashArray.map((b) => b.toString(16).padStart(2, '0')).join('')\n}\n\nexport const getDeviceId = async (): Promise<string> => {\n    let deviceId = localStorage.getItem('device_token')\n    if (!deviceId) {\n        deviceId = crypto.randomUUID()\n        localStorage.setItem('device_token', deviceId)\n    }\n    return deviceId\n}\n"],"names":[],"mappings":";;;;;;;;AAAO,MAAM,cAAc;IACvB,OAAO,KAAK,KAAK,CAAC,SAAS,KAAK,MAAM,KAAK,QAAQ,QAAQ;AAC/D;AAEO,MAAM,aAAa,OAAO;IAC7B,MAAM,UAAU,IAAI;IACpB,MAAM,OAAO,QAAQ,MAAM,CAAC;IAC5B,MAAM,aAAa,MAAM,OAAO,MAAM,CAAC,MAAM,CAAC,WAAW;IACzD,MAAM,YAAY,MAAM,IAAI,CAAC,IAAI,WAAW;IAC5C,OAAO,UAAU,GAAG,CAAC,CAAC,IAAM,EAAE,QAAQ,CAAC,IAAI,QAAQ,CAAC,GAAG,MAAM,IAAI,CAAC;AACtE;AAEO,MAAM,cAAc;IACvB,IAAI,WAAW,aAAa,OAAO,CAAC;IACpC,IAAI,CAAC,UAAU;QACX,WAAW,OAAO,UAAU;QAC5B,aAAa,OAAO,CAAC,gBAAgB;IACzC;IACA,OAAO;AACX"}},
    {"offset": {"line": 869, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/auth/services/constants.ts"],"sourcesContent":["export const OTP_EXPIRY_MINUTES = 10\nexport const OTP_MAX_ATTEMPTS = 3\nexport const DEVICE_TRUST_DAYS = 30\n"],"names":[],"mappings":";;;;;;;;AAAO,MAAM,qBAAqB;AAC3B,MAAM,mBAAmB;AACzB,MAAM,oBAAoB"}},
    {"offset": {"line": 887, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/auth/services/otp.service.ts"],"sourcesContent":["import { otpsRepo } from '@/lib/db'\nimport { generateOTP, hashString } from './utils'\nimport { OTP_EXPIRY_MINUTES } from './constants'\nimport { sendSMS, sendEmail } from '@/lib/tauri'\n\nexport const sendOTP = async (\n    identifier: string,\n    uid: string\n): Promise<void> => {\n    const otp = generateOTP()\n    const otpHash = await hashString(otp)\n    const now = new Date()\n\n    await otpsRepo.set({\n        id: crypto.randomUUID(),\n        userId: uid,\n        code: otpHash,\n        expiresAt: new Date(Date.now() + OTP_EXPIRY_MINUTES * 60 * 1000),\n        verified: false,\n        createdAt: now\n    })\n\n    const isEmail = identifier.includes('@')\n    const apiKey = isEmail\n        ? process.env.NEXT_PUBLIC_EMAIL_API_KEY\n        : process.env.NEXT_PUBLIC_SMS_API_KEY\n    if (!apiKey)\n        throw new Error(`${isEmail ? 'Email' : 'SMS'} API key not configured`)\n\n    if (isEmail) {\n        await sendEmail(\n            apiKey,\n            identifier,\n            'Your OTP Code',\n            `<p>Your OTP is: <strong>${otp}</strong></p><p>Valid for ${OTP_EXPIRY_MINUTES} minutes.</p>`\n        )\n    } else {\n        await sendSMS(\n            apiKey,\n            identifier,\n            `Your OTP is: ${otp}. Valid for ${OTP_EXPIRY_MINUTES} minutes.`\n        )\n    }\n}\n\nexport const verifyOTP = async (uid: string, otp: string): Promise<void> => {\n    const otps = await otpsRepo.list()\n    const now = new Date()\n    const userOtps = otps\n        .filter((o) => o.userId === uid && !o.verified)\n        .sort(\n            (a, b) =>\n                new Date(b.createdAt).getTime() -\n                new Date(a.createdAt).getTime()\n        )\n\n    if (userOtps.length === 0) throw new Error('Invalid OTP')\n\n    const cleanOtp = otp.trim()\n    const otpHash = await hashString(cleanOtp)\n    const otpData = userOtps.find((o) => o.code === otpHash)\n\n    if (!otpData) throw new Error('Invalid OTP')\n    if (now > new Date(otpData.expiresAt)) throw new Error('OTP expired')\n\n    await otpsRepo.set({ ...otpData, verified: true })\n}\n"],"names":[],"mappings":";;;;;;AAyBU;AAzBV;AACA;AACA;AACA;;;;;AAEO,MAAM,UAAU,OACnB,YACA;IAEA,MAAM,MAAM,IAAA,8JAAW;IACvB,MAAM,UAAU,MAAM,IAAA,6JAAU,EAAC;IACjC,MAAM,MAAM,IAAI;IAEhB,MAAM,wJAAQ,CAAC,GAAG,CAAC;QACf,IAAI,OAAO,UAAU;QACrB,QAAQ;QACR,MAAM;QACN,WAAW,IAAI,KAAK,KAAK,GAAG,KAAK,yKAAkB,GAAG,KAAK;QAC3D,UAAU;QACV,WAAW;IACf;IAEA,MAAM,UAAU,WAAW,QAAQ,CAAC;IACpC,MAAM,SAAS;IAGf,IAAI,CAAC,QACD,MAAM,IAAI,MAAM,GAAG,UAAU,UAAU,MAAM,uBAAuB,CAAC;IAEzE,IAAI,SAAS;QACT,MAAM,IAAA,mIAAS,EACX,QACA,YACA,iBACA,CAAC,wBAAwB,EAAE,IAAI,0BAA0B,EAAE,yKAAkB,CAAC,aAAa,CAAC;IAEpG,OAAO;QACH,MAAM,IAAA,iIAAO,EACT,QACA,YACA,CAAC,aAAa,EAAE,IAAI,YAAY,EAAE,yKAAkB,CAAC,SAAS,CAAC;IAEvE;AACJ;AAEO,MAAM,YAAY,OAAO,KAAa;IACzC,MAAM,OAAO,MAAM,wJAAQ,CAAC,IAAI;IAChC,MAAM,MAAM,IAAI;IAChB,MAAM,WAAW,KACZ,MAAM,CAAC,CAAC,IAAM,EAAE,MAAM,KAAK,OAAO,CAAC,EAAE,QAAQ,EAC7C,IAAI,CACD,CAAC,GAAG,IACA,IAAI,KAAK,EAAE,SAAS,EAAE,OAAO,KAC7B,IAAI,KAAK,EAAE,SAAS,EAAE,OAAO;IAGzC,IAAI,SAAS,MAAM,KAAK,GAAG,MAAM,IAAI,MAAM;IAE3C,MAAM,WAAW,IAAI,IAAI;IACzB,MAAM,UAAU,MAAM,IAAA,6JAAU,EAAC;IACjC,MAAM,UAAU,SAAS,IAAI,CAAC,CAAC,IAAM,EAAE,IAAI,KAAK;IAEhD,IAAI,CAAC,SAAS,MAAM,IAAI,MAAM;IAC9B,IAAI,MAAM,IAAI,KAAK,QAAQ,SAAS,GAAG,MAAM,IAAI,MAAM;IAEvD,MAAM,wJAAQ,CAAC,GAAG,CAAC;QAAE,GAAG,OAAO;QAAE,UAAU;IAAK;AACpD"}},
    {"offset": {"line": 945, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/auth/services/user.service.ts"],"sourcesContent":["import { usersRepo, getStorageInstance } from '@/lib/db'\nimport type { User } from '../types'\nimport { ref, uploadBytes, getDownloadURL } from 'firebase/storage'\n\nconst normalizePhone = (phone: string): string => {\n    return phone.replace(/\\D/g, '')\n}\n\nexport const ensureUserExists = async (\n    identifier: string,\n    type: 'email' | 'phone'\n): Promise<string> => {\n    const uid = crypto.randomUUID()\n    const now = new Date()\n    const existingUsers = await usersRepo.list()\n    const user = existingUsers.find((u) => {\n        if (type === 'email') return u.email === identifier\n        return u.phone && normalizePhone(u.phone) === normalizePhone(identifier)\n    })\n    if (user) return user.id\n\n    await usersRepo.set({\n        id: uid,\n        [type]: identifier,\n        createdAt: now,\n        lastLoginAt: now\n    })\n    return uid\n}\n\nexport const getUserById = async (uid: string): Promise<User | null> => {\n    console.log({ uid });\n    const userData = await usersRepo.get({ id: uid })\n    console.log({ userData });\n    if (!userData) return null\n    return {\n        uid: userData.id,\n        ...userData,\n        lastLoginAt: userData.lastLoginAt || userData.createdAt\n    }\n}\n\nexport const updateUserLastLogin = async (uid: string): Promise<void> => {\n    const user = await usersRepo.get({ id: uid })\n    if (user) await usersRepo.set({ ...user, lastLoginAt: new Date() })\n}\n\nexport const updateUserProfile = async (\n    uid: string,\n    name?: string,\n    photo?: string\n): Promise<void> => {\n    const user = await usersRepo.get({ id: uid })\n    if (!user) throw new Error('User not found')\n    await usersRepo.set({\n        ...user,\n        ...(name !== undefined && { name }),\n        ...(photo !== undefined && { photo })\n    })\n}\n\nexport const uploadUserPhoto = async (\n    uid: string,\n    file: File\n): Promise<string> => {\n    const storage = getStorageInstance()\n    const storageRef = ref(storage, `users/${uid}/photo.jpg`)\n    await uploadBytes(storageRef, file)\n    return getDownloadURL(storageRef)\n}\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;AAEA;AAAA;;;AAEA,MAAM,iBAAiB,CAAC;IACpB,OAAO,MAAM,OAAO,CAAC,OAAO;AAChC;AAEO,MAAM,mBAAmB,OAC5B,YACA;IAEA,MAAM,MAAM,OAAO,UAAU;IAC7B,MAAM,MAAM,IAAI;IAChB,MAAM,gBAAgB,MAAM,yJAAS,CAAC,IAAI;IAC1C,MAAM,OAAO,cAAc,IAAI,CAAC,CAAC;QAC7B,IAAI,SAAS,SAAS,OAAO,EAAE,KAAK,KAAK;QACzC,OAAO,EAAE,KAAK,IAAI,eAAe,EAAE,KAAK,MAAM,eAAe;IACjE;IACA,IAAI,MAAM,OAAO,KAAK,EAAE;IAExB,MAAM,yJAAS,CAAC,GAAG,CAAC;QAChB,IAAI;QACJ,CAAC,KAAK,EAAE;QACR,WAAW;QACX,aAAa;IACjB;IACA,OAAO;AACX;AAEO,MAAM,cAAc,OAAO;IAC9B,QAAQ,GAAG,CAAC;QAAE;IAAI;IAClB,MAAM,WAAW,MAAM,yJAAS,CAAC,GAAG,CAAC;QAAE,IAAI;IAAI;IAC/C,QAAQ,GAAG,CAAC;QAAE;IAAS;IACvB,IAAI,CAAC,UAAU,OAAO;IACtB,OAAO;QACH,KAAK,SAAS,EAAE;QAChB,GAAG,QAAQ;QACX,aAAa,SAAS,WAAW,IAAI,SAAS,SAAS;IAC3D;AACJ;AAEO,MAAM,sBAAsB,OAAO;IACtC,MAAM,OAAO,MAAM,yJAAS,CAAC,GAAG,CAAC;QAAE,IAAI;IAAI;IAC3C,IAAI,MAAM,MAAM,yJAAS,CAAC,GAAG,CAAC;QAAE,GAAG,IAAI;QAAE,aAAa,IAAI;IAAO;AACrE;AAEO,MAAM,oBAAoB,OAC7B,KACA,MACA;IAEA,MAAM,OAAO,MAAM,yJAAS,CAAC,GAAG,CAAC;QAAE,IAAI;IAAI;IAC3C,IAAI,CAAC,MAAM,MAAM,IAAI,MAAM;IAC3B,MAAM,yJAAS,CAAC,GAAG,CAAC;QAChB,GAAG,IAAI;QACP,GAAI,SAAS,aAAa;YAAE;QAAK,CAAC;QAClC,GAAI,UAAU,aAAa;YAAE;QAAM,CAAC;IACxC;AACJ;AAEO,MAAM,kBAAkB,OAC3B,KACA;IAEA,MAAM,UAAU,IAAA,kKAAkB;IAClC,MAAM,aAAa,IAAA,8QAAG,EAAC,SAAS,CAAC,MAAM,EAAE,IAAI,UAAU,CAAC;IACxD,MAAM,IAAA,sRAAW,EAAC,YAAY;IAC9B,OAAO,IAAA,yRAAc,EAAC;AAC1B"}},
    {"offset": {"line": 1036, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/auth/services/device.service.ts"],"sourcesContent":["import { devicesRepo } from '@/lib/db'\nimport type { DeviceData } from '@/lib/db/schema'\nimport { getDeviceId, hashString } from './utils'\nimport { DEVICE_TRUST_DAYS } from './constants'\n\nexport const trustDevice = async (userId: string): Promise<void> => {\n    const deviceId = await getDeviceId()\n    const deviceTokenHash = await hashString(deviceId)\n    const now = new Date()\n    const devices = await devicesRepo.list()\n\n    // Remove any existing device entries for this device (from other users)\n    const otherUserDevices = devices.filter(\n        (d) => d.deviceId === deviceTokenHash && d.userId !== userId\n    )\n    for (const device of otherUserDevices) {\n        await devicesRepo.delete({ id: device.id })\n    }\n\n    // Check if device already exists for this user\n    const existingDevice = devices.find(\n        (d) => d.userId === userId && d.deviceId === deviceTokenHash\n    )\n\n    if (existingDevice) {\n        // Update existing device\n        await devicesRepo.set({\n            ...existingDevice,\n            trusted: true,\n            lastUsed: now,\n            expiresAt: new Date(\n                Date.now() + DEVICE_TRUST_DAYS * 24 * 60 * 60 * 1000\n            )\n        })\n    } else {\n        // Create new device entry\n        await devicesRepo.set({\n            id: crypto.randomUUID(),\n            userId,\n            deviceId: deviceTokenHash,\n            deviceName: navigator.userAgent,\n            trusted: true,\n            lastUsed: now,\n            expiresAt: new Date(\n                Date.now() + DEVICE_TRUST_DAYS * 24 * 60 * 60 * 1000\n            ),\n            createdAt: now\n        })\n    }\n}\n\nexport const verifyTrustedDevice = async (): Promise<string | null> => {\n    const deviceId = await getDeviceId()\n    const deviceTokenHash = await hashString(deviceId)\n    const devices = await devicesRepo.list()\n    const device = devices.find(\n        (d: DeviceData) => d.deviceId === deviceTokenHash && d.trusted\n    )\n\n    if (!device) return null\n    if (new Date() > new Date(device.expiresAt)) return null\n\n    await devicesRepo.set({ ...device, lastUsed: new Date() })\n    return device.userId\n}\n\nexport const revokeDevice = async (userId: string): Promise<void> => {\n    const deviceId = await getDeviceId()\n    const deviceTokenHash = await hashString(deviceId)\n    const devices = await devicesRepo.list()\n    const device = devices.find(\n        (d) => d.userId === userId && d.deviceId === deviceTokenHash\n    )\n    if (device) await devicesRepo.delete({ id: device.id })\n}\n\nexport const clearDeviceSession = async (): Promise<void> => {\n    localStorage.removeItem('device_token')\n}\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AAEA;AACA;;;;AAEO,MAAM,cAAc,OAAO;IAC9B,MAAM,WAAW,MAAM,IAAA,8JAAW;IAClC,MAAM,kBAAkB,MAAM,IAAA,6JAAU,EAAC;IACzC,MAAM,MAAM,IAAI;IAChB,MAAM,UAAU,MAAM,2JAAW,CAAC,IAAI;IAEtC,wEAAwE;IACxE,MAAM,mBAAmB,QAAQ,MAAM,CACnC,CAAC,IAAM,EAAE,QAAQ,KAAK,mBAAmB,EAAE,MAAM,KAAK;IAE1D,KAAK,MAAM,UAAU,iBAAkB;QACnC,MAAM,2JAAW,CAAC,MAAM,CAAC;YAAE,IAAI,OAAO,EAAE;QAAC;IAC7C;IAEA,+CAA+C;IAC/C,MAAM,iBAAiB,QAAQ,IAAI,CAC/B,CAAC,IAAM,EAAE,MAAM,KAAK,UAAU,EAAE,QAAQ,KAAK;IAGjD,IAAI,gBAAgB;QAChB,yBAAyB;QACzB,MAAM,2JAAW,CAAC,GAAG,CAAC;YAClB,GAAG,cAAc;YACjB,SAAS;YACT,UAAU;YACV,WAAW,IAAI,KACX,KAAK,GAAG,KAAK,wKAAiB,GAAG,KAAK,KAAK,KAAK;QAExD;IACJ,OAAO;QACH,0BAA0B;QAC1B,MAAM,2JAAW,CAAC,GAAG,CAAC;YAClB,IAAI,OAAO,UAAU;YACrB;YACA,UAAU;YACV,YAAY,UAAU,SAAS;YAC/B,SAAS;YACT,UAAU;YACV,WAAW,IAAI,KACX,KAAK,GAAG,KAAK,wKAAiB,GAAG,KAAK,KAAK,KAAK;YAEpD,WAAW;QACf;IACJ;AACJ;AAEO,MAAM,sBAAsB;IAC/B,MAAM,WAAW,MAAM,IAAA,8JAAW;IAClC,MAAM,kBAAkB,MAAM,IAAA,6JAAU,EAAC;IACzC,MAAM,UAAU,MAAM,2JAAW,CAAC,IAAI;IACtC,MAAM,SAAS,QAAQ,IAAI,CACvB,CAAC,IAAkB,EAAE,QAAQ,KAAK,mBAAmB,EAAE,OAAO;IAGlE,IAAI,CAAC,QAAQ,OAAO;IACpB,IAAI,IAAI,SAAS,IAAI,KAAK,OAAO,SAAS,GAAG,OAAO;IAEpD,MAAM,2JAAW,CAAC,GAAG,CAAC;QAAE,GAAG,MAAM;QAAE,UAAU,IAAI;IAAO;IACxD,OAAO,OAAO,MAAM;AACxB;AAEO,MAAM,eAAe,OAAO;IAC/B,MAAM,WAAW,MAAM,IAAA,8JAAW;IAClC,MAAM,kBAAkB,MAAM,IAAA,6JAAU,EAAC;IACzC,MAAM,UAAU,MAAM,2JAAW,CAAC,IAAI;IACtC,MAAM,SAAS,QAAQ,IAAI,CACvB,CAAC,IAAM,EAAE,MAAM,KAAK,UAAU,EAAE,QAAQ,KAAK;IAEjD,IAAI,QAAQ,MAAM,2JAAW,CAAC,MAAM,CAAC;QAAE,IAAI,OAAO,EAAE;IAAC;AACzD;AAEO,MAAM,qBAAqB;IAC9B,aAAa,UAAU,CAAC;AAC5B"}},
    {"offset": {"line": 1120, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/auth/services/session.service.ts"],"sourcesContent":["import type { User } from '../types'\n\nlet currentUser: User | null = null\nconst listeners: ((user: User | null) => void)[] = []\n\nexport const setCurrentUser = (user: User | null): void => {\n    currentUser = user\n    listeners.forEach((listener) => listener(user))\n    if (user) {\n        localStorage.setItem('cached_user', JSON.stringify(user))\n    } else {\n        localStorage.removeItem('cached_user')\n    }\n}\n\nexport const getCurrentUser = (): User | null => {\n    return currentUser\n}\n\nexport const onAuthStateChange = (\n    callback: (user: User | null) => void\n): (() => void) => {\n    listeners.push(callback)\n    return () => {\n        const index = listeners.indexOf(callback)\n        if (index > -1) listeners.splice(index, 1)\n    }\n}\n\nexport const initSession = async (): Promise<User | null> => {\n    const cached = localStorage.getItem('cached_user')\n    if (cached) {\n        try {\n            currentUser = JSON.parse(cached)\n            return currentUser\n        } catch {\n            return null\n        }\n    }\n    return null\n}\n\nexport const initAuth = async (): Promise<void> => {\n    // Initialize auth state - placeholder for future auth initialization logic\n}\n"],"names":[],"mappings":";;;;;;;;;;;;AAEA,IAAI,cAA2B;AAC/B,MAAM,YAA6C,EAAE;AAE9C,MAAM,iBAAiB,CAAC;IAC3B,cAAc;IACd,UAAU,OAAO,CAAC,CAAC,WAAa,SAAS;IACzC,IAAI,MAAM;QACN,aAAa,OAAO,CAAC,eAAe,KAAK,SAAS,CAAC;IACvD,OAAO;QACH,aAAa,UAAU,CAAC;IAC5B;AACJ;AAEO,MAAM,iBAAiB;IAC1B,OAAO;AACX;AAEO,MAAM,oBAAoB,CAC7B;IAEA,UAAU,IAAI,CAAC;IACf,OAAO;QACH,MAAM,QAAQ,UAAU,OAAO,CAAC;QAChC,IAAI,QAAQ,CAAC,GAAG,UAAU,MAAM,CAAC,OAAO;IAC5C;AACJ;AAEO,MAAM,cAAc;IACvB,MAAM,SAAS,aAAa,OAAO,CAAC;IACpC,IAAI,QAAQ;QACR,IAAI;YACA,cAAc,KAAK,KAAK,CAAC;YACzB,OAAO;QACX,EAAE,OAAM;YACJ,OAAO;QACX;IACJ;IACA,OAAO;AACX;AAEO,MAAM,WAAW;AACpB,2EAA2E;AAC/E"}},
    {"offset": {"line": 1175, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/auth/services/auth.service.ts"],"sourcesContent":["import type { User } from '../types'\nimport {\n    sendOTP as sendOTPService,\n    verifyOTP as verifyOTPService\n} from './otp.service'\nimport {\n    ensureUserExists,\n    getUserById,\n    updateUserLastLogin\n} from './user.service'\nimport {\n    trustDevice,\n    verifyTrustedDevice,\n    revokeDevice\n} from './device.service'\nimport { setCurrentUser, initSession } from './session.service'\n\nexport const sendOTP = async (\n    identifier: string,\n    type: 'email' | 'phone'\n): Promise<void> => {\n    const uid = await ensureUserExists(identifier, type)\n    await sendOTPService(identifier, uid)\n}\n\nconst normalizePhone = (phone: string): string => {\n    return phone.replace(/\\D/g, '')\n}\n\nexport const verifyOTP = async (\n    identifier: string,\n    otp: string,\n    trustDeviceFlag = true\n): Promise<User> => {\n    const users = await import('@/lib/db').then((m) => m.usersRepo.list())\n    const isEmail = identifier.includes('@')\n    const user = users.find((u) => {\n        if (isEmail) return u.email === identifier\n        return u.phone && normalizePhone(u.phone) === normalizePhone(identifier)\n    })\n    if (!user) throw new Error('User not found')\n\n    await verifyOTPService(user.id, otp)\n    await updateUserLastLogin(user.id)\n\n    if (trustDeviceFlag) await trustDevice(user.id)\n\n    const userData = await getUserById(user.id)\n    if (!userData) throw new Error('Failed to get user data')\n\n    setCurrentUser(userData)\n    return userData\n}\n\nexport const checkDeviceAndLogin = async (\n    identifier: string\n): Promise<User | null> => {\n    const userId = await verifyTrustedDevice()\n    if (!userId) return null\n\n    const user = await getUserById(userId)\n    if (!user) return null\n\n    const isEmail = identifier.includes('@')\n    const matches = isEmail\n        ? user.email === identifier\n        : user.phone &&\n          normalizePhone(user.phone) === normalizePhone(identifier)\n\n    if (!matches) return null\n\n    await updateUserLastLogin(userId)\n    setCurrentUser(user)\n    return user\n}\n\nexport const loginWithTrustedDevice = async (): Promise<User | null> => {\n    const userId = await verifyTrustedDevice()\n    if (!userId) return null\n\n    const user = await getUserById(userId)\n    if (user) {\n        await updateUserLastLogin(userId)\n        setCurrentUser(user)\n    }\n    return user\n}\n\nexport const logout = async (revokeDeviceFlag?: boolean): Promise<void> => {\n    const user = await import('./session.service').then((m) =>\n        m.getCurrentUser()\n    )\n    if (user && revokeDeviceFlag) {\n        await revokeDevice(user.uid)\n    }\n    setCurrentUser(null)\n}\n\nexport const initAuth = async (): Promise<void> => {\n    await initSession()\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;AACA;AAIA;AAKA;AAKA;;;;;AAEO,MAAM,UAAU,OACnB,YACA;IAEA,MAAM,MAAM,MAAM,IAAA,6KAAgB,EAAC,YAAY;IAC/C,MAAM,IAAA,mKAAc,EAAC,YAAY;AACrC;AAEA,MAAM,iBAAiB,CAAC;IACpB,OAAO,MAAM,OAAO,CAAC,OAAO;AAChC;AAEO,MAAM,YAAY,OACrB,YACA,KACA,kBAAkB,IAAI;IAEtB,MAAM,QAAQ,MAAM,iGAAmB,IAAI,CAAC,CAAC,IAAM,EAAE,SAAS,CAAC,IAAI;IACnE,MAAM,UAAU,WAAW,QAAQ,CAAC;IACpC,MAAM,OAAO,MAAM,IAAI,CAAC,CAAC;QACrB,IAAI,SAAS,OAAO,EAAE,KAAK,KAAK;QAChC,OAAO,EAAE,KAAK,IAAI,eAAe,EAAE,KAAK,MAAM,eAAe;IACjE;IACA,IAAI,CAAC,MAAM,MAAM,IAAI,MAAM;IAE3B,MAAM,IAAA,qKAAgB,EAAC,KAAK,EAAE,EAAE;IAChC,MAAM,IAAA,gLAAmB,EAAC,KAAK,EAAE;IAEjC,IAAI,iBAAiB,MAAM,IAAA,0KAAW,EAAC,KAAK,EAAE;IAE9C,MAAM,WAAW,MAAM,IAAA,wKAAW,EAAC,KAAK,EAAE;IAC1C,IAAI,CAAC,UAAU,MAAM,IAAI,MAAM;IAE/B,IAAA,8KAAc,EAAC;IACf,OAAO;AACX;AAEO,MAAM,sBAAsB,OAC/B;IAEA,MAAM,SAAS,MAAM,IAAA,kLAAmB;IACxC,IAAI,CAAC,QAAQ,OAAO;IAEpB,MAAM,OAAO,MAAM,IAAA,wKAAW,EAAC;IAC/B,IAAI,CAAC,MAAM,OAAO;IAElB,MAAM,UAAU,WAAW,QAAQ,CAAC;IACpC,MAAM,UAAU,UACV,KAAK,KAAK,KAAK,aACf,KAAK,KAAK,IACV,eAAe,KAAK,KAAK,MAAM,eAAe;IAEpD,IAAI,CAAC,SAAS,OAAO;IAErB,MAAM,IAAA,gLAAmB,EAAC;IAC1B,IAAA,8KAAc,EAAC;IACf,OAAO;AACX;AAEO,MAAM,yBAAyB;IAClC,MAAM,SAAS,MAAM,IAAA,kLAAmB;IACxC,IAAI,CAAC,QAAQ,OAAO;IAEpB,MAAM,OAAO,MAAM,IAAA,wKAAW,EAAC;IAC/B,IAAI,MAAM;QACN,MAAM,IAAA,gLAAmB,EAAC;QAC1B,IAAA,8KAAc,EAAC;IACnB;IACA,OAAO;AACX;AAEO,MAAM,SAAS,OAAO;IACzB,MAAM,OAAO,MAAM,2HAA4B,IAAI,CAAC,CAAC,IACjD,EAAE,cAAc;IAEpB,IAAI,QAAQ,kBAAkB;QAC1B,MAAM,IAAA,2KAAY,EAAC,KAAK,GAAG;IAC/B;IACA,IAAA,8KAAc,EAAC;AACnB;AAEO,MAAM,WAAW;IACpB,MAAM,IAAA,2KAAW;AACrB"}},
    {"offset": {"line": 1259, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/auth/services/cleanup.service.ts"],"sourcesContent":["import { devicesRepo } from '@/lib/db'\n\nexport const cleanupExpiredDevices = async (userId: string): Promise<void> => {\n    const devices = await devicesRepo.list()\n    const now = new Date()\n    const expiredDevices = devices.filter(\n        (d) => d.userId === userId && d.expiresAt < now\n    )\n    if (expiredDevices.length > 0) {\n        await devicesRepo.batchDelete(expiredDevices)\n    }\n}\n"],"names":[],"mappings":";;;;AAAA;;AAEO,MAAM,wBAAwB,OAAO;IACxC,MAAM,UAAU,MAAM,2JAAW,CAAC,IAAI;IACtC,MAAM,MAAM,IAAI;IAChB,MAAM,iBAAiB,QAAQ,MAAM,CACjC,CAAC,IAAM,EAAE,MAAM,KAAK,UAAU,EAAE,SAAS,GAAG;IAEhD,IAAI,eAAe,MAAM,GAAG,GAAG;QAC3B,MAAM,2JAAW,CAAC,WAAW,CAAC;IAClC;AACJ"}},
    {"offset": {"line": 1280, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/auth/services/storage.service.ts"],"sourcesContent":["import { authStore, STORE_KEYS, storeHelpers } from '@/lib/store'\n\nexport const getLogoutFlag = async (): Promise<boolean> => {\n    return (\n        (await storeHelpers.get<boolean>(authStore, STORE_KEYS.LOGOUT_FLAG)) ??\n        false\n    )\n}\n\nexport const setLogoutFlag = async (): Promise<void> => {\n    await storeHelpers.set(authStore, STORE_KEYS.LOGOUT_FLAG, true)\n}\n\nexport const clearLogoutFlag = async (): Promise<void> => {\n    await storeHelpers.delete(authStore, STORE_KEYS.LOGOUT_FLAG)\n}\n\nexport const saveLastLoginType = async (\n    type: 'email' | 'phone'\n): Promise<void> => {\n    await storeHelpers.set(authStore, STORE_KEYS.LAST_LOGIN_TYPE, type)\n}\n\nexport const getLastLoginType = async (): Promise<'email' | 'phone'> => {\n    return (\n        (await storeHelpers.get<'email' | 'phone'>(\n            authStore,\n            STORE_KEYS.LAST_LOGIN_TYPE\n        )) ?? 'email'\n    )\n}\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;;AAEO,MAAM,gBAAgB;IACzB,OACI,AAAC,MAAM,sIAAY,CAAC,GAAG,CAAU,mIAAS,EAAE,oIAAU,CAAC,WAAW,KAClE;AAER;AAEO,MAAM,gBAAgB;IACzB,MAAM,sIAAY,CAAC,GAAG,CAAC,mIAAS,EAAE,oIAAU,CAAC,WAAW,EAAE;AAC9D;AAEO,MAAM,kBAAkB;IAC3B,MAAM,sIAAY,CAAC,MAAM,CAAC,mIAAS,EAAE,oIAAU,CAAC,WAAW;AAC/D;AAEO,MAAM,oBAAoB,OAC7B;IAEA,MAAM,sIAAY,CAAC,GAAG,CAAC,mIAAS,EAAE,oIAAU,CAAC,eAAe,EAAE;AAClE;AAEO,MAAM,mBAAmB;IAC5B,OACI,AAAC,MAAM,sIAAY,CAAC,GAAG,CACnB,mIAAS,EACT,oIAAU,CAAC,eAAe,KACxB;AAEd"}},
    {"offset": {"line": 1316, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/auth/services/index.ts"],"sourcesContent":["export {\n    sendOTP,\n    verifyOTP,\n    checkDeviceAndLogin,\n    loginWithTrustedDevice,\n    logout,\n    initAuth\n} from './auth.service'\nexport * from './user.service'\nexport * from './device.service'\nexport * from './cleanup.service'\nexport * from './session.service'\nexport * from './storage.service'\nexport * from './constants'\nexport * from './utils'\n"],"names":[],"mappings":";AAAA;AAQA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 1340, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/auth/api/auth.api.ts"],"sourcesContent":["import { User } from '../types'\nimport {\n    sendOTP as sendOTPService,\n    verifyOTP as verifyOTPService,\n    loginWithTrustedDevice,\n    checkDeviceAndLogin as checkDeviceService,\n    logout as logoutService,\n    initAuth as initAuthService\n} from '../services'\n\nexport const authApi = {\n    sendOTP: async (\n        identifier: string,\n        type: 'email' | 'phone'\n    ): Promise<void> => {\n        return sendOTPService(identifier, type)\n    },\n\n    verifyOTP: async (\n        identifier: string,\n        otp: string,\n        trustDevice?: boolean\n    ): Promise<User> => {\n        return verifyOTPService(identifier, otp, trustDevice)\n    },\n\n    checkDeviceAndLogin: async (identifier: string): Promise<User | null> => {\n        return checkDeviceService(identifier)\n    },\n\n    loginWithTrustedDevice: async (): Promise<User | null> => {\n        return loginWithTrustedDevice()\n    },\n\n    logout: async (revokeDevice?: boolean): Promise<void> => {\n        return logoutService(revokeDevice)\n    },\n\n    initAuth: async (): Promise<void> => {\n        return initAuthService()\n    },\n\n    isOTPRequired: async (identifier: string): Promise<boolean> => {\n        const user = await checkDeviceService(identifier)\n        return user === null\n    }\n}\n"],"names":[],"mappings":";;;;AACA;AAAA;;AASO,MAAM,UAAU;IACnB,SAAS,OACL,YACA;QAEA,OAAO,IAAA,oKAAc,EAAC,YAAY;IACtC;IAEA,WAAW,OACP,YACA,KACA;QAEA,OAAO,IAAA,sKAAgB,EAAC,YAAY,KAAK;IAC7C;IAEA,qBAAqB,OAAO;QACxB,OAAO,IAAA,gLAAkB,EAAC;IAC9B;IAEA,wBAAwB;QACpB,OAAO,IAAA,mLAAsB;IACjC;IAEA,QAAQ,OAAO;QACX,OAAO,IAAA,mKAAa,EAAC;IACzB;IAEA,UAAU;QACN,OAAO,IAAA,qKAAe;IAC1B;IAEA,eAAe,OAAO;QAClB,MAAM,OAAO,MAAM,IAAA,gLAAkB,EAAC;QACtC,OAAO,SAAS;IACpB;AACJ"}},
    {"offset": {"line": 1378, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/auth/api/user.api.ts"],"sourcesContent":["import { updateUserProfile, uploadUserPhoto, getCurrentUser } from '../services'\n\nexport const userApi = {\n    updateProfile: async (name?: string, photo?: string): Promise<void> => {\n        const user = getCurrentUser()\n        if (!user) throw new Error('No user logged in')\n        await updateUserProfile(user.uid, name, photo)\n    },\n\n    uploadPhoto: async (file: File): Promise<string> => {\n        const user = getCurrentUser()\n        if (!user) throw new Error('No user logged in')\n        return uploadUserPhoto(user.uid, file)\n    }\n}\n"],"names":[],"mappings":";;;;AAAA;AAAA;AAAA;;AAEO,MAAM,UAAU;IACnB,eAAe,OAAO,MAAe;QACjC,MAAM,OAAO,IAAA,8KAAc;QAC3B,IAAI,CAAC,MAAM,MAAM,IAAI,MAAM;QAC3B,MAAM,IAAA,8KAAiB,EAAC,KAAK,GAAG,EAAE,MAAM;IAC5C;IAEA,aAAa,OAAO;QAChB,MAAM,OAAO,IAAA,8KAAc;QAC3B,IAAI,CAAC,MAAM,MAAM,IAAI,MAAM;QAC3B,OAAO,IAAA,4KAAe,EAAC,KAAK,GAAG,EAAE;IACrC;AACJ"}},
    {"offset": {"line": 1405, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/auth/api/index.ts"],"sourcesContent":["export * from './auth.api'\nexport * from './user.api'\n"],"names":[],"mappings":";AAAA;AACA"}},
    {"offset": {"line": 1417, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/auth/hooks/use-auth-actions.ts"],"sourcesContent":["import { useCallback } from 'react'\nimport { authApi, userApi } from '../api'\nimport { useAuthStore } from '@/stores/auth-store'\nimport { User } from '../types'\n\nexport function useAuthActions() {\n    const { setUser, setError, reset } = useAuthStore()\n\n    const sendOTP = useCallback(\n        async (identifier: string, type: 'email' | 'phone') => {\n            try {\n                await authApi.sendOTP(identifier, type)\n            } catch (error) {\n                const errorMessage =\n                    error instanceof Error\n                        ? error.message\n                        : 'Failed to send OTP'\n                setError(errorMessage)\n                throw error\n            }\n        },\n        [setError]\n    )\n\n    const verifyOTP = useCallback(\n        async (\n            identifier: string,\n            otp: string,\n            trustDevice = true\n        ): Promise<User> => {\n            try {\n                const user = await authApi.verifyOTP(\n                    identifier,\n                    otp,\n                    trustDevice\n                )\n                setUser(user)\n                return user\n            } catch (error) {\n                console.error('OTP verification failed:', error)\n                const errorMessage =\n                    error instanceof Error ? error.message : 'Invalid OTP'\n                setError(errorMessage)\n                throw error\n            }\n        },\n        [setUser, setError]\n    )\n\n    const checkDeviceAndLogin = useCallback(\n        async (identifier: string): Promise<User | null> => {\n            try {\n                console.log({ identifier });\n\n                const user = await authApi.checkDeviceAndLogin(identifier)\n                if (user) setUser(user)\n                return user\n            } catch (error) {\n                console.error('Device check failed:', error)\n                return null\n            }\n        },\n        [setUser]\n    )\n\n    const logout = useCallback(\n        async (revokeDevice = false) => {\n            try {\n                reset()\n                await authApi.logout(revokeDevice)\n            } catch (error) {\n                setError(\n                    error instanceof Error ? error.message : 'Logout failed'\n                )\n                throw error\n            }\n        },\n        [reset, setError]\n    )\n\n    const updateProfile = useCallback(\n        async (name?: string, photo?: string) => {\n            try {\n                await userApi.updateProfile(name, photo)\n            } catch (error) {\n                const errorMessage =\n                    error instanceof Error\n                        ? error.message\n                        : 'Failed to update profile'\n                setError(errorMessage)\n                throw error\n            }\n        },\n        [setError]\n    )\n\n    const uploadPhoto = useCallback(\n        async (file: File): Promise<string> => {\n            try {\n                return await userApi.uploadPhoto(file)\n            } catch (error) {\n                const errorMessage =\n                    error instanceof Error\n                        ? error.message\n                        : 'Failed to upload photo'\n                setError(errorMessage)\n                throw error\n            }\n        },\n        [setError]\n    )\n\n    const isOTPRequired = useCallback(\n        async (identifier: string): Promise<boolean> => {\n            try {\n                return await authApi.isOTPRequired(identifier)\n            } catch (error) {\n                console.error('Failed to check OTP requirement:', error)\n                return true\n            }\n        },\n        []\n    )\n\n    return {\n        sendOTP,\n        verifyOTP,\n        checkDeviceAndLogin,\n        isOTPRequired,\n        logout,\n        updateProfile,\n        uploadPhoto\n    }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AAAA;AAAA;AACA;;;;;AAGO,SAAS;;IACZ,MAAM,EAAE,OAAO,EAAE,QAAQ,EAAE,KAAK,EAAE,GAAG,IAAA,iJAAY;IAEjD,MAAM,UAAU,IAAA,2RAAW;+CACvB,OAAO,YAAoB;YACvB,IAAI;gBACA,MAAM,2JAAO,CAAC,OAAO,CAAC,YAAY;YACtC,EAAE,OAAO,OAAO;gBACZ,MAAM,eACF,iBAAiB,QACX,MAAM,OAAO,GACb;gBACV,SAAS;gBACT,MAAM;YACV;QACJ;8CACA;QAAC;KAAS;IAGd,MAAM,YAAY,IAAA,2RAAW;iDACzB,OACI,YACA,KACA,cAAc,IAAI;YAElB,IAAI;gBACA,MAAM,OAAO,MAAM,2JAAO,CAAC,SAAS,CAChC,YACA,KACA;gBAEJ,QAAQ;gBACR,OAAO;YACX,EAAE,OAAO,OAAO;gBACZ,QAAQ,KAAK,CAAC,4BAA4B;gBAC1C,MAAM,eACF,iBAAiB,QAAQ,MAAM,OAAO,GAAG;gBAC7C,SAAS;gBACT,MAAM;YACV;QACJ;gDACA;QAAC;QAAS;KAAS;IAGvB,MAAM,sBAAsB,IAAA,2RAAW;2DACnC,OAAO;YACH,IAAI;gBACA,QAAQ,GAAG,CAAC;oBAAE;gBAAW;gBAEzB,MAAM,OAAO,MAAM,2JAAO,CAAC,mBAAmB,CAAC;gBAC/C,IAAI,MAAM,QAAQ;gBAClB,OAAO;YACX,EAAE,OAAO,OAAO;gBACZ,QAAQ,KAAK,CAAC,wBAAwB;gBACtC,OAAO;YACX;QACJ;0DACA;QAAC;KAAQ;IAGb,MAAM,SAAS,IAAA,2RAAW;8CACtB,OAAO,eAAe,KAAK;YACvB,IAAI;gBACA;gBACA,MAAM,2JAAO,CAAC,MAAM,CAAC;YACzB,EAAE,OAAO,OAAO;gBACZ,SACI,iBAAiB,QAAQ,MAAM,OAAO,GAAG;gBAE7C,MAAM;YACV;QACJ;6CACA;QAAC;QAAO;KAAS;IAGrB,MAAM,gBAAgB,IAAA,2RAAW;qDAC7B,OAAO,MAAe;YAClB,IAAI;gBACA,MAAM,2JAAO,CAAC,aAAa,CAAC,MAAM;YACtC,EAAE,OAAO,OAAO;gBACZ,MAAM,eACF,iBAAiB,QACX,MAAM,OAAO,GACb;gBACV,SAAS;gBACT,MAAM;YACV;QACJ;oDACA;QAAC;KAAS;IAGd,MAAM,cAAc,IAAA,2RAAW;mDAC3B,OAAO;YACH,IAAI;gBACA,OAAO,MAAM,2JAAO,CAAC,WAAW,CAAC;YACrC,EAAE,OAAO,OAAO;gBACZ,MAAM,eACF,iBAAiB,QACX,MAAM,OAAO,GACb;gBACV,SAAS;gBACT,MAAM;YACV;QACJ;kDACA;QAAC;KAAS;IAGd,MAAM,gBAAgB,IAAA,2RAAW;qDAC7B,OAAO;YACH,IAAI;gBACA,OAAO,MAAM,2JAAO,CAAC,aAAa,CAAC;YACvC,EAAE,OAAO,OAAO;gBACZ,QAAQ,KAAK,CAAC,oCAAoC;gBAClD,OAAO;YACX;QACJ;oDACA,EAAE;IAGN,OAAO;QACH;QACA;QACA;QACA;QACA;QACA;QACA;IACJ;AACJ;GAhIgB;;QACyB,iJAAY"}},
    {"offset": {"line": 1552, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/auth/hooks/use-auth-state.ts"],"sourcesContent":["import { useAuthStore } from '@/stores/auth-store'\n\nexport const useAuthState = () => {\n    const { user, isAuthenticated, loading, error } = useAuthStore()\n\n    return {\n        user,\n        isAuthenticated,\n        loading,\n        error\n    }\n}\n"],"names":[],"mappings":";;;;AAAA;;;AAEO,MAAM,eAAe;;IACxB,MAAM,EAAE,IAAI,EAAE,eAAe,EAAE,OAAO,EAAE,KAAK,EAAE,GAAG,IAAA,iJAAY;IAE9D,OAAO;QACH;QACA;QACA;QACA;IACJ;AACJ;GATa;;QACyC,iJAAY"}},
    {"offset": {"line": 1581, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/auth/hooks/use-current-user.ts"],"sourcesContent":["import { useAuthStore } from '@/stores/auth-store'\n\nexport function useCurrentUser() {\n    const { user } = useAuthStore()\n    return user\n}\n\nexport function useAuthLoading() {\n    const { loading } = useAuthStore()\n    return loading\n}\n\nexport function useAuthError() {\n    const { error } = useAuthStore()\n    return error\n}\n\nexport function useIsAuthenticated() {\n    const { user, loading } = useAuthStore()\n    return !!user && !loading\n}\n"],"names":[],"mappings":";;;;;;;;;;AAAA;;;AAEO,SAAS;;IACZ,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,iJAAY;IAC7B,OAAO;AACX;GAHgB;;QACK,iJAAY;;;AAI1B,SAAS;;IACZ,MAAM,EAAE,OAAO,EAAE,GAAG,IAAA,iJAAY;IAChC,OAAO;AACX;IAHgB;;QACQ,iJAAY;;;AAI7B,SAAS;;IACZ,MAAM,EAAE,KAAK,EAAE,GAAG,IAAA,iJAAY;IAC9B,OAAO;AACX;IAHgB;;QACM,iJAAY;;;AAI3B,SAAS;;IACZ,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE,GAAG,IAAA,iJAAY;IACtC,OAAO,CAAC,CAAC,QAAQ,CAAC;AACtB;IAHgB;;QACc,iJAAY"}},
    {"offset": {"line": 1641, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/auth/hooks/index.ts"],"sourcesContent":["export * from './use-auth-actions'\nexport * from './use-auth-state'\nexport * from './use-current-user'\n"],"names":[],"mappings":";AAAA;AACA;AACA"}},
    {"offset": {"line": 1655, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 1664, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/auth/components/login-form.tsx"],"sourcesContent":["import { useState, useEffect, useCallback, useMemo } from 'react'\nimport { useAuthStore } from '@/stores/auth-store'\nimport { saveLastLoginType, getLastLoginType } from '@/features/auth/services'\nimport { Button, SubmitButton } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport {\n    Field,\n    FieldGroup,\n    FieldLabel,\n    FieldSet,\n    FieldDescription\n} from '@/components/ui/field'\nimport { Card, CardContent } from '@/components/ui/card'\nimport { Mail, Phone, ArrowLeft } from 'lucide-react'\nimport Logo from '@/components/logo'\nimport { PhoneInput } from '@/components/ui/phone-input'\nimport { OTPInput } from '@/components/auth/otp-input'\nimport { cn } from '@/lib/utils'\nimport { useAuthActions } from '../hooks'\nimport { LoginType } from '../types'\n\ninterface LoginFormProps {\n    onSuccess?: () => void\n}\n\ntype Step = 'input' | 'verify'\n\nexport function LoginForm({ onSuccess }: LoginFormProps) {\n    const {\n        lastLoginType,\n        setLastLoginType,\n        isAuthenticated,\n        loading: authLoading\n    } = useAuthStore()\n    const [loginType, setLoginType] = useState<LoginType>(lastLoginType)\n    const [step, setStep] = useState<Step>('input')\n    const [identifier, setIdentifier] = useState('')\n    const [loading, setLoading] = useState(false)\n    const [fieldError, setFieldError] = useState('')\n    const [otpError, setOtpError] = useState('')\n    const { sendOTP, verifyOTP, checkDeviceAndLogin } = useAuthActions()\n\n    useEffect(() => {\n        getLastLoginType().then((type: 'email' | 'phone') => {\n            setLoginType(type)\n            setLastLoginType(type)\n        })\n    }, [setLastLoginType])\n\n    useEffect(() => {\n        if (isAuthenticated && !authLoading) {\n            onSuccess?.()\n        }\n    }, [isAuthenticated, authLoading, onSuccess])\n\n    const toggleLoginType = useCallback(() => {\n        const newType: LoginType = loginType === 'email' ? 'phone' : 'email'\n        setLoginType(newType)\n        setLastLoginType(newType)\n        saveLastLoginType(newType)\n        setIdentifier('')\n        setFieldError('')\n    }, [loginType, setLastLoginType])\n\n    const handleSendOTP = useCallback(\n        async (e: React.FormEvent) => {\n            e.preventDefault()\n            setFieldError('')\n\n            if (!identifier.trim()) {\n                setFieldError(\n                    loginType === 'email'\n                        ? 'Email address is required'\n                        : 'Phone number is required'\n                )\n                return\n            }\n\n            setLoading(true)\n            try {\n                console.log({ identifier });\n                const user = await checkDeviceAndLogin(identifier)\n                console.log({ user });\n\n                if (user) {\n                    onSuccess?.()\n                    return\n                }\n\n                await sendOTP(identifier, loginType)\n                setStep('verify')\n            } catch (error) {\n                setFieldError(\n                    error instanceof Error\n                        ? error.message\n                        : 'Failed to send verification code'\n                )\n            } finally {\n                setLoading(false)\n            }\n        },\n        [identifier, loginType, checkDeviceAndLogin, sendOTP, onSuccess]\n    )\n\n    const handleVerifyOTP = useCallback(\n        async (otp: string) => {\n            setOtpError('')\n            setLoading(true)\n            try {\n                await verifyOTP(identifier, otp, true)\n                onSuccess?.()\n            } catch (error) {\n                setOtpError(\n                    error instanceof Error\n                        ? error.message\n                        : 'Invalid verification code'\n                )\n            } finally {\n                setLoading(false)\n            }\n        },\n        [identifier, verifyOTP, onSuccess]\n    )\n\n    const handleResendOTP = useCallback(async () => {\n        setOtpError('')\n        try {\n            await sendOTP(identifier, loginType)\n        } catch (error) {\n            setOtpError(\n                error instanceof Error ? error.message : 'Failed to resend code'\n            )\n        }\n    }, [identifier, loginType, sendOTP])\n\n    const handleBackToLogin = useCallback(() => {\n        setStep('input')\n        setOtpError('')\n        setFieldError('')\n    }, [])\n\n    const handleIdentifierChange = useCallback((value: string) => {\n        setIdentifier(value)\n        setFieldError('')\n    }, [])\n\n    const isSubmitDisabled = useMemo(\n        () => loading || !identifier.trim(),\n        [loading, identifier]\n    )\n\n    if (step === 'verify') {\n        return (\n            <Card className=\"rounded-xl\">\n                <CardContent>\n                    <div className=\"flex flex-col items-center space-y-5\">\n                        <div className=\"space-y-3 w-full\">\n                            <Logo size=\"md\" showTagline />\n                            <div className=\"text-center space-y-1\">\n                                <p className=\"text-muted-foreground text-sm\">\n                                    We sent a code to\n                                </p>\n                                <p className=\"text-sm font-semibold\">\n                                    {identifier}\n                                </p>\n                            </div>\n                        </div>\n\n                        <div className=\"w-full space-y-4\">\n                            <OTPInput\n                                onComplete={handleVerifyOTP}\n                                onManualSubmit={handleVerifyOTP}\n                                onResend={handleResendOTP}\n                                error={otpError}\n                                disabled={loading}\n                            />\n                        </div>\n\n                        <Button\n                            type=\"button\"\n                            variant=\"ghost\"\n                            className=\"w-full rounded-xl\"\n                            onClick={handleBackToLogin}\n                            disabled={loading}\n                        >\n                            <ArrowLeft className=\"size-4\" />\n                            Back to Login\n                        </Button>\n                    </div>\n                </CardContent>\n            </Card>\n        )\n    }\n\n    return (\n        <Card className=\"rounded-xl\">\n            <CardContent>\n                <form\n                    onSubmit={handleSendOTP}\n                    className=\"flex flex-col items-center space-y-5\"\n                >\n                    <Logo size=\"md\" showTagline />\n\n                    <FieldSet className=\"w-full\">\n                        <FieldGroup>\n                            <Field>\n                                <FieldLabel htmlFor=\"identifier\">\n                                    {loginType === 'email'\n                                        ? 'Email Address'\n                                        : 'Phone Number'}\n                                </FieldLabel>\n                                {loginType === 'email' ? (\n                                    <Input\n                                        id=\"identifier\"\n                                        type=\"email\"\n                                        placeholder=\"you@example.com\"\n                                        className={cn(\n                                            'rounded-xl',\n                                            fieldError &&\n                                            'border-destructive focus-visible:ring-destructive'\n                                        )}\n                                        value={identifier}\n                                        onChange={(e) =>\n                                            handleIdentifierChange(\n                                                e.target.value\n                                            )\n                                        }\n                                        required\n                                    />\n                                ) : (\n                                    <PhoneInput\n                                        id=\"identifier\"\n                                        placeholder=\"Enter phone number\"\n                                        value={identifier}\n                                        onChange={handleIdentifierChange}\n                                    />\n                                )}\n                                <FieldDescription\n                                    className={\n                                        fieldError ? 'text-destructive' : ''\n                                    }\n                                >\n                                    {fieldError ||\n                                        \"We'll send you a secure verification code\"}\n                                </FieldDescription>\n                            </Field>\n                        </FieldGroup>\n                    </FieldSet>\n\n                    <div className=\"w-full space-y-2\">\n                        <SubmitButton\n                            type=\"submit\"\n                            className=\"w-full rounded-xl\"\n                            size=\"lg\"\n                            disabled={isSubmitDisabled}\n                            loading={loading}\n                        >\n                            {loginType === 'email' ? (\n                                <Mail className=\"size-4\" />\n                            ) : (\n                                <Phone className=\"size-4\" />\n                            )}\n                            Continue\n                        </SubmitButton>\n                        <Button\n                            type=\"button\"\n                            variant=\"ghost\"\n                            className=\"w-full text-sm text-muted-foreground hover:text-foreground\"\n                            onClick={toggleLoginType}\n                            disabled={loading}\n                        >\n                            Use{' '}\n                            {loginType === 'email' ? 'phone number' : 'email'}{' '}\n                            instead\n                        </Button>\n                    </div>\n\n                    <p className=\"text-center text-xs text-muted-foreground px-2\">\n                        By continuing, you agree to Stack Provider{' '}\n                        <a\n                            href=\"#\"\n                            className=\"underline hover:text-foreground transition-colors\"\n                        >\n                            Terms of Service\n                        </a>{' '}\n                        and{' '}\n                        <a\n                            href=\"#\"\n                            className=\"underline hover:text-foreground transition-colors\"\n                        >\n                            Privacy Policy\n                        </a>\n                    </p>\n                </form>\n            </CardContent>\n        </Card>\n    )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2132, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/auth/components/profile-form.tsx"],"sourcesContent":["import { useState } from 'react'\nimport { Button } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport { Field, FieldGroup, FieldLabel, FieldSet } from '@/components/ui/field'\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card'\nimport { Alert, AlertDescription } from '@/components/ui/alert'\nimport { Loader2 } from 'lucide-react'\nimport { useAuthActions, useCurrentUser } from '../hooks'\n\nexport function ProfileForm() {\n    const user = useCurrentUser()\n    const { updateProfile, uploadPhoto } = useAuthActions()\n    const [name, setName] = useState(user?.name || '')\n    const [success, setSuccess] = useState('')\n    const [error, setError] = useState('')\n    const [loading, setLoading] = useState(false)\n\n    const handleUpdateProfile = async (e: React.FormEvent) => {\n        e.preventDefault()\n        setLoading(true)\n        setError('')\n        setSuccess('')\n        try {\n            await updateProfile(name)\n            setSuccess('Profile updated!')\n        } catch (err) {\n            setError(\n                err instanceof Error ? err.message : 'Failed to update profile'\n            )\n        } finally {\n            setLoading(false)\n        }\n    }\n\n    const handlePhotoUpload = async (\n        e: React.ChangeEvent<HTMLInputElement>\n    ) => {\n        const file = e.target.files?.[0]\n        if (!file) return\n        setLoading(true)\n        setError('')\n        setSuccess('')\n        try {\n            await uploadPhoto(file)\n            setSuccess('Photo uploaded!')\n        } catch (err) {\n            setError(\n                err instanceof Error ? err.message : 'Failed to upload photo'\n            )\n        } finally {\n            setLoading(false)\n        }\n    }\n\n    return (\n        <Card className=\"max-w-2xl mx-auto\">\n            <CardHeader>\n                <CardTitle>Profile</CardTitle>\n            </CardHeader>\n            <CardContent>\n                <form onSubmit={handleUpdateProfile}>\n                    <FieldSet>\n                        <FieldGroup>\n                            <Field>\n                                <FieldLabel htmlFor=\"name\">Name</FieldLabel>\n                                <Input\n                                    id=\"name\"\n                                    value={name}\n                                    onChange={(e) => setName(e.target.value)}\n                                />\n                            </Field>\n                            <Field>\n                                <FieldLabel htmlFor=\"photo\">Photo</FieldLabel>\n                                <Input\n                                    id=\"photo\"\n                                    type=\"file\"\n                                    accept=\"image/*\"\n                                    onChange={handlePhotoUpload}\n                                />\n                            </Field>\n                        </FieldGroup>\n                    </FieldSet>\n                    {success && (\n                        <Alert className=\"mt-4\">\n                            <AlertDescription>{success}</AlertDescription>\n                        </Alert>\n                    )}\n                    {error && (\n                        <Alert variant=\"destructive\" className=\"mt-4\">\n                            <AlertDescription>{error}</AlertDescription>\n                        </Alert>\n                    )}\n                    <Button type=\"submit\" className=\"mt-4\" disabled={loading}>\n                        {loading && (\n                            <Loader2 className=\"mr-2 size-4 animate-spin\" />\n                        )}\n                        Update Profile\n                    </Button>\n                </form>\n            </CardContent>\n        </Card>\n    )\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;;;;;;;;;;;AAEO,SAAS;;IACZ,MAAM,OAAO,IAAA,+KAAc;IAC3B,MAAM,EAAE,aAAa,EAAE,WAAW,EAAE,GAAG,IAAA,+KAAc;IACrD,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,wRAAQ,EAAC,MAAM,QAAQ;IAC/C,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,wRAAQ,EAAC;IACvC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,wRAAQ,EAAC;IACnC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,wRAAQ,EAAC;IAEvC,MAAM,sBAAsB,OAAO;QAC/B,EAAE,cAAc;QAChB,WAAW;QACX,SAAS;QACT,WAAW;QACX,IAAI;YACA,MAAM,cAAc;YACpB,WAAW;QACf,EAAE,OAAO,KAAK;YACV,SACI,eAAe,QAAQ,IAAI,OAAO,GAAG;QAE7C,SAAU;YACN,WAAW;QACf;IACJ;IAEA,MAAM,oBAAoB,OACtB;QAEA,MAAM,OAAO,EAAE,MAAM,CAAC,KAAK,EAAE,CAAC,EAAE;QAChC,IAAI,CAAC,MAAM;QACX,WAAW;QACX,SAAS;QACT,WAAW;QACX,IAAI;YACA,MAAM,YAAY;YAClB,WAAW;QACf,EAAE,OAAO,KAAK;YACV,SACI,eAAe,QAAQ,IAAI,OAAO,GAAG;QAE7C,SAAU;YACN,WAAW;QACf;IACJ;IAEA,qBACI,4SAAC,2IAAI;QAAC,WAAU;;0BACZ,4SAAC,iJAAU;0BACP,cAAA,4SAAC,gJAAS;8BAAC;;;;;;;;;;;0BAEf,4SAAC,kJAAW;0BACR,cAAA,4SAAC;oBAAK,UAAU;;sCACZ,4SAAC,gJAAQ;sCACL,cAAA,4SAAC,kJAAU;;kDACP,4SAAC,6IAAK;;0DACF,4SAAC,kJAAU;gDAAC,SAAQ;0DAAO;;;;;;0DAC3B,4SAAC,6IAAK;gDACF,IAAG;gDACH,OAAO;gDACP,UAAU,CAAC,IAAM,QAAQ,EAAE,MAAM,CAAC,KAAK;;;;;;;;;;;;kDAG/C,4SAAC,6IAAK;;0DACF,4SAAC,kJAAU;gDAAC,SAAQ;0DAAQ;;;;;;0DAC5B,4SAAC,6IAAK;gDACF,IAAG;gDACH,MAAK;gDACL,QAAO;gDACP,UAAU;;;;;;;;;;;;;;;;;;;;;;;wBAKzB,yBACG,4SAAC,6IAAK;4BAAC,WAAU;sCACb,cAAA,4SAAC,wJAAgB;0CAAE;;;;;;;;;;;wBAG1B,uBACG,4SAAC,6IAAK;4BAAC,SAAQ;4BAAc,WAAU;sCACnC,cAAA,4SAAC,wJAAgB;0CAAE;;;;;;;;;;;sCAG3B,4SAAC,+IAAM;4BAAC,MAAK;4BAAS,WAAU;4BAAO,UAAU;;gCAC5C,yBACG,4SAAC,mTAAO;oCAAC,WAAU;;;;;;gCACrB;;;;;;;;;;;;;;;;;;;;;;;;AAO1B;GA7FgB;;QACC,+KAAc;QACY,+KAAc;;;KAFzC"}},
    {"offset": {"line": 2361, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/auth/components/auth-provider.tsx"],"sourcesContent":["import { createContext, useContext, useEffect, ReactNode } from 'react'\nimport { onAuthStateChange, initSession, initAuth } from '../services'\nimport { useAuthStore } from '@/stores/auth-store'\nimport { useAuthActions } from '../hooks/use-auth-actions'\nimport type { User } from '../types'\n\nconst AuthContext = createContext<ReturnType<typeof useAuthActions> | null>(\n    null\n)\n\nexport function AuthProvider({ children }: { children: ReactNode }) {\n    const { setUser, setLoading } = useAuthStore()\n    const authActions = useAuthActions()\n\n    useEffect(() => {\n        let mounted = true\n        let initialized = false\n\n        const unsubscribe = onAuthStateChange((user: User | null) => {\n            if (mounted && initialized) {\n                setUser(user)\n                setLoading(false)\n            }\n        })\n\n        const init = async () => {\n            const cachedUser = await initSession()\n            if (mounted) {\n                setUser(cachedUser)\n                setLoading(!cachedUser)\n            }\n\n            await initAuth()\n            initialized = true\n            if (mounted) {\n                setLoading(false)\n            }\n        }\n\n        init()\n\n        return () => {\n            mounted = false\n            unsubscribe()\n        }\n    }, [setUser, setLoading])\n\n    return (\n        <AuthContext.Provider value={authActions}>\n            {children}\n        </AuthContext.Provider>\n    )\n}\n\nexport function useAuth() {\n    const context = useContext(AuthContext)\n    const authState = useAuthStore()\n    if (!context) {\n        throw new Error('useAuth must be used within an AuthProvider')\n    }\n    return { ...context, authState }\n}\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AAAA;AAAA;AACA;AACA;;;;;;;AAGA,MAAM,4BAAc,IAAA,6RAAa,EAC7B;AAGG,SAAS,aAAa,EAAE,QAAQ,EAA2B;;IAC9D,MAAM,EAAE,OAAO,EAAE,UAAU,EAAE,GAAG,IAAA,iJAAY;IAC5C,MAAM,cAAc,IAAA,+KAAc;IAElC,IAAA,yRAAS;kCAAC;YACN,IAAI,UAAU;YACd,IAAI,cAAc;YAElB,MAAM,cAAc,IAAA,iLAAiB;sDAAC,CAAC;oBACnC,IAAI,WAAW,aAAa;wBACxB,QAAQ;wBACR,WAAW;oBACf;gBACJ;;YAEA,MAAM;+CAAO;oBACT,MAAM,aAAa,MAAM,IAAA,2KAAW;oBACpC,IAAI,SAAS;wBACT,QAAQ;wBACR,WAAW,CAAC;oBAChB;oBAEA,MAAM,IAAA,qKAAQ;oBACd,cAAc;oBACd,IAAI,SAAS;wBACT,WAAW;oBACf;gBACJ;;YAEA;YAEA;0CAAO;oBACH,UAAU;oBACV;gBACJ;;QACJ;iCAAG;QAAC;QAAS;KAAW;IAExB,qBACI,4SAAC,YAAY,QAAQ;QAAC,OAAO;kBACxB;;;;;;AAGb;GA1CgB;;QACoB,iJAAY;QACxB,+KAAc;;;KAFtB;AA4CT,SAAS;;IACZ,MAAM,UAAU,IAAA,0RAAU,EAAC;IAC3B,MAAM,YAAY,IAAA,iJAAY;IAC9B,IAAI,CAAC,SAAS;QACV,MAAM,IAAI,MAAM;IACpB;IACA,OAAO;QAAE,GAAG,OAAO;QAAE;IAAU;AACnC;IAPgB;;QAEM,iJAAY"}},
    {"offset": {"line": 2465, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/auth/components/otp-input.tsx"],"sourcesContent":["export { OTPInput } from '@/components/auth/otp-input'\r\n"],"names":[],"mappings":";AAAA"}},
    {"offset": {"line": 2475, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/shared/hooks/use-async.ts"],"sourcesContent":["import { useState, useCallback } from 'react'\n\ninterface AsyncState<T> {\n    data: T | null\n    loading: boolean\n    error: Error | null\n}\n\nexport function useAsync<T>() {\n    const [state, setState] = useState<AsyncState<T>>({\n        data: null,\n        loading: false,\n        error: null\n    })\n\n    const execute = useCallback(async (asyncFunction: () => Promise<T>) => {\n        setState({ data: null, loading: true, error: null })\n        try {\n            const data = await asyncFunction()\n            setState({ data, loading: false, error: null })\n            return data\n        } catch (error) {\n            const err =\n                error instanceof Error ? error : new Error('Unknown error')\n            setState({ data: null, loading: false, error: err })\n            throw err\n        }\n    }, [])\n\n    const reset = useCallback(() => {\n        setState({ data: null, loading: false, error: null })\n    }, [])\n\n    return { ...state, execute, reset }\n}\n"],"names":[],"mappings":";;;;AAAA;;;AAQO,SAAS;;IACZ,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,wRAAQ,EAAgB;QAC9C,MAAM;QACN,SAAS;QACT,OAAO;IACX;IAEA,MAAM,UAAU,IAAA,2RAAW;yCAAC,OAAO;YAC/B,SAAS;gBAAE,MAAM;gBAAM,SAAS;gBAAM,OAAO;YAAK;YAClD,IAAI;gBACA,MAAM,OAAO,MAAM;gBACnB,SAAS;oBAAE;oBAAM,SAAS;oBAAO,OAAO;gBAAK;gBAC7C,OAAO;YACX,EAAE,OAAO,OAAO;gBACZ,MAAM,MACF,iBAAiB,QAAQ,QAAQ,IAAI,MAAM;gBAC/C,SAAS;oBAAE,MAAM;oBAAM,SAAS;oBAAO,OAAO;gBAAI;gBAClD,MAAM;YACV;QACJ;wCAAG,EAAE;IAEL,MAAM,QAAQ,IAAA,2RAAW;uCAAC;YACtB,SAAS;gBAAE,MAAM;gBAAM,SAAS;gBAAO,OAAO;YAAK;QACvD;sCAAG,EAAE;IAEL,OAAO;QAAE,GAAG,KAAK;QAAE;QAAS;IAAM;AACtC;GA1BgB"}},
    {"offset": {"line": 2538, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/shared/hooks/use-debounce.ts"],"sourcesContent":["import { useState, useEffect } from 'react'\n\nexport function useDebounce<T>(value: T, delay: number = 500): T {\n    const [debouncedValue, setDebouncedValue] = useState<T>(value)\n\n    useEffect(() => {\n        const handler = setTimeout(() => {\n            setDebouncedValue(value)\n        }, delay)\n\n        return () => {\n            clearTimeout(handler)\n        }\n    }, [value, delay])\n\n    return debouncedValue\n}\n"],"names":[],"mappings":";;;;AAAA;;;AAEO,SAAS,YAAe,KAAQ,EAAE,QAAgB,GAAG;;IACxD,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,wRAAQ,EAAI;IAExD,IAAA,yRAAS;iCAAC;YACN,MAAM,UAAU;iDAAW;oBACvB,kBAAkB;gBACtB;gDAAG;YAEH;yCAAO;oBACH,aAAa;gBACjB;;QACJ;gCAAG;QAAC;QAAO;KAAM;IAEjB,OAAO;AACX;GAdgB"}},
    {"offset": {"line": 2575, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/shared/hooks/index.ts"],"sourcesContent":["export * from './use-async'\nexport * from './use-debounce'\n"],"names":[],"mappings":";AAAA;AACA"}},
    {"offset": {"line": 2587, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/shared/hooks/use-crud-operations.ts"],"sourcesContent":["import { useFirestore } from 'reactfire'\r\nimport { collection, doc, Timestamp } from 'firebase/firestore'\r\nimport {\r\n    setDocWithTimeout,\r\n    updateDocWithTimeout,\r\n    deleteDocWithTimeout\r\n} from '@/lib/firestore-utils'\r\nimport { toast } from 'sonner'\r\n\r\nexport function useCrudOperations<T>(collectionName: string, shopId: string) {\r\n    const firestore = useFirestore()\r\n\r\n    const create = async (\r\n        data: Omit<T, 'id' | 'shopId' | 'createdAt' | 'updatedAt'>\r\n    ) => {\r\n        const toastId = toast.loading('Creating...')\r\n        try {\r\n            const newDocRef = doc(collection(firestore, collectionName))\r\n            await setDocWithTimeout(newDocRef, {\r\n                ...data,\r\n                shopId,\r\n                createdAt: Timestamp.now(),\r\n                updatedAt: Timestamp.now()\r\n            })\r\n            toast.success('Created successfully', { id: toastId })\r\n            return newDocRef.id\r\n        } catch (error) {\r\n            const message =\r\n                error instanceof Error ? error.message : 'Failed to create'\r\n            toast.error(message, { id: toastId })\r\n            throw error\r\n        }\r\n    }\r\n\r\n    const update = async (id: string, data: Partial<T>) => {\r\n        const toastId = toast.loading('Updating...')\r\n        try {\r\n            await updateDocWithTimeout(doc(firestore, collectionName, id), {\r\n                ...data,\r\n                updatedAt: Timestamp.now()\r\n            })\r\n            toast.success('Updated successfully', { id: toastId })\r\n        } catch (error) {\r\n            const message =\r\n                error instanceof Error ? error.message : 'Failed to update'\r\n            toast.error(message, { id: toastId })\r\n            throw error\r\n        }\r\n    }\r\n\r\n    const remove = async (id: string) => {\r\n        const toastId = toast.loading('Deleting...')\r\n        try {\r\n            await deleteDocWithTimeout(doc(firestore, collectionName, id))\r\n            toast.success('Deleted successfully', { id: toastId })\r\n        } catch (error) {\r\n            const message =\r\n                error instanceof Error ? error.message : 'Failed to delete'\r\n            toast.error(message, { id: toastId })\r\n            throw error\r\n        }\r\n    }\r\n\r\n    return { create, update, remove }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AACA;AAAA;AACA;AAKA;;;;;;AAEO,SAAS,kBAAqB,cAAsB,EAAE,MAAc;;IACvE,MAAM,YAAY,IAAA,kQAAY;IAE9B,MAAM,SAAS,OACX;QAEA,MAAM,UAAU,oRAAK,CAAC,OAAO,CAAC;QAC9B,IAAI;YACA,MAAM,YAAY,IAAA,iRAAG,EAAC,IAAA,wRAAU,EAAC,WAAW;YAC5C,MAAM,IAAA,wJAAiB,EAAC,WAAW;gBAC/B,GAAG,IAAI;gBACP;gBACA,WAAW,uRAAS,CAAC,GAAG;gBACxB,WAAW,uRAAS,CAAC,GAAG;YAC5B;YACA,oRAAK,CAAC,OAAO,CAAC,wBAAwB;gBAAE,IAAI;YAAQ;YACpD,OAAO,UAAU,EAAE;QACvB,EAAE,OAAO,OAAO;YACZ,MAAM,UACF,iBAAiB,QAAQ,MAAM,OAAO,GAAG;YAC7C,oRAAK,CAAC,KAAK,CAAC,SAAS;gBAAE,IAAI;YAAQ;YACnC,MAAM;QACV;IACJ;IAEA,MAAM,SAAS,OAAO,IAAY;QAC9B,MAAM,UAAU,oRAAK,CAAC,OAAO,CAAC;QAC9B,IAAI;YACA,MAAM,IAAA,2JAAoB,EAAC,IAAA,iRAAG,EAAC,WAAW,gBAAgB,KAAK;gBAC3D,GAAG,IAAI;gBACP,WAAW,uRAAS,CAAC,GAAG;YAC5B;YACA,oRAAK,CAAC,OAAO,CAAC,wBAAwB;gBAAE,IAAI;YAAQ;QACxD,EAAE,OAAO,OAAO;YACZ,MAAM,UACF,iBAAiB,QAAQ,MAAM,OAAO,GAAG;YAC7C,oRAAK,CAAC,KAAK,CAAC,SAAS;gBAAE,IAAI;YAAQ;YACnC,MAAM;QACV;IACJ;IAEA,MAAM,SAAS,OAAO;QAClB,MAAM,UAAU,oRAAK,CAAC,OAAO,CAAC;QAC9B,IAAI;YACA,MAAM,IAAA,2JAAoB,EAAC,IAAA,iRAAG,EAAC,WAAW,gBAAgB;YAC1D,oRAAK,CAAC,OAAO,CAAC,wBAAwB;gBAAE,IAAI;YAAQ;QACxD,EAAE,OAAO,OAAO;YACZ,MAAM,UACF,iBAAiB,QAAQ,MAAM,OAAO,GAAG;YAC7C,oRAAK,CAAC,KAAK,CAAC,SAAS;gBAAE,IAAI;YAAQ;YACnC,MAAM;QACV;IACJ;IAEA,OAAO;QAAE;QAAQ;QAAQ;IAAO;AACpC;GAvDgB;;QACM,kQAAY"}},
    {"offset": {"line": 2677, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/shared/hooks/use-search-filter.ts"],"sourcesContent":["import { useMemo, useState } from 'react'\r\n\r\nexport function useSearchFilter<T extends Record<string, unknown>>(\r\n    items: T[],\r\n    searchKeys: string[]\r\n) {\r\n    const [search, setSearch] = useState('')\r\n\r\n    const filtered = useMemo(() => {\r\n        if (!search) return items\r\n        const lowerSearch = search.toLowerCase()\r\n        return items.filter((item) =>\r\n            searchKeys.some((key) =>\r\n                String(item[key]).toLowerCase().includes(lowerSearch)\r\n            )\r\n        )\r\n    }, [items, search, searchKeys])\r\n\r\n    return { search, setSearch, filtered }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;;;AAEO,SAAS,gBACZ,KAAU,EACV,UAAoB;;IAEpB,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,wRAAQ,EAAC;IAErC,MAAM,WAAW,IAAA,uRAAO;6CAAC;YACrB,IAAI,CAAC,QAAQ,OAAO;YACpB,MAAM,cAAc,OAAO,WAAW;YACtC,OAAO,MAAM,MAAM;qDAAC,CAAC,OACjB,WAAW,IAAI;6DAAC,CAAC,MACb,OAAO,IAAI,CAAC,IAAI,EAAE,WAAW,GAAG,QAAQ,CAAC;;;QAGrD;4CAAG;QAAC;QAAO;QAAQ;KAAW;IAE9B,OAAO;QAAE;QAAQ;QAAW;IAAS;AACzC;GAjBgB"}},
    {"offset": {"line": 2716, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/shared/utils/format.ts"],"sourcesContent":["export function formatDate(date: Date | string): string {\n    const d = typeof date === 'string' ? new Date(date) : date\n    return d.toLocaleDateString('en-US', {\n        year: 'numeric',\n        month: 'short',\n        day: 'numeric'\n    })\n}\n\nexport function formatDateTime(date: Date | string): string {\n    const d = typeof date === 'string' ? new Date(date) : date\n    return d.toLocaleString('en-US', {\n        year: 'numeric',\n        month: 'short',\n        day: 'numeric',\n        hour: '2-digit',\n        minute: '2-digit'\n    })\n}\n\nexport function formatCurrency(\n    amount: number,\n    currency: string = 'USD'\n): string {\n    return new Intl.NumberFormat('en-US', {\n        style: 'currency',\n        currency\n    }).format(amount)\n}\n\nexport function formatPhone(phone: string): string {\n    const cleaned = phone.replace(/\\D/g, '')\n    if (cleaned.length === 10) {\n        return `(${cleaned.slice(0, 3)}) ${cleaned.slice(3, 6)}-${cleaned.slice(6)}`\n    }\n    return phone\n}\n\nexport function truncate(str: string, length: number): string {\n    return str.length > length ? `${str.slice(0, length)}...` : str\n}\n"],"names":[],"mappings":";;;;;;;;;;;;AAAO,SAAS,WAAW,IAAmB;IAC1C,MAAM,IAAI,OAAO,SAAS,WAAW,IAAI,KAAK,QAAQ;IACtD,OAAO,EAAE,kBAAkB,CAAC,SAAS;QACjC,MAAM;QACN,OAAO;QACP,KAAK;IACT;AACJ;AAEO,SAAS,eAAe,IAAmB;IAC9C,MAAM,IAAI,OAAO,SAAS,WAAW,IAAI,KAAK,QAAQ;IACtD,OAAO,EAAE,cAAc,CAAC,SAAS;QAC7B,MAAM;QACN,OAAO;QACP,KAAK;QACL,MAAM;QACN,QAAQ;IACZ;AACJ;AAEO,SAAS,eACZ,MAAc,EACd,WAAmB,KAAK;IAExB,OAAO,IAAI,KAAK,YAAY,CAAC,SAAS;QAClC,OAAO;QACP;IACJ,GAAG,MAAM,CAAC;AACd;AAEO,SAAS,YAAY,KAAa;IACrC,MAAM,UAAU,MAAM,OAAO,CAAC,OAAO;IACrC,IAAI,QAAQ,MAAM,KAAK,IAAI;QACvB,OAAO,CAAC,CAAC,EAAE,QAAQ,KAAK,CAAC,GAAG,GAAG,EAAE,EAAE,QAAQ,KAAK,CAAC,GAAG,GAAG,CAAC,EAAE,QAAQ,KAAK,CAAC,IAAI;IAChF;IACA,OAAO;AACX;AAEO,SAAS,SAAS,GAAW,EAAE,MAAc;IAChD,OAAO,IAAI,MAAM,GAAG,SAAS,GAAG,IAAI,KAAK,CAAC,GAAG,QAAQ,GAAG,CAAC,GAAG;AAChE"}},
    {"offset": {"line": 2769, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/shared/utils/validation.ts"],"sourcesContent":["export function isValidEmail(email: string): boolean {\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/\n    return emailRegex.test(email)\n}\n\nexport function isValidPhone(phone: string): boolean {\n    const phoneRegex = /^\\+?[\\d\\s-()]+$/\n    return phoneRegex.test(phone) && phone.replace(/\\D/g, '').length >= 10\n}\n\nexport function isValidUrl(url: string): boolean {\n    try {\n        new URL(url)\n        return true\n    } catch {\n        return false\n    }\n}\n\nexport function isEmpty(value: unknown): boolean {\n    if (value === null || value === undefined) return true\n    if (typeof value === 'string') return value.trim().length === 0\n    if (Array.isArray(value)) return value.length === 0\n    if (typeof value === 'object') return Object.keys(value).length === 0\n    return false\n}\n"],"names":[],"mappings":";;;;;;;;;;AAAO,SAAS,aAAa,KAAa;IACtC,MAAM,aAAa;IACnB,OAAO,WAAW,IAAI,CAAC;AAC3B;AAEO,SAAS,aAAa,KAAa;IACtC,MAAM,aAAa;IACnB,OAAO,WAAW,IAAI,CAAC,UAAU,MAAM,OAAO,CAAC,OAAO,IAAI,MAAM,IAAI;AACxE;AAEO,SAAS,WAAW,GAAW;IAClC,IAAI;QACA,IAAI,IAAI;QACR,OAAO;IACX,EAAE,OAAM;QACJ,OAAO;IACX;AACJ;AAEO,SAAS,QAAQ,KAAc;IAClC,IAAI,UAAU,QAAQ,UAAU,WAAW,OAAO;IAClD,IAAI,OAAO,UAAU,UAAU,OAAO,MAAM,IAAI,GAAG,MAAM,KAAK;IAC9D,IAAI,MAAM,OAAO,CAAC,QAAQ,OAAO,MAAM,MAAM,KAAK;IAClD,IAAI,OAAO,UAAU,UAAU,OAAO,OAAO,IAAI,CAAC,OAAO,MAAM,KAAK;IACpE,OAAO;AACX"}},
    {"offset": {"line": 2809, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/shared/utils/index.ts"],"sourcesContent":["export * from './format'\nexport * from './validation'\n"],"names":[],"mappings":";AAAA;AACA"}},
    {"offset": {"line": 2821, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 2830, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/shared/examples/data-table-example.tsx"],"sourcesContent":["import { DataTable } from '@/components/data-table/data-table'\nimport {\n    ColumnDef,\n    useReactTable,\n    getCoreRowModel\n} from '@tanstack/react-table'\nimport { Badge } from '@/components/ui/badge'\nimport { Avatar, AvatarFallback } from '@/components/ui/avatar'\nimport { Button } from '@/components/ui/button'\nimport { Checkbox } from '@/components/ui/checkbox'\nimport { useState } from 'react'\nimport { toast } from 'sonner'\nimport { DataTableColumnHeader } from '@/components/data-table/data-table-column-header'\nimport { MoreHorizontal } from 'lucide-react'\nimport {\n    DropdownMenu,\n    DropdownMenuContent,\n    DropdownMenuItem,\n    DropdownMenuTrigger\n} from '@/components/ui/dropdown-menu'\n\ninterface User {\n    id: string\n    name: string\n    email: string\n    role: 'admin' | 'manager' | 'staff' | 'viewer'\n    status: 'active' | 'inactive'\n    createdAt: Date\n}\n\nconst mockUsers: User[] = [\n    {\n        id: '1',\n        name: 'John Doe',\n        email: 'john@example.com',\n        role: 'admin',\n        status: 'active',\n        createdAt: new Date('2024-01-15')\n    },\n    {\n        id: '2',\n        name: 'Jane Smith',\n        email: 'jane@example.com',\n        role: 'manager',\n        status: 'active',\n        createdAt: new Date('2024-02-20')\n    },\n    {\n        id: '3',\n        name: 'Bob Johnson',\n        email: 'bob@example.com',\n        role: 'staff',\n        status: 'inactive',\n        createdAt: new Date('2024-03-10')\n    }\n]\n\nexport function DataTableExample() {\n    const [users] = useState<User[]>(mockUsers)\n\n    const columns: ColumnDef<User>[] = [\n        {\n            id: 'select',\n            header: ({ table }) => (\n                <Checkbox\n                    checked={table.getIsAllPageRowsSelected()}\n                    onCheckedChange={(value) =>\n                        table.toggleAllPageRowsSelected(!!value)\n                    }\n                />\n            ),\n            cell: ({ row }) => (\n                <Checkbox\n                    checked={row.getIsSelected()}\n                    onCheckedChange={(value) => row.toggleSelected(!!value)}\n                />\n            )\n        },\n        {\n            accessorKey: 'name',\n            header: ({ column }) => (\n                <DataTableColumnHeader\n                    column={column}\n                    title=\"Name\"\n                    label=\"Name\"\n                />\n            ),\n            cell: ({ row }) => (\n                <div className=\"flex items-center gap-2\">\n                    <Avatar className=\"h-8 w-8\">\n                        <AvatarFallback>{row.original.name[0]}</AvatarFallback>\n                    </Avatar>\n                    <span className=\"font-medium\">{row.original.name}</span>\n                </div>\n            )\n        },\n        {\n            accessorKey: 'email',\n            header: ({ column }) => (\n                <DataTableColumnHeader\n                    column={column}\n                    title=\"Email\"\n                    label=\"Email\"\n                />\n            )\n        },\n        {\n            accessorKey: 'role',\n            header: 'Role',\n            cell: ({ row }) => <Badge>{row.original.role}</Badge>\n        },\n        {\n            accessorKey: 'status',\n            header: 'Status',\n            cell: ({ row }) => (\n                <Badge\n                    variant={\n                        row.original.status === 'active'\n                            ? 'success'\n                            : 'secondary'\n                    }\n                >\n                    {row.original.status}\n                </Badge>\n            )\n        },\n        {\n            accessorKey: 'createdAt',\n            header: ({ column }) => (\n                <DataTableColumnHeader\n                    column={column}\n                    title=\"Created\"\n                    label=\"Created\"\n                />\n            ),\n            cell: ({ row }) => row.original.createdAt.toLocaleDateString()\n        },\n        {\n            id: 'actions',\n            cell: ({ row }) => (\n                <DropdownMenu>\n                    <DropdownMenuTrigger asChild>\n                        <Button variant=\"ghost\" size=\"sm\">\n                            <MoreHorizontal className=\"h-4 w-4\" />\n                        </Button>\n                    </DropdownMenuTrigger>\n                    <DropdownMenuContent align=\"end\">\n                        <DropdownMenuItem\n                            onClick={() =>\n                                toast.success(`Edit ${row.original.name}`)\n                            }\n                        >\n                            Edit\n                        </DropdownMenuItem>\n                        <DropdownMenuItem\n                            onClick={() =>\n                                toast.success(`Delete ${row.original.id}`)\n                            }\n                            className=\"text-destructive\"\n                        >\n                            Delete\n                        </DropdownMenuItem>\n                    </DropdownMenuContent>\n                </DropdownMenu>\n            )\n        }\n    ]\n\n    return (\n        <div className=\"space-y-6 p-6\">\n            <div className=\"flex items-center justify-between\">\n                <div>\n                    <h2 className=\"text-2xl font-bold\">DataTable Example</h2>\n                    <p className=\"text-muted-foreground\">\n                        Full-featured table with sorting, filtering, and actions\n                    </p>\n                </div>\n                <Button>Add User</Button>\n            </div>\n\n            <DataTable\n                table={useReactTable({\n                    data: users,\n                    columns,\n                    getCoreRowModel: getCoreRowModel()\n                })}\n                mobileCard={(row) => (\n                    <div className=\"space-y-2\">\n                        <div className=\"flex items-center justify-between\">\n                            <div className=\"flex items-center gap-2\">\n                                <Avatar className=\"h-8 w-8\">\n                                    <AvatarFallback>\n                                        {(row.original as User).name[0]}\n                                    </AvatarFallback>\n                                </Avatar>\n                                <span className=\"font-semibold\">\n                                    {(row.original as User).name}\n                                </span>\n                            </div>\n                            <Badge>{(row.original as User).role}</Badge>\n                        </div>\n                        <p className=\"text-sm text-muted-foreground\">\n                            {(row.original as User).email}\n                        </p>\n                    </div>\n                )}\n            />\n        </div>\n    )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3200, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/shared/examples/index.ts"],"sourcesContent":["export { DataTableExample } from './data-table-example'\n"],"names":[],"mappings":";AAAA"}},
    {"offset": {"line": 3210, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/shared/index.ts"],"sourcesContent":["// Hooks\r\nexport * from './hooks'\r\nexport * from './hooks/use-crud-operations'\r\nexport * from './hooks/use-search-filter'\r\n\r\n// Utils\r\nexport * from './utils'\r\n\r\n// Types\r\nexport * from './types'\r\n\r\n// Examples\r\nexport * from './examples'\r\n"],"names":[],"mappings":"AAAA,QAAQ;;AACR;AACA;AACA;AAEA,QAAQ;AACR;AAEA,QAAQ;AACR;AAEA,WAAW;AACX"}},
    {"offset": {"line": 3234, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/items/hooks/use-units.ts"],"sourcesContent":["import { useFirestore, useFirestoreCollectionData } from 'reactfire'\nimport { collection, query, where } from 'firebase/firestore'\nimport { useCrudOperations } from '@/features/shared'\n\nexport interface Unit {\n    id: string\n    fullName: string\n    shortName: string\n    shopId: string\n    createdAt?: Date\n    updatedAt?: Date\n}\n\nexport function useUnits(shopId: string) {\n    const firestore = useFirestore()\n    const unitsRef = collection(firestore, 'units')\n    const q = query(unitsRef, where('shopId', '==', shopId))\n\n    const { status, data } = useFirestoreCollectionData(q, { idField: 'id' })\n\n    return {\n        units: (data as Unit[]) ?? [],\n        isLoading: status === 'loading'\n    }\n}\n\nexport function useUnitMutations(shopId: string) {\n    return useCrudOperations<Unit>('units', shopId)\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AAAA;AACA;AAAA;;;;;AAWO,SAAS,SAAS,MAAc;;IACnC,MAAM,YAAY,IAAA,kQAAY;IAC9B,MAAM,WAAW,IAAA,wRAAU,EAAC,WAAW;IACvC,MAAM,IAAI,IAAA,mRAAK,EAAC,UAAU,IAAA,mRAAK,EAAC,UAAU,MAAM;IAEhD,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,gRAA0B,EAAC,GAAG;QAAE,SAAS;IAAK;IAEvE,OAAO;QACH,OAAO,AAAC,QAAmB,EAAE;QAC7B,WAAW,WAAW;IAC1B;AACJ;GAXgB;;QACM,kQAAY;QAIL,gRAA0B;;;AAQhD,SAAS,iBAAiB,MAAc;;IAC3C,OAAO,IAAA,uLAAiB,EAAO,SAAS;AAC5C;IAFgB;;QACL,uLAAiB"}},
    {"offset": {"line": 3284, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/items/components/unit-form.tsx"],"sourcesContent":["import { useForm } from 'react-hook-form'\nimport { zodResolver } from '@hookform/resolvers/zod'\nimport { z } from 'zod'\nimport { ResponsiveModal } from '@/components/responsive/responsive-modal'\nimport { FormInput } from '@/components/common'\nimport { useShopContext } from '@/features/shop'\nimport { useUnitMutations } from '../hooks/use-units'\nimport { Form } from '@/components/ui/form'\n\nconst unitSchema = z.object({\n    fullName: z\n        .string()\n        .min(1, 'Full name is required')\n        .transform((val) => val.toUpperCase()),\n    shortName: z.string().min(1, 'Short name is required')\n})\n\ntype UnitFormData = z.infer<typeof unitSchema>\n\ninterface UnitFormProps {\n    open: boolean\n    onOpenChange: (open: boolean) => void\n}\n\nexport function UnitForm({ open, onOpenChange }: UnitFormProps) {\n    const { currentShop } = useShopContext()\n    const shopId = currentShop?.shopId || ''\n    const { create } = useUnitMutations(shopId)\n\n    const form = useForm<UnitFormData>({\n        resolver: zodResolver(unitSchema),\n        defaultValues: {\n            fullName: '',\n            shortName: ''\n        }\n    })\n\n    const onSubmit = async (data: UnitFormData) => {\n        await create(data)\n        form.reset()\n        onOpenChange(false)\n    }\n\n    return (\n        <ResponsiveModal\n            open={open}\n            onOpenChange={onOpenChange}\n            title=\"Add New Unit\"\n            formId=\"unit-form\"\n            submitLabel=\"Add Unit\"\n            isSubmitting={form.formState.isSubmitting}\n        >\n            <Form {...form}>\n                <form\n                    id=\"unit-form\"\n                    onSubmit={form.handleSubmit(onSubmit)}\n                    className=\"space-y-4\"\n                >\n                    <FormInput\n                        name=\"fullName\"\n                        label=\"Full Name\"\n                        placeholder=\"e.g., KILOGRAMS\"\n                        required\n                    />\n                    <FormInput\n                        name=\"shortName\"\n                        label=\"Short Name\"\n                        placeholder=\"e.g., Kg\"\n                        required\n                    />\n                </form>\n            </Form>\n        </ResponsiveModal>\n    )\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AACA;AACA;;;;;;;;;;;AAEA,MAAM,aAAa,sOAAC,CAAC,MAAM,CAAC;IACxB,UAAU,sOAAC,CACN,MAAM,GACN,GAAG,CAAC,GAAG,yBACP,SAAS,CAAC,CAAC,MAAQ,IAAI,WAAW;IACvC,WAAW,sOAAC,CAAC,MAAM,GAAG,GAAG,CAAC,GAAG;AACjC;AASO,SAAS,SAAS,EAAE,IAAI,EAAE,YAAY,EAAiB;;IAC1D,MAAM,EAAE,WAAW,EAAE,GAAG,IAAA,+KAAc;IACtC,MAAM,SAAS,aAAa,UAAU;IACtC,MAAM,EAAE,MAAM,EAAE,GAAG,IAAA,wKAAgB,EAAC;IAEpC,MAAM,OAAO,IAAA,qQAAO,EAAe;QAC/B,UAAU,IAAA,uRAAW,EAAC;QACtB,eAAe;YACX,UAAU;YACV,WAAW;QACf;IACJ;IAEA,MAAM,WAAW,OAAO;QACpB,MAAM,OAAO;QACb,KAAK,KAAK;QACV,aAAa;IACjB;IAEA,qBACI,4SAAC,6KAAe;QACZ,MAAM;QACN,cAAc;QACd,OAAM;QACN,QAAO;QACP,aAAY;QACZ,cAAc,KAAK,SAAS,CAAC,YAAY;kBAEzC,cAAA,4SAAC,2IAAI;YAAE,GAAG,IAAI;sBACV,cAAA,4SAAC;gBACG,IAAG;gBACH,UAAU,KAAK,YAAY,CAAC;gBAC5B,WAAU;;kCAEV,4SAAC,uKAAS;wBACN,MAAK;wBACL,OAAM;wBACN,aAAY;wBACZ,QAAQ;;;;;;kCAEZ,4SAAC,uKAAS;wBACN,MAAK;wBACL,OAAM;wBACN,aAAY;wBACZ,QAAQ;;;;;;;;;;;;;;;;;;;;;;AAMhC;GAlDgB;;QACY,+KAAc;QAEnB,wKAAgB;QAEtB,qQAAO;;;KALR"}},
    {"offset": {"line": 3398, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/auth/components/logout-button.tsx"],"sourcesContent":["export { LogoutButton } from '@/components/auth/logout-button'\r\n"],"names":[],"mappings":";AAAA"}},
    {"offset": {"line": 3408, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/auth/components/user-menu.tsx"],"sourcesContent":["export { UserMenu } from '@/components/auth/user-menu'\r\n"],"names":[],"mappings":";AAAA"}},
    {"offset": {"line": 3418, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/auth/components/index.ts"],"sourcesContent":["export * from './login-form'\r\nexport * from './profile-form'\r\nexport * from './auth-provider'\r\nexport * from './otp-input'\r\nexport * from './logout-button'\r\nexport * from './user-menu'\r\n"],"names":[],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 3438, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/auth/utils/otp-email.tsx"],"sourcesContent":["export { OTPEmail, renderOTPEmail } from '@/components/otp-email'\r\n"],"names":[],"mappings":";AAAA"}},
    {"offset": {"line": 3448, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/auth/utils/index.ts"],"sourcesContent":["export * from './otp-email'\r\n"],"names":[],"mappings":";AAAA"}},
    {"offset": {"line": 3458, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/auth/index.ts"],"sourcesContent":["export * from './api'\r\nexport * from './hooks'\r\nexport * from './types'\r\nexport * from './components'\r\nexport * from './utils'\r\n"],"names":[],"mappings":";AAAA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 3476, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/shop/components/shop-provider.tsx"],"sourcesContent":["import { ReactNode, useCallback } from 'react'\nimport { ShopContext } from '../hooks/use-shop-context'\nimport { useUserShops, useCurrentShop, useShopActions } from '../hooks'\nimport { useCurrentUser } from '@/features/auth'\nimport type { Shop } from '../types'\n\nexport function ShopProvider({ children }: { children: ReactNode }) {\n    const user = useCurrentUser()\n    const { userShops, loading, error, refreshShops } = useUserShops(user?.uid)\n    const { currentShop, setCurrentShop } = useCurrentShop(userShops)\n    const { createShop: createShopAction } = useShopActions()\n\n    const createShop = useCallback(\n        async (\n            shopData: Omit<\n                Shop,\n                'id' | 'created_userId' | 'createdAt' | 'updatedAt' | 'status'\n            >\n        ) => {\n            if (!user) throw new Error('User not authenticated')\n            const newShop = await createShopAction(user.uid, shopData)\n            await refreshShops()\n            const shopAccess = userShops.find((s) => s.shopId === newShop.id)\n            if (shopAccess) setCurrentShop(shopAccess)\n        },\n        [user, createShopAction, refreshShops, userShops, setCurrentShop]\n    )\n\n    const value = {\n        userShops,\n        currentShop,\n        setCurrentShop,\n        loading,\n        error,\n        refreshShops: async () => {\n            await refreshShops()\n        },\n        createShop\n    }\n\n    return <ShopContext.Provider value={value}>{children}</ShopContext.Provider>\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;;;;;;;AAGO,SAAS,aAAa,EAAE,QAAQ,EAA2B;;IAC9D,MAAM,OAAO,IAAA,+KAAc;IAC3B,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,KAAK,EAAE,YAAY,EAAE,GAAG,IAAA,2KAAY,EAAC,MAAM;IACvE,MAAM,EAAE,WAAW,EAAE,cAAc,EAAE,GAAG,IAAA,+KAAc,EAAC;IACvD,MAAM,EAAE,YAAY,gBAAgB,EAAE,GAAG,IAAA,+KAAc;IAEvD,MAAM,aAAa,IAAA,2RAAW;gDAC1B,OACI;YAKA,IAAI,CAAC,MAAM,MAAM,IAAI,MAAM;YAC3B,MAAM,UAAU,MAAM,iBAAiB,KAAK,GAAG,EAAE;YACjD,MAAM;YACN,MAAM,aAAa,UAAU,IAAI;mEAAC,CAAC,IAAM,EAAE,MAAM,KAAK,QAAQ,EAAE;;YAChE,IAAI,YAAY,eAAe;QACnC;+CACA;QAAC;QAAM;QAAkB;QAAc;QAAW;KAAe;IAGrE,MAAM,QAAQ;QACV;QACA;QACA;QACA;QACA;QACA,cAAc;YACV,MAAM;QACV;QACA;IACJ;IAEA,qBAAO,4SAAC,4KAAW,CAAC,QAAQ;QAAC,OAAO;kBAAQ;;;;;;AAChD;GAnCgB;;QACC,+KAAc;QACyB,2KAAY;QACxB,+KAAc;QACb,+KAAc;;;KAJ3C"}},
    {"offset": {"line": 3556, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/shop/components/create-shop-form.tsx"],"sourcesContent":["import { useEffect } from 'react'\nimport { useForm, Controller, SubmitHandler } from 'react-hook-form'\nimport { zodResolver } from '@hookform/resolvers/zod'\nimport { Button, SubmitButton } from '@/components/ui/button'\nimport { Input } from '@/components/ui/input'\nimport {\n    Field,\n    FieldDescription,\n    FieldError,\n    FieldGroup,\n    FieldLabel,\n    FieldSet\n} from '@/components/ui/field'\nimport { shopSchema, type ShopFormData } from '@/lib/validations'\nimport { ShopStatus } from '../types'\n\ninterface CreateShopFormProps {\n    onSubmit: (data: ShopFormData) => Promise<void>\n    onCancel: () => void\n    initialData?: ShopFormData\n}\n\nexport function CreateShopForm({\n    onSubmit,\n    onCancel,\n    initialData\n}: CreateShopFormProps) {\n    const form = useForm<ShopFormData>({\n        resolver: zodResolver(shopSchema),\n        defaultValues: initialData || {\n            shopname: '',\n            status: ShopStatus.ACTIVE\n        }\n    })\n\n    useEffect(() => {\n        if (initialData) {\n            form.reset(initialData)\n        }\n    }, [initialData, form])\n\n    const handleSubmit: SubmitHandler<ShopFormData> = async (data) => {\n        await onSubmit(data)\n        form.reset()\n    }\n\n    return (\n        <form onSubmit={form.handleSubmit(handleSubmit)}>\n            <FieldSet>\n                <FieldGroup>\n                    <Controller\n                        name=\"shopname\"\n                        control={form.control}\n                        render={({ field, fieldState }) => (\n                            <Field data-invalid={fieldState.invalid}>\n                                <FieldLabel htmlFor=\"shopname\">\n                                    Shop Name\n                                </FieldLabel>\n                                <Input\n                                    {...field}\n                                    id=\"shopname\"\n                                    type=\"text\"\n                                    placeholder=\"Enter shop name\"\n                                    disabled={form.formState.isSubmitting}\n                                    aria-invalid={fieldState.invalid}\n                                    autoFocus\n                                />\n                                <FieldDescription>\n                                    {initialData\n                                        ? 'Update the name of your shop'\n                                        : 'Choose a unique name for your shop'}\n                                </FieldDescription>\n                                {fieldState.invalid && (\n                                    <FieldError errors={[fieldState.error]} />\n                                )}\n                            </Field>\n                        )}\n                    />\n                </FieldGroup>\n            </FieldSet>\n            <div className=\"flex flex-col sm:flex-row justify-end gap-2 pt-4\">\n                <Button\n                    type=\"button\"\n                    variant=\"outline\"\n                    size=\"default\"\n                    onClick={onCancel}\n                    disabled={form.formState.isSubmitting}\n                >\n                    Cancel\n                </Button>\n                <SubmitButton\n                    type=\"submit\"\n                    size=\"default\"\n                    loading={form.formState.isSubmitting}\n                >\n                    {initialData ? 'Save Changes' : 'Create Shop'}\n                </SubmitButton>\n            </div>\n        </form>\n    )\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AAQA;AAAA;AACA;;;;;;;;;;;AAQO,SAAS,eAAe,EAC3B,QAAQ,EACR,QAAQ,EACR,WAAW,EACO;;IAClB,MAAM,OAAO,IAAA,qQAAO,EAAe;QAC/B,UAAU,IAAA,uRAAW,EAAC,kJAAU;QAChC,eAAe,eAAe;YAC1B,UAAU;YACV,QAAQ,0JAAU,CAAC,MAAM;QAC7B;IACJ;IAEA,IAAA,yRAAS;oCAAC;YACN,IAAI,aAAa;gBACb,KAAK,KAAK,CAAC;YACf;QACJ;mCAAG;QAAC;QAAa;KAAK;IAEtB,MAAM,eAA4C,OAAO;QACrD,MAAM,SAAS;QACf,KAAK,KAAK;IACd;IAEA,qBACI,4SAAC;QAAK,UAAU,KAAK,YAAY,CAAC;;0BAC9B,4SAAC,gJAAQ;0BACL,cAAA,4SAAC,kJAAU;8BACP,cAAA,4SAAC,wQAAU;wBACP,MAAK;wBACL,SAAS,KAAK,OAAO;wBACrB,QAAQ,CAAC,EAAE,KAAK,EAAE,UAAU,EAAE,iBAC1B,4SAAC,6IAAK;gCAAC,gBAAc,WAAW,OAAO;;kDACnC,4SAAC,kJAAU;wCAAC,SAAQ;kDAAW;;;;;;kDAG/B,4SAAC,6IAAK;wCACD,GAAG,KAAK;wCACT,IAAG;wCACH,MAAK;wCACL,aAAY;wCACZ,UAAU,KAAK,SAAS,CAAC,YAAY;wCACrC,gBAAc,WAAW,OAAO;wCAChC,SAAS;;;;;;kDAEb,4SAAC,wJAAgB;kDACZ,cACK,iCACA;;;;;;oCAET,WAAW,OAAO,kBACf,4SAAC,kJAAU;wCAAC,QAAQ;4CAAC,WAAW,KAAK;yCAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;0BAO9D,4SAAC;gBAAI,WAAU;;kCACX,4SAAC,+IAAM;wBACH,MAAK;wBACL,SAAQ;wBACR,MAAK;wBACL,SAAS;wBACT,UAAU,KAAK,SAAS,CAAC,YAAY;kCACxC;;;;;;kCAGD,4SAAC,qJAAY;wBACT,MAAK;wBACL,MAAK;wBACL,SAAS,KAAK,SAAS,CAAC,YAAY;kCAEnC,cAAc,iBAAiB;;;;;;;;;;;;;;;;;;AAKpD;GA9EgB;;QAKC,qQAAO;;;KALR"}},
    {"offset": {"line": 3725, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/shop/components/create-shop-modal.tsx"],"sourcesContent":["import { useState } from 'react'\nimport { toast } from 'sonner'\nimport { ResponsiveModal } from '@/components'\nimport { CreateShopForm } from './create-shop-form'\nimport { useShopActions } from '../hooks'\nimport { useCurrentUser } from '@/features/auth'\nimport type { ShopFormData } from '@/lib/validations'\n\ninterface CreateShopModalProps {\n    trigger?: React.ReactNode\n    open?: boolean\n    onOpenChange?: (open: boolean) => void\n    onSuccess?: () => void\n}\n\nexport function CreateShopModal({\n    trigger,\n    open: controlledOpen,\n    onOpenChange,\n    onSuccess\n}: CreateShopModalProps) {\n    const [internalOpen, setInternalOpen] = useState(false)\n    const open = controlledOpen ?? internalOpen\n    const setOpen = onOpenChange ?? setInternalOpen\n    const { createShop } = useShopActions()\n    const user = useCurrentUser()\n\n    const handleSubmit = async (data: ShopFormData) => {\n        if (!user?.uid) throw new Error('User not authenticated')\n        // eslint-disable-next-line @typescript-eslint/no-unused-vars\n        const { status, ...shopData } = data\n        await createShop(user.uid, shopData)\n        toast.success('Shop created', {\n            description: `\"${data.shopname}\" has been created successfully.`\n        })\n        setOpen(false)\n        onSuccess?.()\n    }\n\n    return (\n        <>\n            {trigger && <div onClick={() => setOpen(true)}>{trigger}</div>}\n            <ResponsiveModal\n                title=\"Create Shop\"\n                description=\"Enter shop details to create a new shop\"\n                open={open}\n                onOpenChange={setOpen}\n            >\n                <CreateShopForm\n                    onSubmit={handleSubmit}\n                    onCancel={() => setOpen(false)}\n                />\n            </ResponsiveModal>\n        </>\n    )\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AAAA;;;;;;;;;AAUO,SAAS,gBAAgB,EAC5B,OAAO,EACP,MAAM,cAAc,EACpB,YAAY,EACZ,SAAS,EACU;;IACnB,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,wRAAQ,EAAC;IACjD,MAAM,OAAO,kBAAkB;IAC/B,MAAM,UAAU,gBAAgB;IAChC,MAAM,EAAE,UAAU,EAAE,GAAG,IAAA,+KAAc;IACrC,MAAM,OAAO,IAAA,+KAAc;IAE3B,MAAM,eAAe,OAAO;QACxB,IAAI,CAAC,MAAM,KAAK,MAAM,IAAI,MAAM;QAChC,6DAA6D;QAC7D,MAAM,EAAE,MAAM,EAAE,GAAG,UAAU,GAAG;QAChC,MAAM,WAAW,KAAK,GAAG,EAAE;QAC3B,oRAAK,CAAC,OAAO,CAAC,gBAAgB;YAC1B,aAAa,CAAC,CAAC,EAAE,KAAK,QAAQ,CAAC,gCAAgC,CAAC;QACpE;QACA,QAAQ;QACR;IACJ;IAEA,qBACI;;YACK,yBAAW,4SAAC;gBAAI,SAAS,IAAM,QAAQ;0BAAQ;;;;;;0BAChD,4SAAC,6KAAe;gBACZ,OAAM;gBACN,aAAY;gBACZ,MAAM;gBACN,cAAc;0BAEd,cAAA,4SAAC,qLAAc;oBACX,UAAU;oBACV,UAAU,IAAM,QAAQ;;;;;;;;;;;;;AAK5C;GAxCgB;;QASW,+KAAc;QACxB,+KAAc;;;KAVf"}},
    {"offset": {"line": 3812, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/shop/components/edit-shop-modal.tsx"],"sourcesContent":["import { useState, useEffect } from 'react'\nimport { toast } from 'sonner'\nimport { ResponsiveModal } from '@/components'\nimport { CreateShopForm } from './create-shop-form'\nimport { useShopActions } from '../hooks'\nimport { shopApi } from '../api'\nimport type { ShopFormData } from '@/lib/validations'\nimport type { Shop } from '../types'\n\ninterface EditShopModalProps {\n    shopId: string\n    open?: boolean\n    onOpenChange?: (open: boolean) => void\n    onSuccess?: () => void\n}\n\nexport function EditShopModal({\n    shopId,\n    open: controlledOpen,\n    onOpenChange,\n    onSuccess\n}: EditShopModalProps) {\n    const [internalOpen, setInternalOpen] = useState(false)\n    const [shopData, setShopData] = useState<Shop | null>(null)\n    const open = controlledOpen ?? internalOpen\n    const setOpen = onOpenChange ?? setInternalOpen\n    const { updateShop } = useShopActions()\n\n    useEffect(() => {\n        if (open && shopId) {\n            shopApi\n                .getShop(shopId)\n                .then(setShopData)\n                .catch(() => {\n                    toast.error('Failed to load shop details')\n                    setOpen(false)\n                })\n        }\n    }, [open, shopId, setOpen])\n\n    const handleSubmit = async (data: ShopFormData) => {\n        await updateShop(shopId, data)\n        toast.success('Shop updated', {\n            description: 'Shop has been updated successfully.'\n        })\n        setOpen(false)\n        onSuccess?.()\n    }\n\n    if (!shopData) return null\n\n    return (\n        <ResponsiveModal\n            title=\"Edit Shop\"\n            description=\"Update your shop information below\"\n            open={open}\n            onOpenChange={setOpen}\n        >\n            <CreateShopForm\n                onSubmit={handleSubmit}\n                onCancel={() => setOpen(false)}\n                initialData={{\n                    shopname: shopData.shopname,\n                    logo_url: shopData.logo_url || '',\n                    phone_number: shopData.phone_number || '',\n                    email: shopData.email || '',\n                    shop_type: shopData.shop_type || '',\n                    shop_category: shopData.shop_category || '',\n                    shop_address: shopData.shop_address || '',\n                    signature: shopData.signature || '',\n                    status: shopData.status\n                }}\n            />\n        </ResponsiveModal>\n    )\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AAAA;AACA;AACA;AAAA;AACA;AAAA;;;;;;;;;AAWO,SAAS,cAAc,EAC1B,MAAM,EACN,MAAM,cAAc,EACpB,YAAY,EACZ,SAAS,EACQ;;IACjB,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,wRAAQ,EAAC;IACjD,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,wRAAQ,EAAc;IACtD,MAAM,OAAO,kBAAkB;IAC/B,MAAM,UAAU,gBAAgB;IAChC,MAAM,EAAE,UAAU,EAAE,GAAG,IAAA,+KAAc;IAErC,IAAA,yRAAS;mCAAC;YACN,IAAI,QAAQ,QAAQ;gBAChB,2JAAO,CACF,OAAO,CAAC,QACR,IAAI,CAAC,aACL,KAAK;+CAAC;wBACH,oRAAK,CAAC,KAAK,CAAC;wBACZ,QAAQ;oBACZ;;YACR;QACJ;kCAAG;QAAC;QAAM;QAAQ;KAAQ;IAE1B,MAAM,eAAe,OAAO;QACxB,MAAM,WAAW,QAAQ;QACzB,oRAAK,CAAC,OAAO,CAAC,gBAAgB;YAC1B,aAAa;QACjB;QACA,QAAQ;QACR;IACJ;IAEA,IAAI,CAAC,UAAU,OAAO;IAEtB,qBACI,4SAAC,6KAAe;QACZ,OAAM;QACN,aAAY;QACZ,MAAM;QACN,cAAc;kBAEd,cAAA,4SAAC,qLAAc;YACX,UAAU;YACV,UAAU,IAAM,QAAQ;YACxB,aAAa;gBACT,UAAU,SAAS,QAAQ;gBAC3B,UAAU,SAAS,QAAQ,IAAI;gBAC/B,cAAc,SAAS,YAAY,IAAI;gBACvC,OAAO,SAAS,KAAK,IAAI;gBACzB,WAAW,SAAS,SAAS,IAAI;gBACjC,eAAe,SAAS,aAAa,IAAI;gBACzC,cAAc,SAAS,YAAY,IAAI;gBACvC,WAAW,SAAS,SAAS,IAAI;gBACjC,QAAQ,SAAS,MAAM;YAC3B;;;;;;;;;;;AAIhB;GA3DgB;;QAUW,+KAAc;;;KAVzB"}},
    {"offset": {"line": 3911, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/shop/components/shop-dashboard.tsx"],"sourcesContent":["export { default as ShopDashboard } from '@/components/shop/shop-dashboard'\r\n"],"names":[],"mappings":";AAAA"}},
    {"offset": {"line": 3921, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/shop/components/shop-item.tsx"],"sourcesContent":["export { default as ShopItem } from '@/components/shop/shop-item'\r\n"],"names":[],"mappings":";AAAA"}},
    {"offset": {"line": 3931, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/shop/components/shop-switcher.tsx"],"sourcesContent":["export { ShopSwitcher } from '@/components/shop/shop-switcher'\r\n"],"names":[],"mappings":";AAAA"}},
    {"offset": {"line": 3941, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/shop/components/index.ts"],"sourcesContent":["export * from './shop-provider'\r\nexport * from './create-shop-form'\r\nexport * from './create-shop-modal'\r\nexport * from './edit-shop-modal'\r\nexport * from './shop-dashboard'\r\nexport * from './shop-item'\r\nexport * from './shop-switcher'\r\n"],"names":[],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA"}},
    {"offset": {"line": 3963, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/shop/utils/permissions.ts"],"sourcesContent":["import { ShopRole, ShopPermission } from '../types'\n\nexport function hasPermission(\n    role: ShopRole,\n    permissions: ShopPermission[],\n    resource: string,\n    action: 'read' | 'write' | 'delete'\n): boolean {\n    if (role === ShopRole.OWNER) return true\n\n    const permission = permissions.find((p) => p.resource === resource)\n    return permission ? permission.actions.includes(action) : false\n}\n\nexport function canManageMembers(role: ShopRole): boolean {\n    return [ShopRole.OWNER, ShopRole.ADMIN].includes(role)\n}\n\nexport function canEditShop(role: ShopRole): boolean {\n    return [ShopRole.OWNER, ShopRole.ADMIN, ShopRole.MANAGER].includes(role)\n}\n\nexport function canDeleteShop(role: ShopRole): boolean {\n    return role === ShopRole.OWNER\n}\n"],"names":[],"mappings":";;;;;;;;;;AAAA;;AAEO,SAAS,cACZ,IAAc,EACd,WAA6B,EAC7B,QAAgB,EAChB,MAAmC;IAEnC,IAAI,SAAS,wJAAQ,CAAC,KAAK,EAAE,OAAO;IAEpC,MAAM,aAAa,YAAY,IAAI,CAAC,CAAC,IAAM,EAAE,QAAQ,KAAK;IAC1D,OAAO,aAAa,WAAW,OAAO,CAAC,QAAQ,CAAC,UAAU;AAC9D;AAEO,SAAS,iBAAiB,IAAc;IAC3C,OAAO;QAAC,wJAAQ,CAAC,KAAK;QAAE,wJAAQ,CAAC,KAAK;KAAC,CAAC,QAAQ,CAAC;AACrD;AAEO,SAAS,YAAY,IAAc;IACtC,OAAO;QAAC,wJAAQ,CAAC,KAAK;QAAE,wJAAQ,CAAC,KAAK;QAAE,wJAAQ,CAAC,OAAO;KAAC,CAAC,QAAQ,CAAC;AACvE;AAEO,SAAS,cAAc,IAAc;IACxC,OAAO,SAAS,wJAAQ,CAAC,KAAK;AAClC"}},
    {"offset": {"line": 4003, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/shop/utils/validation.ts"],"sourcesContent":["import { CreateShopData } from '../types'\n\nexport function validateShopData(data: CreateShopData): string[] {\n    const errors: string[] = []\n\n    if (!data.shopname || data.shopname.trim().length === 0) {\n        errors.push('Shop name is required')\n    }\n\n    if (data.shopname && data.shopname.length > 100) {\n        errors.push('Shop name must be less than 100 characters')\n    }\n\n    if (data.email && !isValidEmail(data.email)) {\n        errors.push('Invalid email address')\n    }\n\n    if (data.phone_number && !isValidPhone(data.phone_number)) {\n        errors.push('Invalid phone number')\n    }\n\n    return errors\n}\n\nfunction isValidEmail(email: string): boolean {\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/\n    return emailRegex.test(email)\n}\n\nfunction isValidPhone(phone: string): boolean {\n    const phoneRegex = /^\\+?[\\d\\s-()]+$/\n    return phoneRegex.test(phone) && phone.replace(/\\D/g, '').length >= 10\n}\n"],"names":[],"mappings":";;;;AAEO,SAAS,iBAAiB,IAAoB;IACjD,MAAM,SAAmB,EAAE;IAE3B,IAAI,CAAC,KAAK,QAAQ,IAAI,KAAK,QAAQ,CAAC,IAAI,GAAG,MAAM,KAAK,GAAG;QACrD,OAAO,IAAI,CAAC;IAChB;IAEA,IAAI,KAAK,QAAQ,IAAI,KAAK,QAAQ,CAAC,MAAM,GAAG,KAAK;QAC7C,OAAO,IAAI,CAAC;IAChB;IAEA,IAAI,KAAK,KAAK,IAAI,CAAC,aAAa,KAAK,KAAK,GAAG;QACzC,OAAO,IAAI,CAAC;IAChB;IAEA,IAAI,KAAK,YAAY,IAAI,CAAC,aAAa,KAAK,YAAY,GAAG;QACvD,OAAO,IAAI,CAAC;IAChB;IAEA,OAAO;AACX;AAEA,SAAS,aAAa,KAAa;IAC/B,MAAM,aAAa;IACnB,OAAO,WAAW,IAAI,CAAC;AAC3B;AAEA,SAAS,aAAa,KAAa;IAC/B,MAAM,aAAa;IACnB,OAAO,WAAW,IAAI,CAAC,UAAU,MAAM,OAAO,CAAC,OAAO,IAAI,MAAM,IAAI;AACxE"}},
    {"offset": {"line": 4038, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/shop/utils/index.ts"],"sourcesContent":["export * from './permissions'\nexport * from './validation'\n"],"names":[],"mappings":";AAAA;AACA"}},
    {"offset": {"line": 4050, "column": 0}, "map": {"version":3,"sources":["file:///C:/Projects/Shop-Management-System/shop-management-app/src/features/shop/index.ts"],"sourcesContent":["export * from './api'\nexport * from './hooks'\nexport * from './types'\nexport * from './components'\nexport * from './utils'\n"],"names":[],"mappings":";AAAA;AACA;AACA;AACA;AACA"}}]
}